<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DIPY &#8212; dipy 0.15.0dev documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.15.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="sims" href="dipy.sims.html" />
  <meta name="keywords" content="DIPY, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="DIPY logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dipy.sims.html" title="sims"
             accesskey="P">previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">API Reference</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.org/nipy/license.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">tracking</span></code></a><ul>
<li><a class="reference internal" href="#module-dipy.tracking._utils">Module: <code class="docutils literal"><span class="pre">tracking._utils</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.benchmarks">Module: <code class="docutils literal"><span class="pre">tracking.benchmarks</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.benchmarks.bench_streamline">Module: <code class="docutils literal"><span class="pre">tracking.benchmarks.bench_streamline</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.eudx">Module: <code class="docutils literal"><span class="pre">tracking.eudx</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.learning">Module: <code class="docutils literal"><span class="pre">tracking.learning</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.life">Module: <code class="docutils literal"><span class="pre">tracking.life</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.local">Module: <code class="docutils literal"><span class="pre">tracking.local</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.local.localtracking">Module: <code class="docutils literal"><span class="pre">tracking.local.localtracking</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.metrics">Module: <code class="docutils literal"><span class="pre">tracking.metrics</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.streamline">Module: <code class="docutils literal"><span class="pre">tracking.streamline</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.tracking.utils">Module: <code class="docutils literal"><span class="pre">tracking.utils</span></code></a><ul>
<li><a class="reference internal" href="#important-note">Important Note:</a></li>
<li><a class="reference internal" href="#streamlines"><code class="docutils literal"><span class="pre">Streamlines</span></code></a></li>
<li><a class="reference internal" href="#bench">bench</a></li>
<li><a class="reference internal" href="#test">test</a></li>
<li><a class="reference internal" href="#warn">warn</a></li>
<li><a class="reference internal" href="#id10"><code class="docutils literal"><span class="pre">Streamlines</span></code></a></li>
<li><a class="reference internal" href="#assert-array-almost-equal">assert_array_almost_equal</a></li>
<li><a class="reference internal" href="#assert-array-equal">assert_array_equal</a></li>
<li><a class="reference internal" href="#bench-compress-streamlines">bench_compress_streamlines</a></li>
<li><a class="reference internal" href="#bench-length">bench_length</a></li>
<li><a class="reference internal" href="#bench-set-number-of-points">bench_set_number_of_points</a></li>
<li><a class="reference internal" href="#compress-streamlines">compress_streamlines</a></li>
<li><a class="reference internal" href="#compress-streamlines-python">compress_streamlines_python</a></li>
<li><a class="reference internal" href="#generate-streamlines">generate_streamlines</a></li>
<li><a class="reference internal" href="#get-data">get_data</a></li>
<li><a class="reference internal" href="#length">length</a></li>
<li><a class="reference internal" href="#length-python">length_python</a></li>
<li><a class="reference internal" href="#measure">measure</a></li>
<li><a class="reference internal" href="#set-number-of-points">set_number_of_points</a></li>
<li><a class="reference internal" href="#set-number-of-points-python">set_number_of_points_python</a></li>
<li><a class="reference internal" href="#setup">setup</a></li>
<li><a class="reference internal" href="#eudx"><code class="docutils literal"><span class="pre">EuDX</span></code></a></li>
<li><a class="reference internal" href="#eudx-both-directions">eudx_both_directions</a></li>
<li><a class="reference internal" href="#get-sphere">get_sphere</a></li>
<li><a class="reference internal" href="#detect-corresponding-tracks">detect_corresponding_tracks</a></li>
<li><a class="reference internal" href="#detect-corresponding-tracks-plus">detect_corresponding_tracks_plus</a></li>
<li><a class="reference internal" href="#fiberfit"><code class="docutils literal"><span class="pre">FiberFit</span></code></a></li>
<li><a class="reference internal" href="#fibermodel"><code class="docutils literal"><span class="pre">FiberModel</span></code></a></li>
<li><a class="reference internal" href="#lifesignalmaker"><code class="docutils literal"><span class="pre">LifeSignalMaker</span></code></a></li>
<li><a class="reference internal" href="#reconstfit"><code class="docutils literal"><span class="pre">ReconstFit</span></code></a></li>
<li><a class="reference internal" href="#reconstmodel"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#range"><code class="docutils literal"><span class="pre">range</span></code></a></li>
<li><a class="reference internal" href="#grad-tensor">grad_tensor</a></li>
<li><a class="reference internal" href="#gradient">gradient</a></li>
<li><a class="reference internal" href="#setup-test">setup_test</a></li>
<li><a class="reference internal" href="#streamline-gradients">streamline_gradients</a></li>
<li><a class="reference internal" href="#streamline-signal">streamline_signal</a></li>
<li><a class="reference internal" href="#streamline-tensors">streamline_tensors</a></li>
<li><a class="reference internal" href="#transform-streamlines">transform_streamlines</a></li>
<li><a class="reference internal" href="#unique-rows">unique_rows</a></li>
<li><a class="reference internal" href="#voxel2streamline">voxel2streamline</a></li>
<li><a class="reference internal" href="#acttissueclassifier"><code class="docutils literal"><span class="pre">ActTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#binarytissueclassifier"><code class="docutils literal"><span class="pre">BinaryTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#cmctissueclassifier"><code class="docutils literal"><span class="pre">CmcTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#constrainedtissueclassifier"><code class="docutils literal"><span class="pre">ConstrainedTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#directiongetter"><code class="docutils literal"><span class="pre">DirectionGetter</span></code></a></li>
<li><a class="reference internal" href="#localtracking"><code class="docutils literal"><span class="pre">LocalTracking</span></code></a></li>
<li><a class="reference internal" href="#particlefilteringtracking"><code class="docutils literal"><span class="pre">ParticleFilteringTracking</span></code></a></li>
<li><a class="reference internal" href="#thresholdtissueclassifier"><code class="docutils literal"><span class="pre">ThresholdTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#tissueclassifier"><code class="docutils literal"><span class="pre">TissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#bunch"><code class="docutils literal"><span class="pre">Bunch</span></code></a></li>
<li><a class="reference internal" href="#id35"><code class="docutils literal"><span class="pre">ConstrainedTissueClassifier</span></code></a></li>
<li><a class="reference internal" href="#id36"><code class="docutils literal"><span class="pre">LocalTracking</span></code></a></li>
<li><a class="reference internal" href="#id37"><code class="docutils literal"><span class="pre">ParticleFilteringTracking</span></code></a></li>
<li><a class="reference internal" href="#local-tracker">local_tracker</a></li>
<li><a class="reference internal" href="#pft-tracker">pft_tracker</a></li>
<li><a class="reference internal" href="#xrange"><code class="docutils literal"><span class="pre">xrange</span></code></a></li>
<li><a class="reference internal" href="#arbitrarypoint">arbitrarypoint</a></li>
<li><a class="reference internal" href="#bytes">bytes</a></li>
<li><a class="reference internal" href="#center-of-mass">center_of_mass</a></li>
<li><a class="reference internal" href="#downsample">downsample</a></li>
<li><a class="reference internal" href="#endpoint">endpoint</a></li>
<li><a class="reference internal" href="#frenet-serret">frenet_serret</a></li>
<li><a class="reference internal" href="#generate-combinations">generate_combinations</a></li>
<li><a class="reference internal" href="#inside-sphere">inside_sphere</a></li>
<li><a class="reference internal" href="#inside-sphere-points">inside_sphere_points</a></li>
<li><a class="reference internal" href="#intersect-sphere">intersect_sphere</a></li>
<li><a class="reference internal" href="#id40">length</a></li>
<li><a class="reference internal" href="#longest-track-bundle">longest_track_bundle</a></li>
<li><a class="reference internal" href="#magn">magn</a></li>
<li><a class="reference internal" href="#mean-curvature">mean_curvature</a></li>
<li><a class="reference internal" href="#mean-orientation">mean_orientation</a></li>
<li><a class="reference internal" href="#midpoint">midpoint</a></li>
<li><a class="reference internal" href="#midpoint2point">midpoint2point</a></li>
<li><a class="reference internal" href="#principal-components">principal_components</a></li>
<li><a class="reference internal" href="#id41">setup_test</a></li>
<li><a class="reference internal" href="#splev">splev</a></li>
<li><a class="reference internal" href="#spline">spline</a></li>
<li><a class="reference internal" href="#splprep">splprep</a></li>
<li><a class="reference internal" href="#startpoint">startpoint</a></li>
<li><a class="reference internal" href="#winding">winding</a></li>
<li><a class="reference internal" href="#arraysequence"><code class="docutils literal"><span class="pre">ArraySequence</span></code></a><ul>
</ul>
</li>
<li><a class="reference internal" href="#looseversion"><code class="docutils literal"><span class="pre">LooseVersion</span></code></a></li>
<li><a class="reference internal" href="#id48"><code class="docutils literal"><span class="pre">Streamlines</span></code></a><ul>
</ul>
</li>
<li><a class="reference internal" href="#apply-affine">apply_affine</a></li>
<li><a class="reference internal" href="#cdist">cdist</a></li>
<li><a class="reference internal" href="#center-streamlines">center_streamlines</a></li>
<li><a class="reference internal" href="#id49">compress_streamlines</a></li>
<li><a class="reference internal" href="#deepcopy">deepcopy</a></li>
<li><a class="reference internal" href="#deform-streamlines">deform_streamlines</a></li>
<li><a class="reference internal" href="#dist-to-corner">dist_to_corner</a></li>
<li><a class="reference internal" href="#id64">length</a></li>
<li><a class="reference internal" href="#mul">mul</a></li>
<li><a class="reference internal" href="#nbytes">nbytes</a></li>
<li><a class="reference internal" href="#orient-by-rois">orient_by_rois</a></li>
<li><a class="reference internal" href="#reduce">reduce</a></li>
<li><a class="reference internal" href="#relist-streamlines">relist_streamlines</a></li>
<li><a class="reference internal" href="#select-by-rois">select_by_rois</a></li>
<li><a class="reference internal" href="#select-random-set-of-streamlines">select_random_set_of_streamlines</a></li>
<li><a class="reference internal" href="#id65">set_number_of_points</a></li>
<li><a class="reference internal" href="#id66">setup_test</a></li>
<li><a class="reference internal" href="#streamline-near-roi">streamline_near_roi</a></li>
<li><a class="reference internal" href="#id67">transform_streamlines</a></li>
<li><a class="reference internal" href="#unlist-streamlines">unlist_streamlines</a></li>
<li><a class="reference internal" href="#values-from-volume">values_from_volume</a></li>
<li><a class="reference internal" href="#id68">warn</a></li>
<li><a class="reference internal" href="#defaultdict"><code class="docutils literal"><span class="pre">defaultdict</span></code></a></li>
<li><a class="reference internal" href="#map"><code class="docutils literal"><span class="pre">map</span></code></a></li>
<li><a class="reference internal" href="#id71"><code class="docutils literal"><span class="pre">xrange</span></code></a></li>
<li><a class="reference internal" href="#affine-for-trackvis">affine_for_trackvis</a></li>
<li><a class="reference internal" href="#affine-from-fsl-mat-file">affine_from_fsl_mat_file</a></li>
<li><a class="reference internal" href="#id72">apply_affine</a></li>
<li><a class="reference internal" href="#asarray">asarray</a></li>
<li><a class="reference internal" href="#id73">cdist</a></li>
<li><a class="reference internal" href="#connectivity-matrix">connectivity_matrix</a></li>
<li><a class="reference internal" href="#density-map">density_map</a></li>
<li><a class="reference internal" href="#id74">dist_to_corner</a></li>
<li><a class="reference internal" href="#dot">dot</a></li>
<li><a class="reference internal" href="#empty">empty</a></li>
<li><a class="reference internal" href="#eye">eye</a></li>
<li><a class="reference internal" href="#flexi-tvis-affine">flexi_tvis_affine</a></li>
<li><a class="reference internal" href="#get-flexi-tvis-affine">get_flexi_tvis_affine</a></li>
<li><a class="reference internal" href="#id75">length</a></li>
<li><a class="reference internal" href="#minimum-at">minimum_at</a></li>
<li><a class="reference internal" href="#move-streamlines">move_streamlines</a></li>
<li><a class="reference internal" href="#ndbincount">ndbincount</a></li>
<li><a class="reference internal" href="#near-roi">near_roi</a></li>
<li><a class="reference internal" href="#orientation-from-string">orientation_from_string</a></li>
<li><a class="reference internal" href="#ornt-mapping">ornt_mapping</a></li>
<li><a class="reference internal" href="#path-length">path_length</a></li>
<li><a class="reference internal" href="#random-seeds-from-mask">random_seeds_from_mask</a></li>
<li><a class="reference internal" href="#ravel-multi-index">ravel_multi_index</a></li>
<li><a class="reference internal" href="#reduce-labels">reduce_labels</a></li>
<li><a class="reference internal" href="#reduce-rois">reduce_rois</a></li>
<li><a class="reference internal" href="#reorder-voxels-affine">reorder_voxels_affine</a></li>
<li><a class="reference internal" href="#seeds-from-mask">seeds_from_mask</a></li>
<li><a class="reference internal" href="#id76">setup_test</a></li>
<li><a class="reference internal" href="#id77">streamline_near_roi</a></li>
<li><a class="reference internal" href="#subsegment">subsegment</a></li>
<li><a class="reference internal" href="#target">target</a></li>
<li><a class="reference internal" href="#target-line-based">target_line_based</a></li>
<li><a class="reference internal" href="#id78">unique_rows</a></li>
<li><a class="reference internal" href="#id79">warn</a></li>
<li><a class="reference internal" href="#wraps">wraps</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dipy.sims.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">sims</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/dipy.tracking.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.python.org/pipermail/neuroimaging/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>

<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


<script>
     ((window.gitter = {}).chat = {}).options = {
       room: 'nipy/dipy'
     };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dipy.tracking">
<span id="tracking"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">tracking</span></code><a class="headerlink" href="#module-dipy.tracking" title="Permalink to this headline">¶</a></h1>
<p>Tracking objects</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-obj docutils literal"><span class="pre">Streamlines</span></code></a></td>
<td>alias of <code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.bench" title="dipy.tracking.bench"><code class="xref py py-obj docutils literal"><span class="pre">bench</span></code></a></td>
<td>Run benchmarks for module using nose.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.test" title="dipy.tracking.test"><code class="xref py py-obj docutils literal"><span class="pre">test</span></code></a></td>
<td>Run tests for module using nose.</td>
</tr>
</tbody>
</table>
<div class="section" id="module-dipy.tracking._utils">
<span id="module-tracking-utils"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking._utils</span></code><a class="headerlink" href="#module-dipy.tracking._utils" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking._utils.warn" title="dipy.tracking._utils.warn"><code class="xref py py-obj docutils literal"><span class="pre">warn</span></code></a></td>
<td>Issue a warning, or maybe ignore it or raise an exception.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.benchmarks">
<span id="module-tracking-benchmarks"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.benchmarks</span></code><a class="headerlink" href="#module-dipy.tracking.benchmarks" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.benchmarks.bench_streamline">
<span id="module-tracking-benchmarks-bench-streamline"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.benchmarks.bench_streamline</span></code><a class="headerlink" href="#module-dipy.tracking.benchmarks.bench_streamline" title="Permalink to this headline">¶</a></h2>
<p>Benchmarks for functions related to streamline</p>
<p>Run all benchmarks with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dipy.tracking</span> <span class="k">as</span> <span class="nn">dipytracking</span>
<span class="n">dipytracking</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span>
</pre></div>
</div>
<p>If you have doctests enabled by default in nose (with a noserc file or
environment variable), and you have a numpy version &lt;= 1.6.1, this will also
run the doctests, let&#8217;s hope they pass.</p>
<p>Run this benchmark with:</p>
<blockquote>
<div>nosetests -s &#8211;match &#8216;(?:^|[b_.//-])[Bb]ench&#8217; bench_streamline.py</div></blockquote>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.Streamlines" title="dipy.tracking.benchmarks.bench_streamline.Streamlines"><code class="xref py py-obj docutils literal"><span class="pre">Streamlines</span></code></a></td>
<td>alias of <code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.assert_array_almost_equal" title="dipy.tracking.benchmarks.bench_streamline.assert_array_almost_equal"><code class="xref py py-obj docutils literal"><span class="pre">assert_array_almost_equal</span></code></a>(x,&nbsp;y[,&nbsp;decimal,&nbsp;...])</td>
<td>Raises an AssertionError if two objects are not equal up to desired precision.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.assert_array_equal" title="dipy.tracking.benchmarks.bench_streamline.assert_array_equal"><code class="xref py py-obj docutils literal"><span class="pre">assert_array_equal</span></code></a>(x,&nbsp;y[,&nbsp;err_msg,&nbsp;verbose])</td>
<td>Raises an AssertionError if two array_like objects are not equal.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines" title="dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">bench_compress_streamlines</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.bench_length" title="dipy.tracking.benchmarks.bench_streamline.bench_length"><code class="xref py py-obj docutils literal"><span class="pre">bench_length</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points" title="dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points"><code class="xref py py-obj docutils literal"><span class="pre">bench_set_number_of_points</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.compress_streamlines" title="dipy.tracking.benchmarks.bench_streamline.compress_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">compress_streamlines</span></code></a></td>
<td>Compress streamlines by linearization as in <a class="reference internal" href="#id58" id="id1">[Presseau15]</a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.compress_streamlines_python" title="dipy.tracking.benchmarks.bench_streamline.compress_streamlines_python"><code class="xref py py-obj docutils literal"><span class="pre">compress_streamlines_python</span></code></a>(streamline[,&nbsp;...])</td>
<td>Python version of the FiberCompression found on <a class="reference external" href="https://github.com/scilus/FiberCompression">https://github.com/scilus/FiberCompression</a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.generate_streamlines" title="dipy.tracking.benchmarks.bench_streamline.generate_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">generate_streamlines</span></code></a>(nb_streamlines,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.get_data" title="dipy.tracking.benchmarks.bench_streamline.get_data"><code class="xref py py-obj docutils literal"><span class="pre">get_data</span></code></a>([name])</td>
<td>provides filenames of some test datasets or other useful parametrisations</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.length" title="dipy.tracking.benchmarks.bench_streamline.length"><code class="xref py py-obj docutils literal"><span class="pre">length</span></code></a></td>
<td>Euclidean length of streamlines</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.length_python" title="dipy.tracking.benchmarks.bench_streamline.length_python"><code class="xref py py-obj docutils literal"><span class="pre">length_python</span></code></a>(xyz[,&nbsp;along])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.measure" title="dipy.tracking.benchmarks.bench_streamline.measure"><code class="xref py py-obj docutils literal"><span class="pre">measure</span></code></a>(code_str[,&nbsp;times,&nbsp;label])</td>
<td>Return elapsed time for executing code in the namespace of the caller.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.set_number_of_points" title="dipy.tracking.benchmarks.bench_streamline.set_number_of_points"><code class="xref py py-obj docutils literal"><span class="pre">set_number_of_points</span></code></a></td>
<td>Change the number of points of streamlines</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.set_number_of_points_python" title="dipy.tracking.benchmarks.bench_streamline.set_number_of_points_python"><code class="xref py py-obj docutils literal"><span class="pre">set_number_of_points_python</span></code></a>(xyz[,&nbsp;n_pols])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.setup" title="dipy.tracking.benchmarks.bench_streamline.setup"><code class="xref py py-obj docutils literal"><span class="pre">setup</span></code></a>()</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.eudx">
<span id="module-tracking-eudx"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.eudx</span></code><a class="headerlink" href="#module-dipy.tracking.eudx" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.eudx.EuDX" title="dipy.tracking.eudx.EuDX"><code class="xref py py-obj docutils literal"><span class="pre">EuDX</span></code></a>(a,&nbsp;ind,&nbsp;seeds,&nbsp;odf_vertices[,&nbsp;a_low,&nbsp;...])</td>
<td>Euler Delta Crossings</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.eudx.eudx_both_directions" title="dipy.tracking.eudx.eudx_both_directions"><code class="xref py py-obj docutils literal"><span class="pre">eudx_both_directions</span></code></a></td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.eudx.get_sphere" title="dipy.tracking.eudx.get_sphere"><code class="xref py py-obj docutils literal"><span class="pre">get_sphere</span></code></a>([name])</td>
<td>provide triangulated spheres</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.learning">
<span id="module-tracking-learning"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.learning</span></code><a class="headerlink" href="#module-dipy.tracking.learning" title="Permalink to this headline">¶</a></h2>
<p>Learning algorithms for tractography</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.learning.detect_corresponding_tracks" title="dipy.tracking.learning.detect_corresponding_tracks"><code class="xref py py-obj docutils literal"><span class="pre">detect_corresponding_tracks</span></code></a>(indices,&nbsp;...)</td>
<td>Detect corresponding tracks from list tracks1 to list tracks2</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.learning.detect_corresponding_tracks_plus" title="dipy.tracking.learning.detect_corresponding_tracks_plus"><code class="xref py py-obj docutils literal"><span class="pre">detect_corresponding_tracks_plus</span></code></a>(indices,&nbsp;...)</td>
<td>Detect corresponding tracks from 1 to 2 where tracks1 &amp; tracks2 are</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.life">
<span id="module-tracking-life"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.life</span></code><a class="headerlink" href="#module-dipy.tracking.life" title="Permalink to this headline">¶</a></h2>
<p>This is an implementation of the Linear Fascicle Evaluation (LiFE) algorithm
described in:</p>
<p>Pestilli, F., Yeatman, J, Rokem, A. Kay, K. and Wandell B.A. (2014). Validation
and statistical inference in living connectomes. Nature Methods 11:
1058-1063. doi:10.1038/nmeth.3098</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.FiberFit" title="dipy.tracking.life.FiberFit"><code class="xref py py-obj docutils literal"><span class="pre">FiberFit</span></code></a>(fiber_model,&nbsp;life_matrix,&nbsp;...)</td>
<td>A fit of the LiFE model to diffusion data</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.FiberModel" title="dipy.tracking.life.FiberModel"><code class="xref py py-obj docutils literal"><span class="pre">FiberModel</span></code></a>(gtab)</td>
<td>A class for representing and solving predictive models based on tractography solutions.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker" title="dipy.tracking.life.LifeSignalMaker"><code class="xref py py-obj docutils literal"><span class="pre">LifeSignalMaker</span></code></a>(gtab[,&nbsp;evals,&nbsp;sphere])</td>
<td>A class for generating signals from streamlines in an efficient and speedy manner.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.ReconstFit" title="dipy.tracking.life.ReconstFit"><code class="xref py py-obj docutils literal"><span class="pre">ReconstFit</span></code></a>(model,&nbsp;data)</td>
<td>Abstract class which holds the fit result of ReconstModel</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.ReconstModel" title="dipy.tracking.life.ReconstModel"><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></a>(gtab)</td>
<td>Abstract class for signal reconstruction models</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.range" title="dipy.tracking.life.range"><code class="xref py py-obj docutils literal"><span class="pre">range</span></code></a>((stop)&nbsp;-&gt;&nbsp;range&nbsp;object)</td>
<td>range(start, stop[, step]) -&gt; range object</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.grad_tensor" title="dipy.tracking.life.grad_tensor"><code class="xref py py-obj docutils literal"><span class="pre">grad_tensor</span></code></a>(grad,&nbsp;evals)</td>
<td>Calculate the 3 by 3 tensor for a given spatial gradient, given a canonical</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.gradient" title="dipy.tracking.life.gradient"><code class="xref py py-obj docutils literal"><span class="pre">gradient</span></code></a>(f)</td>
<td>Return the gradient of an N-dimensional array.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.setup_test" title="dipy.tracking.life.setup_test"><code class="xref py py-obj docutils literal"><span class="pre">setup_test</span></code></a>()</td>
<td>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.streamline_gradients" title="dipy.tracking.life.streamline_gradients"><code class="xref py py-obj docutils literal"><span class="pre">streamline_gradients</span></code></a>(streamline)</td>
<td>Calculate the gradients of the streamline along the spatial dimension</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.streamline_signal" title="dipy.tracking.life.streamline_signal"><code class="xref py py-obj docutils literal"><span class="pre">streamline_signal</span></code></a>(streamline,&nbsp;gtab[,&nbsp;evals])</td>
<td>The signal from a single streamline estimate along each of its nodes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.streamline_tensors" title="dipy.tracking.life.streamline_tensors"><code class="xref py py-obj docutils literal"><span class="pre">streamline_tensors</span></code></a>(streamline[,&nbsp;evals])</td>
<td>The tensors generated by this fiber.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.transform_streamlines" title="dipy.tracking.life.transform_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">transform_streamlines</span></code></a>(streamlines,&nbsp;mat)</td>
<td>Apply affine transformation to streamlines</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.unique_rows" title="dipy.tracking.life.unique_rows"><code class="xref py py-obj docutils literal"><span class="pre">unique_rows</span></code></a>(in_array[,&nbsp;dtype])</td>
<td>This (quickly) finds the unique rows in an array</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.voxel2streamline" title="dipy.tracking.life.voxel2streamline"><code class="xref py py-obj docutils literal"><span class="pre">voxel2streamline</span></code></a>(streamline[,&nbsp;transformed,&nbsp;...])</td>
<td>Maps voxels to streamlines and streamlines to voxels, for setting up</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.local">
<span id="module-tracking-local"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.local</span></code><a class="headerlink" href="#module-dipy.tracking.local" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.ActTissueClassifier" title="dipy.tracking.local.ActTissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">ActTissueClassifier</span></code></a></td>
<td>Anatomically-Constrained Tractography (ACT) stopping criteria from [R480].</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.BinaryTissueClassifier" title="dipy.tracking.local.BinaryTissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">BinaryTissueClassifier</span></code></a></td>
<td>cdef:</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.CmcTissueClassifier" title="dipy.tracking.local.CmcTissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">CmcTissueClassifier</span></code></a></td>
<td>Continuous map criterion (CMC) stopping criteria from [R481].</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.ConstrainedTissueClassifier" title="dipy.tracking.local.ConstrainedTissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">ConstrainedTissueClassifier</span></code></a></td>
<td>Abstract class that takes as input included and excluded tissue maps.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.DirectionGetter" title="dipy.tracking.local.DirectionGetter"><code class="xref py py-obj docutils literal"><span class="pre">DirectionGetter</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.LocalTracking" title="dipy.tracking.local.LocalTracking"><code class="xref py py-obj docutils literal"><span class="pre">LocalTracking</span></code></a>(direction_getter,&nbsp;...[,&nbsp;...])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.ParticleFilteringTracking" title="dipy.tracking.local.ParticleFilteringTracking"><code class="xref py py-obj docutils literal"><span class="pre">ParticleFilteringTracking</span></code></a>(direction_getter,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.ThresholdTissueClassifier" title="dipy.tracking.local.ThresholdTissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">ThresholdTissueClassifier</span></code></a></td>
<td># Declarations from tissue_classifier.pxd bellow</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.TissueClassifier" title="dipy.tracking.local.TissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">TissueClassifier</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.local.localtracking">
<span id="module-tracking-local-localtracking"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.local.localtracking</span></code><a class="headerlink" href="#module-dipy.tracking.local.localtracking" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.Bunch" title="dipy.tracking.local.localtracking.Bunch"><code class="xref py py-obj docutils literal"><span class="pre">Bunch</span></code></a>(**kwds)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier" title="dipy.tracking.local.localtracking.ConstrainedTissueClassifier"><code class="xref py py-obj docutils literal"><span class="pre">ConstrainedTissueClassifier</span></code></a></td>
<td>Abstract class that takes as input included and excluded tissue maps.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.LocalTracking" title="dipy.tracking.local.localtracking.LocalTracking"><code class="xref py py-obj docutils literal"><span class="pre">LocalTracking</span></code></a>(direction_getter,&nbsp;...[,&nbsp;...])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.ParticleFilteringTracking" title="dipy.tracking.local.localtracking.ParticleFilteringTracking"><code class="xref py py-obj docutils literal"><span class="pre">ParticleFilteringTracking</span></code></a>(direction_getter,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.local_tracker" title="dipy.tracking.local.localtracking.local_tracker"><code class="xref py py-obj docutils literal"><span class="pre">local_tracker</span></code></a></td>
<td>Tracks one direction from a seed.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.pft_tracker" title="dipy.tracking.local.localtracking.pft_tracker"><code class="xref py py-obj docutils literal"><span class="pre">pft_tracker</span></code></a></td>
<td>Tracks one direction from a seed using the particle filtering algorithm.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.metrics">
<span id="module-tracking-metrics"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.metrics</span></code><a class="headerlink" href="#module-dipy.tracking.metrics" title="Permalink to this headline">¶</a></h2>
<p>Metrics for tracks, where tracks are arrays of points</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.xrange" title="dipy.tracking.metrics.xrange"><code class="xref py py-obj docutils literal"><span class="pre">xrange</span></code></a></td>
<td>alias of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">range</span></code></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.arbitrarypoint" title="dipy.tracking.metrics.arbitrarypoint"><code class="xref py py-obj docutils literal"><span class="pre">arbitrarypoint</span></code></a>(xyz,&nbsp;distance)</td>
<td>Select an arbitrary point along distance on the track (curve)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.bytes" title="dipy.tracking.metrics.bytes"><code class="xref py py-obj docutils literal"><span class="pre">bytes</span></code></a>(xyz)</td>
<td>Size of track in bytes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.center_of_mass" title="dipy.tracking.metrics.center_of_mass"><code class="xref py py-obj docutils literal"><span class="pre">center_of_mass</span></code></a>(xyz)</td>
<td>Center of mass of streamline</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.downsample" title="dipy.tracking.metrics.downsample"><code class="xref py py-obj docutils literal"><span class="pre">downsample</span></code></a>(xyz[,&nbsp;n_pols])</td>
<td>downsample for a specific number of points along the curve/track</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.endpoint" title="dipy.tracking.metrics.endpoint"><code class="xref py py-obj docutils literal"><span class="pre">endpoint</span></code></a>(xyz)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.frenet_serret" title="dipy.tracking.metrics.frenet_serret"><code class="xref py py-obj docutils literal"><span class="pre">frenet_serret</span></code></a>(xyz)</td>
<td>Frenet-Serret Space Curve Invariants</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.generate_combinations" title="dipy.tracking.metrics.generate_combinations"><code class="xref py py-obj docutils literal"><span class="pre">generate_combinations</span></code></a>(items,&nbsp;n)</td>
<td>Combine sets of size n from items</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.inside_sphere" title="dipy.tracking.metrics.inside_sphere"><code class="xref py py-obj docutils literal"><span class="pre">inside_sphere</span></code></a>(xyz,&nbsp;center,&nbsp;radius)</td>
<td>If any point of the track is inside a sphere of a specified center and radius return True otherwise False.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.inside_sphere_points" title="dipy.tracking.metrics.inside_sphere_points"><code class="xref py py-obj docutils literal"><span class="pre">inside_sphere_points</span></code></a>(xyz,&nbsp;center,&nbsp;radius)</td>
<td>If a track intersects with a sphere of a specified center and radius return the points that are inside the sphere otherwise False.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.intersect_sphere" title="dipy.tracking.metrics.intersect_sphere"><code class="xref py py-obj docutils literal"><span class="pre">intersect_sphere</span></code></a>(xyz,&nbsp;center,&nbsp;radius)</td>
<td>If any segment of the track is intersecting with a sphere of</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.length" title="dipy.tracking.metrics.length"><code class="xref py py-obj docutils literal"><span class="pre">length</span></code></a>(xyz[,&nbsp;along])</td>
<td>Euclidean length of track line</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.longest_track_bundle" title="dipy.tracking.metrics.longest_track_bundle"><code class="xref py py-obj docutils literal"><span class="pre">longest_track_bundle</span></code></a>(bundle[,&nbsp;sort])</td>
<td>Return longest track or length sorted track indices in <cite>bundle</cite></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.magn" title="dipy.tracking.metrics.magn"><code class="xref py py-obj docutils literal"><span class="pre">magn</span></code></a>(xyz[,&nbsp;n])</td>
<td>magnitude of vector</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.mean_curvature" title="dipy.tracking.metrics.mean_curvature"><code class="xref py py-obj docutils literal"><span class="pre">mean_curvature</span></code></a>(xyz)</td>
<td>Calculates the mean curvature of a curve</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.mean_orientation" title="dipy.tracking.metrics.mean_orientation"><code class="xref py py-obj docutils literal"><span class="pre">mean_orientation</span></code></a>(xyz)</td>
<td>Calculates the mean orientation of a curve</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.midpoint" title="dipy.tracking.metrics.midpoint"><code class="xref py py-obj docutils literal"><span class="pre">midpoint</span></code></a>(xyz)</td>
<td>Midpoint of track</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.midpoint2point" title="dipy.tracking.metrics.midpoint2point"><code class="xref py py-obj docutils literal"><span class="pre">midpoint2point</span></code></a>(xyz,&nbsp;p)</td>
<td>Calculate distance from midpoint of a curve to arbitrary point p</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.principal_components" title="dipy.tracking.metrics.principal_components"><code class="xref py py-obj docutils literal"><span class="pre">principal_components</span></code></a>(xyz)</td>
<td>We use PCA to calculate the 3 principal directions for a track</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.setup_test" title="dipy.tracking.metrics.setup_test"><code class="xref py py-obj docutils literal"><span class="pre">setup_test</span></code></a>()</td>
<td>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.splev" title="dipy.tracking.metrics.splev"><code class="xref py py-obj docutils literal"><span class="pre">splev</span></code></a>(x,&nbsp;tck[,&nbsp;der,&nbsp;ext])</td>
<td>Evaluate a B-spline or its derivatives.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.spline" title="dipy.tracking.metrics.spline"><code class="xref py py-obj docutils literal"><span class="pre">spline</span></code></a>(xyz[,&nbsp;s,&nbsp;k,&nbsp;nest])</td>
<td>Generate B-splines as documented in</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.splprep" title="dipy.tracking.metrics.splprep"><code class="xref py py-obj docutils literal"><span class="pre">splprep</span></code></a>(x[,&nbsp;w,&nbsp;u,&nbsp;ub,&nbsp;ue,&nbsp;k,&nbsp;task,&nbsp;s,&nbsp;t,&nbsp;...])</td>
<td>Find the B-spline representation of an N-dimensional curve.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.metrics.startpoint" title="dipy.tracking.metrics.startpoint"><code class="xref py py-obj docutils literal"><span class="pre">startpoint</span></code></a>(xyz)</td>
<td>First point of the track</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.metrics.winding" title="dipy.tracking.metrics.winding"><code class="xref py py-obj docutils literal"><span class="pre">winding</span></code></a>(xyz)</td>
<td>Total turning angle projected.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.streamline">
<span id="module-tracking-streamline"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.streamline</span></code><a class="headerlink" href="#module-dipy.tracking.streamline" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-obj docutils literal"><span class="pre">ArraySequence</span></code></a>([iterable,&nbsp;buffer_size])</td>
<td>Sequence of ndarrays having variable first dimension sizes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.LooseVersion" title="dipy.tracking.streamline.LooseVersion"><code class="xref py py-obj docutils literal"><span class="pre">LooseVersion</span></code></a>([vstring])</td>
<td>Version numbering for anarchists and software realists.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.Streamlines" title="dipy.tracking.streamline.Streamlines"><code class="xref py py-obj docutils literal"><span class="pre">Streamlines</span></code></a>(*args,&nbsp;**kwargs)</td>
<td><p class="rubric">Attributes</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.apply_affine" title="dipy.tracking.streamline.apply_affine"><code class="xref py py-obj docutils literal"><span class="pre">apply_affine</span></code></a>(aff,&nbsp;pts)</td>
<td>Apply affine matrix <cite>aff</cite> to points <cite>pts</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.cdist" title="dipy.tracking.streamline.cdist"><code class="xref py py-obj docutils literal"><span class="pre">cdist</span></code></a>(XA,&nbsp;XB[,&nbsp;metric,&nbsp;p,&nbsp;V,&nbsp;VI,&nbsp;w])</td>
<td>Computes distance between each pair of the two collections of inputs.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.center_streamlines" title="dipy.tracking.streamline.center_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">center_streamlines</span></code></a>(streamlines)</td>
<td>Move streamlines to the origin</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.compress_streamlines" title="dipy.tracking.streamline.compress_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">compress_streamlines</span></code></a></td>
<td>Compress streamlines by linearization as in <a class="reference internal" href="#id58" id="id4">[Presseau15]</a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.deepcopy" title="dipy.tracking.streamline.deepcopy"><code class="xref py py-obj docutils literal"><span class="pre">deepcopy</span></code></a>(x[,&nbsp;memo,&nbsp;_nil])</td>
<td>Deep copy operation on arbitrary Python objects.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.deform_streamlines" title="dipy.tracking.streamline.deform_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">deform_streamlines</span></code></a>(streamlines,&nbsp;...)</td>
<td>Apply deformation field to streamlines</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.dist_to_corner" title="dipy.tracking.streamline.dist_to_corner"><code class="xref py py-obj docutils literal"><span class="pre">dist_to_corner</span></code></a>(affine)</td>
<td>Calculate the maximal distance from the center to a corner of a voxel,</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.length" title="dipy.tracking.streamline.length"><code class="xref py py-obj docutils literal"><span class="pre">length</span></code></a></td>
<td>Euclidean length of streamlines</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.mul" title="dipy.tracking.streamline.mul"><code class="xref py py-obj docutils literal"><span class="pre">mul</span></code></a></td>
<td>mul(a, b) &#8211; Same as a * b.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.nbytes" title="dipy.tracking.streamline.nbytes"><code class="xref py py-obj docutils literal"><span class="pre">nbytes</span></code></a>(streamlines)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.orient_by_rois" title="dipy.tracking.streamline.orient_by_rois"><code class="xref py py-obj docutils literal"><span class="pre">orient_by_rois</span></code></a>(streamlines,&nbsp;roi1,&nbsp;roi2[,&nbsp;...])</td>
<td>Orient a set of streamlines according to a pair of ROIs</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.reduce" title="dipy.tracking.streamline.reduce"><code class="xref py py-obj docutils literal"><span class="pre">reduce</span></code></a>((function,&nbsp;sequence[,&nbsp;initial])&nbsp;-&gt;&nbsp;value)</td>
<td>Apply a function of two arguments cumulatively to the items of a sequence, from left to right, so as to reduce the sequence to a single value.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.relist_streamlines" title="dipy.tracking.streamline.relist_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">relist_streamlines</span></code></a>(points,&nbsp;offsets)</td>
<td>Given a representation of a set of streamlines as a large array and an offsets array return the streamlines as a list of shorter arrays.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.select_by_rois" title="dipy.tracking.streamline.select_by_rois"><code class="xref py py-obj docutils literal"><span class="pre">select_by_rois</span></code></a>(streamlines,&nbsp;rois,&nbsp;include[,&nbsp;...])</td>
<td>Select streamlines based on logical relations with several regions of interest (ROIs).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.select_random_set_of_streamlines" title="dipy.tracking.streamline.select_random_set_of_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">select_random_set_of_streamlines</span></code></a>(...)</td>
<td>Select a random set of streamlines</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.set_number_of_points" title="dipy.tracking.streamline.set_number_of_points"><code class="xref py py-obj docutils literal"><span class="pre">set_number_of_points</span></code></a></td>
<td>Change the number of points of streamlines</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.setup_test" title="dipy.tracking.streamline.setup_test"><code class="xref py py-obj docutils literal"><span class="pre">setup_test</span></code></a>()</td>
<td>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.streamline_near_roi" title="dipy.tracking.streamline.streamline_near_roi"><code class="xref py py-obj docutils literal"><span class="pre">streamline_near_roi</span></code></a>(streamline,&nbsp;roi_coords,&nbsp;tol)</td>
<td>Is a streamline near an ROI.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.transform_streamlines" title="dipy.tracking.streamline.transform_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">transform_streamlines</span></code></a>(streamlines,&nbsp;mat)</td>
<td>Apply affine transformation to streamlines</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.unlist_streamlines" title="dipy.tracking.streamline.unlist_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">unlist_streamlines</span></code></a>(streamlines)</td>
<td>Return the streamlines not as a list but as an array and an offset</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.values_from_volume" title="dipy.tracking.streamline.values_from_volume"><code class="xref py py-obj docutils literal"><span class="pre">values_from_volume</span></code></a>(data,&nbsp;streamlines[,&nbsp;affine])</td>
<td>Extract values of a scalar/vector along each streamline from a volume.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.warn" title="dipy.tracking.streamline.warn"><code class="xref py py-obj docutils literal"><span class="pre">warn</span></code></a></td>
<td>Issue a warning, or maybe ignore it or raise an exception.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.tracking.utils">
<span id="id5"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">tracking.utils</span></code><a class="headerlink" href="#module-dipy.tracking.utils" title="Permalink to this headline">¶</a></h2>
<p>Various tools related to creating and working with streamlines</p>
<p>This module provides tools for targeting streamlines using ROIs, for making
connectivity matrices from whole brain fiber tracking and some other tools that
allow streamlines to interact with image data.</p>
<div class="section" id="important-note">
<h3>Important Note:<a class="headerlink" href="#important-note" title="Permalink to this headline">¶</a></h3>
<p>Dipy uses affine matrices to represent the relationship between streamline
points, which are defined as points in a continuous 3d space, and image voxels,
which are typically arranged in a discrete 3d grid. Dipy uses a convention
similar to nifti files to interpret these affine matrices. This convention is
that the point at the center of voxel <code class="docutils literal"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> is represented by the point
<code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where <code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">=</span> <span class="pre">affine</span> <span class="pre">*</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k,</span> <span class="pre">1]</span></code>.  Also when the
phrase &#8220;voxel coordinates&#8221; is used, it is understood to be the same as <code class="docutils literal"><span class="pre">affine</span>
<span class="pre">=</span> <span class="pre">eye(4)</span></code>.</p>
<p>As an example, lets take a 2d image where the affine is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
 <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
 <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
</pre></div>
</div>
<p>The pixels of an image with this affine would look something like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">------------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">C</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">----</span><span class="n">B</span><span class="o">--------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">-------------</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>
<span class="o">------------</span><span class="n">D</span>
</pre></div>
</div>
<p>And the letters A-D represent the following points in
&#8220;real world coordinates&#8221;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="o">-.</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">]</span>
<span class="n">C</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]</span>
<span class="n">D</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">2.5</span><span class="p">,</span>  <span class="mf">5.</span><span class="p">]</span>
</pre></div>
</div>
</div>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.defaultdict" title="dipy.tracking.utils.defaultdict"><code class="xref py py-obj docutils literal"><span class="pre">defaultdict</span></code></a></td>
<td>defaultdict(default_factory[, ...]) &#8211;&gt; dict with default factory</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.map" title="dipy.tracking.utils.map"><code class="xref py py-obj docutils literal"><span class="pre">map</span></code></a></td>
<td>map(func, <a href="#id6"><span class="problematic" id="id7">*</span></a>iterables) &#8211;&gt; map object</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.xrange" title="dipy.tracking.utils.xrange"><code class="xref py py-obj docutils literal"><span class="pre">xrange</span></code></a></td>
<td>alias of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">range</span></code></a></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.affine_for_trackvis" title="dipy.tracking.utils.affine_for_trackvis"><code class="xref py py-obj docutils literal"><span class="pre">affine_for_trackvis</span></code></a>(voxel_size[,&nbsp;...])</td>
<td>Returns an affine which maps points for voxel indices to trackvis space.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.affine_from_fsl_mat_file" title="dipy.tracking.utils.affine_from_fsl_mat_file"><code class="xref py py-obj docutils literal"><span class="pre">affine_from_fsl_mat_file</span></code></a>(mat_affine,&nbsp;...)</td>
<td>Converts an affine matrix from flirt (FSLdot) and a given voxel size for input and output images and returns an adjusted affine matrix for trackvis.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.apply_affine" title="dipy.tracking.utils.apply_affine"><code class="xref py py-obj docutils literal"><span class="pre">apply_affine</span></code></a>(aff,&nbsp;pts)</td>
<td>Apply affine matrix <cite>aff</cite> to points <cite>pts</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.asarray" title="dipy.tracking.utils.asarray"><code class="xref py py-obj docutils literal"><span class="pre">asarray</span></code></a>(a[,&nbsp;dtype,&nbsp;order])</td>
<td>Convert the input to an array.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.cdist" title="dipy.tracking.utils.cdist"><code class="xref py py-obj docutils literal"><span class="pre">cdist</span></code></a>(XA,&nbsp;XB[,&nbsp;metric,&nbsp;p,&nbsp;V,&nbsp;VI,&nbsp;w])</td>
<td>Computes distance between each pair of the two collections of inputs.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.connectivity_matrix" title="dipy.tracking.utils.connectivity_matrix"><code class="xref py py-obj docutils literal"><span class="pre">connectivity_matrix</span></code></a>(streamlines,&nbsp;label_volume)</td>
<td>Counts the streamlines that start and end at each label pair.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal"><span class="pre">density_map</span></code></a>(streamlines,&nbsp;vol_dims[,&nbsp;...])</td>
<td>Counts the number of unique streamlines that pass through each voxel.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.dist_to_corner" title="dipy.tracking.utils.dist_to_corner"><code class="xref py py-obj docutils literal"><span class="pre">dist_to_corner</span></code></a>(affine)</td>
<td>Calculate the maximal distance from the center to a corner of a voxel,</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.dot" title="dipy.tracking.utils.dot"><code class="xref py py-obj docutils literal"><span class="pre">dot</span></code></a>(a,&nbsp;b[,&nbsp;out])</td>
<td>Dot product of two arrays.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.empty" title="dipy.tracking.utils.empty"><code class="xref py py-obj docutils literal"><span class="pre">empty</span></code></a>(shape[,&nbsp;dtype,&nbsp;order])</td>
<td>Return a new array of given shape and type, without initializing entries.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.eye" title="dipy.tracking.utils.eye"><code class="xref py py-obj docutils literal"><span class="pre">eye</span></code></a>(N[,&nbsp;M,&nbsp;k,&nbsp;dtype])</td>
<td>Return a 2-D array with ones on the diagonal and zeros elsewhere.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.flexi_tvis_affine" title="dipy.tracking.utils.flexi_tvis_affine"><code class="xref py py-obj docutils literal"><span class="pre">flexi_tvis_affine</span></code></a>(sl_vox_order,&nbsp;grid_affine,&nbsp;...)</td>
<td>Computes the mapping from voxel indices to streamline points,</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.get_flexi_tvis_affine" title="dipy.tracking.utils.get_flexi_tvis_affine"><code class="xref py py-obj docutils literal"><span class="pre">get_flexi_tvis_affine</span></code></a>(tvis_hdr,&nbsp;nii_aff)</td>
<td>Computes the mapping from voxel indices to streamline points,</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.length" title="dipy.tracking.utils.length"><code class="xref py py-obj docutils literal"><span class="pre">length</span></code></a>(streamlines[,&nbsp;affine])</td>
<td>Calculate the lengths of many streamlines in a bundle.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.minimum_at" title="dipy.tracking.utils.minimum_at"><code class="xref py py-obj docutils literal"><span class="pre">minimum_at</span></code></a>(a,&nbsp;indices[,&nbsp;b])</td>
<td>Performs unbuffered in place operation on operand &#8216;a&#8217; for elements specified by &#8216;indices&#8217;.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.move_streamlines" title="dipy.tracking.utils.move_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">move_streamlines</span></code></a>(streamlines,&nbsp;output_space)</td>
<td>Applies a linear transformation, given by affine, to streamlines.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.ndbincount" title="dipy.tracking.utils.ndbincount"><code class="xref py py-obj docutils literal"><span class="pre">ndbincount</span></code></a>(x[,&nbsp;weights,&nbsp;shape])</td>
<td>Like bincount, but for nd-indicies.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-obj docutils literal"><span class="pre">near_roi</span></code></a>(streamlines,&nbsp;region_of_interest[,&nbsp;...])</td>
<td>Provide filtering criteria for a set of streamlines based on whether</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.orientation_from_string" title="dipy.tracking.utils.orientation_from_string"><code class="xref py py-obj docutils literal"><span class="pre">orientation_from_string</span></code></a>(string_ornt)</td>
<td>Returns an array representation of an ornt string</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.ornt_mapping" title="dipy.tracking.utils.ornt_mapping"><code class="xref py py-obj docutils literal"><span class="pre">ornt_mapping</span></code></a>(ornt1,&nbsp;ornt2)</td>
<td>Calculates the mapping needing to get from orn1 to orn2</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.path_length" title="dipy.tracking.utils.path_length"><code class="xref py py-obj docutils literal"><span class="pre">path_length</span></code></a>(streamlines,&nbsp;aoi,&nbsp;affine[,&nbsp;...])</td>
<td>Computes the shortest path, along any streamline, between aoi and each voxel.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.random_seeds_from_mask" title="dipy.tracking.utils.random_seeds_from_mask"><code class="xref py py-obj docutils literal"><span class="pre">random_seeds_from_mask</span></code></a>(mask[,&nbsp;seeds_count,&nbsp;...])</td>
<td>Creates randomly placed seeds for fiber tracking from a binary mask.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.ravel_multi_index" title="dipy.tracking.utils.ravel_multi_index"><code class="xref py py-obj docutils literal"><span class="pre">ravel_multi_index</span></code></a>(multi_index,&nbsp;dims[,&nbsp;mode,&nbsp;...])</td>
<td>Converts a tuple of index arrays into an array of flat indices, applying boundary modes to the multi-index.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.reduce_labels" title="dipy.tracking.utils.reduce_labels"><code class="xref py py-obj docutils literal"><span class="pre">reduce_labels</span></code></a>(label_volume)</td>
<td>Reduces an array of labels to the integers from 0 to n with smallest possible n.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.reduce_rois" title="dipy.tracking.utils.reduce_rois"><code class="xref py py-obj docutils literal"><span class="pre">reduce_rois</span></code></a>(rois,&nbsp;include)</td>
<td>Reduce multiple ROIs to one inclusion and one exclusion ROI</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.reorder_voxels_affine" title="dipy.tracking.utils.reorder_voxels_affine"><code class="xref py py-obj docutils literal"><span class="pre">reorder_voxels_affine</span></code></a>(input_ornt,&nbsp;...)</td>
<td>Calculates a linear transformation equivalent to changing voxel order.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.seeds_from_mask" title="dipy.tracking.utils.seeds_from_mask"><code class="xref py py-obj docutils literal"><span class="pre">seeds_from_mask</span></code></a>(mask[,&nbsp;density,&nbsp;voxel_size,&nbsp;...])</td>
<td>Creates seeds for fiber tracking from a binary mask.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.setup_test" title="dipy.tracking.utils.setup_test"><code class="xref py py-obj docutils literal"><span class="pre">setup_test</span></code></a>()</td>
<td>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.streamline_near_roi" title="dipy.tracking.utils.streamline_near_roi"><code class="xref py py-obj docutils literal"><span class="pre">streamline_near_roi</span></code></a>(streamline,&nbsp;roi_coords,&nbsp;tol)</td>
<td>Is a streamline near an ROI.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.subsegment" title="dipy.tracking.utils.subsegment"><code class="xref py py-obj docutils literal"><span class="pre">subsegment</span></code></a>(streamlines,&nbsp;max_segment_length)</td>
<td>Splits the segments of the streamlines into small segments.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.target" title="dipy.tracking.utils.target"><code class="xref py py-obj docutils literal"><span class="pre">target</span></code></a>(streamlines,&nbsp;target_mask,&nbsp;affine[,&nbsp;...])</td>
<td>Filters streamlines based on whether or not they pass through an ROI.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.target_line_based" title="dipy.tracking.utils.target_line_based"><code class="xref py py-obj docutils literal"><span class="pre">target_line_based</span></code></a>(streamlines,&nbsp;target_mask)</td>
<td>Filters streamlines based on whether or not they pass through a ROI, using a line-based algorithm.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.unique_rows" title="dipy.tracking.utils.unique_rows"><code class="xref py py-obj docutils literal"><span class="pre">unique_rows</span></code></a>(in_array[,&nbsp;dtype])</td>
<td>This (quickly) finds the unique rows in an array</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.utils.warn" title="dipy.tracking.utils.warn"><code class="xref py py-obj docutils literal"><span class="pre">warn</span></code></a></td>
<td>Issue a warning, or maybe ignore it or raise an exception.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.wraps" title="dipy.tracking.utils.wraps"><code class="xref py py-obj docutils literal"><span class="pre">wraps</span></code></a>(wrapped[,&nbsp;assigned,&nbsp;updated])</td>
<td>Decorator factory to apply update_wrapper() to a wrapper function</td>
</tr>
</tbody>
</table>
<div class="section" id="streamlines">
<h3><a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">Streamlines</span></code></a><a class="headerlink" href="#streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.tracking.Streamlines">
<code class="descclassname">dipy.tracking.</code><code class="descname">Streamlines</code><a class="headerlink" href="#dipy.tracking.Streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></p>
</dd></dl>

</div>
<div class="section" id="bench">
<h3>bench<a class="headerlink" href="#bench" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.bench">
<code class="descclassname">dipy.tracking.</code><code class="descname">bench</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.bench" title="Permalink to this definition">¶</a></dt>
<dd><p>Run benchmarks for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the benchmarks to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow benchmarks as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for benchmark outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>success</strong> : bool</p>
<blockquote class="last">
<div><p>Returns True if running the benchmarks works, False if an error
occurred.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Benchmarks are like tests, but have names starting with &#8220;bench&#8221; instead
of &#8220;test&#8221;, and can be found under the &#8220;benchmarks&#8221; sub-directory of the
module.</p>
<p>Each NumPy module exposes <cite>bench</cite> in its namespace to run all benchmarks
for it.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span> 
<span class="go">Running benchmarks for numpy.lib</span>
<span class="gp">...</span>
<span class="go">using 562341 items:</span>
<span class="go">unique:</span>
<span class="go">0.11</span>
<span class="go">unique1d:</span>
<span class="go">0.11</span>
<span class="go">ratio: 1.0</span>
<span class="go">nUnique: 56230 == 56230</span>
<span class="gp">...</span>
<span class="go">OK</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> 
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="test">
<h3>test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.test">
<code class="descclassname">dipy.tracking.</code><code class="descname">test</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em>, <em>doctests=False</em>, <em>coverage=False</em>, <em>raise_warnings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run tests for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the tests to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow tests as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for test outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
<p><strong>doctests</strong> : bool, optional</p>
<blockquote>
<div><p>If True, run doctests in module. Default is False.</p>
</div></blockquote>
<p><strong>coverage</strong> : bool, optional</p>
<blockquote>
<div><p>If True, report coverage of NumPy code. Default is False.
(This requires the <a href="#id8"><span class="problematic" id="id9">`</span></a>coverage module:</p>
<blockquote>
<div><p>&lt;<a class="reference external" href="http://nedbatchelder.com/code/modules/coverage.html">http://nedbatchelder.com/code/modules/coverage.html</a>&gt;`_).</p>
</div></blockquote>
</div></blockquote>
<p><strong>raise_warnings</strong> : None, str or sequence of warnings, optional</p>
<blockquote>
<div><p>This specifies which warnings to configure as &#8216;raise&#8217; instead
of being shown once during the test execution.  Valid strings are:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;develop&#8221; : equals <code class="docutils literal"><span class="pre">(Warning,)</span></code></li>
<li>&#8220;release&#8221; : equals <code class="docutils literal"><span class="pre">()</span></code>, don&#8217;t raise on any warnings.</li>
</ul>
</div></blockquote>
<p>The default is to use the class initialization value.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> : object</p>
<blockquote class="last">
<div><p>Returns the result of running the tests as a
<code class="docutils literal"><span class="pre">nose.result.TextTestResult</span></code> object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each NumPy module exposes <cite>test</cite> in its namespace to run all tests for it.
For example, to run all tests for numpy.lib:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
<span class="go">Running unit tests for numpy.lib</span>
<span class="gp">...</span>
<span class="go">Ran 976 tests in 3.933s</span>
</pre></div>
</div>
<p>OK</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">errors</span> 
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">knownfail</span> 
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="warn">
<h3>warn<a class="headerlink" href="#warn" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking._utils.warn">
<code class="descclassname">dipy.tracking._utils.</code><code class="descname">warn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking._utils.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning, or maybe ignore it or raise an exception.</p>
</dd></dl>

</div>
<div class="section" id="id10">
<h3><a class="reference internal" href="#dipy.tracking.benchmarks.bench_streamline.Streamlines" title="dipy.tracking.benchmarks.bench_streamline.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">Streamlines</span></code></a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.tracking.benchmarks.bench_streamline.Streamlines">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">Streamlines</code><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.Streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></p>
</dd></dl>

</div>
<div class="section" id="assert-array-almost-equal">
<h3>assert_array_almost_equal<a class="headerlink" href="#assert-array-almost-equal" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.assert_array_almost_equal">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">assert_array_almost_equal</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>decimal=6</em>, <em>err_msg=''</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.assert_array_almost_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises an AssertionError if two objects are not equal up to desired
precision.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to use one of <cite>assert_allclose</cite>,
<cite>assert_array_almost_equal_nulp</cite> or <cite>assert_array_max_ulp</cite>
instead of this function for more consistent floating point
comparisons.</p>
</div>
<p>The test verifies identical shapes and that the elements of <code class="docutils literal"><span class="pre">actual</span></code> and
<code class="docutils literal"><span class="pre">desired</span></code> satisfy.</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">abs(desired-actual)</span> <span class="pre">&lt;</span> <span class="pre">1.5</span> <span class="pre">*</span> <span class="pre">10**(-decimal)</span></code></div></blockquote>
<p>That is a looser test than originally documented, but agrees with what the
actual implementation did up to rounding vagaries. An exception is raised
at shape mismatch or conflicting values. In contrast to the standard usage
in numpy, NaNs are compared like numbers, no assertion is raised if both
objects have NaNs in the same positions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>The actual object to check.</p>
</div></blockquote>
<p><strong>y</strong> : array_like</p>
<blockquote>
<div><p>The desired, expected object.</p>
</div></blockquote>
<p><strong>decimal</strong> : int, optional</p>
<blockquote>
<div><p>Desired precision, default is 6.</p>
</div></blockquote>
<p><strong>err_msg</strong> : str, optional</p>
<blockquote>
<div><p>The error message to be printed in case of failure.</p>
</div></blockquote>
<p><strong>verbose</strong> : bool, optional</p>
<blockquote>
<div><p>If True, the conflicting values are appended to the error message.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>AssertionError</strong></p>
<blockquote class="last">
<div><p>If actual and desired are not equal up to specified precision.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">assert_allclose</span></code></dt>
<dd>Compare two array_like objects for equality with desired relative and/or absolute precision.</dd>
</dl>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">assert_array_almost_equal_nulp</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">assert_array_max_ulp</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">assert_equal</span></code></p>
</div>
<p class="rubric">Examples</p>
<p>the first assert does not raise an exception</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_almost_equal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.333</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="go">                                         [1.0,2.333,np.nan])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_almost_equal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.33333</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.33339</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&lt;type &#39;exceptions.AssertionError&#39;&gt;:</span>
<span class="go">AssertionError:</span>
<span class="go">Arrays are not almost equal</span>

<span class="go">(mismatch 50.0%)</span>
<span class="go"> x: array([ 1.     ,  2.33333,      NaN])</span>
<span class="go"> y: array([ 1.     ,  2.33339,      NaN])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_almost_equal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.33333</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.33333</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">decimal</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&lt;type &#39;exceptions.ValueError&#39;&gt;:</span>
<span class="go">ValueError:</span>
<span class="go">Arrays are not almost equal</span>
<span class="go"> x: array([ 1.     ,  2.33333,      NaN])</span>
<span class="go"> y: array([ 1.     ,  2.33333,  5.     ])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="assert-array-equal">
<h3>assert_array_equal<a class="headerlink" href="#assert-array-equal" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.assert_array_equal">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">assert_array_equal</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>err_msg=''</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.assert_array_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises an AssertionError if two array_like objects are not equal.</p>
<p>Given two array_like objects, check that the shape is equal and all
elements of these objects are equal. An exception is raised at
shape mismatch or conflicting values. In contrast to the standard usage
in numpy, NaNs are compared like numbers, no assertion is raised if
both objects have NaNs in the same positions.</p>
<p>The usual caution for verifying equality with floating point numbers is
advised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>The actual object to check.</p>
</div></blockquote>
<p><strong>y</strong> : array_like</p>
<blockquote>
<div><p>The desired, expected object.</p>
</div></blockquote>
<p><strong>err_msg</strong> : str, optional</p>
<blockquote>
<div><p>The error message to be printed in case of failure.</p>
</div></blockquote>
<p><strong>verbose</strong> : bool, optional</p>
<blockquote>
<div><p>If True, the conflicting values are appended to the error message.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>AssertionError</strong></p>
<blockquote class="last">
<div><p>If actual and desired objects are not equal.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">assert_allclose</span></code></dt>
<dd>Compare two array_like objects for equality with desired relative and/or absolute precision.</dd>
</dl>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">assert_array_almost_equal_nulp</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">assert_array_max_ulp</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">assert_equal</span></code></p>
</div>
<p class="rubric">Examples</p>
<p>The first assert does not raise an exception:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_equal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.33333</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">... </span>                              <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="mf">2.33333</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
</pre></div>
</div>
<p>Assert fails with numerical inprecision with floats:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_equal</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">... </span>                              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">...</span>
<span class="go">&lt;type &#39;exceptions.ValueError&#39;&gt;:</span>
<span class="go">AssertionError:</span>
<span class="go">Arrays are not equal</span>

<span class="go">(mismatch 50.0%)</span>
<span class="go"> x: array([ 1.        ,  3.14159265,         NaN])</span>
<span class="go"> y: array([ 1.        ,  3.14159265,         NaN])</span>
</pre></div>
</div>
<p>Use <cite>assert_allclose</cite> or one of the nulp (number of floating point values)
functions for these cases instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_allclose</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="bench-compress-streamlines">
<h3>bench_compress_streamlines<a class="headerlink" href="#bench-compress-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">bench_compress_streamlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.bench_compress_streamlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="bench-length">
<h3>bench_length<a class="headerlink" href="#bench-length" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.bench_length">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">bench_length</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.bench_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="bench-set-number-of-points">
<h3>bench_set_number_of_points<a class="headerlink" href="#bench-set-number-of-points" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">bench_set_number_of_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.bench_set_number_of_points" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="compress-streamlines">
<h3>compress_streamlines<a class="headerlink" href="#compress-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.compress_streamlines">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">compress_streamlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.compress_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress streamlines by linearization as in <a class="reference internal" href="#id58" id="id11">[Presseau15]</a>.</p>
<p>The compression consists in merging consecutive segments that are
nearly collinear. The merging is achieved by removing the point the two
segments have in common.</p>
<p>The linearization process <a class="reference internal" href="#id58" id="id12">[Presseau15]</a> ensures that every point being
removed are within a certain margin (in mm) of the resulting streamline.
Recommendations for setting this margin can be found in <a class="reference internal" href="#id58" id="id13">[Presseau15]</a>
(in which they called it tolerance error).</p>
<p>The compression also ensures that two consecutive points won&#8217;t be too far
from each other (precisely less or equal than <a href="#id14"><span class="problematic" id="id15">`</span></a>max_segment_length`mm).
This is a tradeoff to speed up the linearization process <a class="reference internal" href="#id59" id="id16">[Rheault15]</a>. A low
value will result in a faster linearization but low compression, whereas
a high value will result in a slower linearization but high compression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : one or a list of array-like of shape (N,3)</p>
<blockquote>
<div><p>Array representing x,y,z of N points in a streamline.</p>
</div></blockquote>
<p><strong>tol_error</strong> : float (optional)</p>
<blockquote>
<div><p>Tolerance error in mm (default: 0.01). A rule of thumb is to set it
to 0.01mm for deterministic streamlines and 0.1mm for probabilitic
streamlines.</p>
</div></blockquote>
<p><strong>max_segment_length</strong> : float (optional)</p>
<blockquote>
<div><p>Maximum length in mm of any given segment produced by the compression.
The default is 10mm. (In <a class="reference internal" href="#id58" id="id17">[Presseau15]</a>, they used a value of <cite>np.inf</cite>).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>compressed_streamlines</strong> : one or a list of array-like</p>
<blockquote class="last">
<div><p>Results of the linearization process.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Be aware that compressed streamlines have variable step sizes. One needs to
be careful when computing streamlines-based metrics <a class="reference internal" href="#id60" id="id18">[Houde15]</a>.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="presseau15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Presseau15]</td><td>Presseau C. et al., A new compression format for fiber
tracking datasets, NeuroImage, no 109, 73-83, 2015.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rheault15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rheault15]</td><td>Rheault F. et al., Real Time Interaction with Millions of
Streamlines, ISMRM, 2015.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="houde15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Houde15]</td><td>Houde J.-C. et al. How to Avoid Biased Streamlines-Based
Metrics for Streamlines with Variable Step Sizes, ISMRM, 2015.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="k">import</span> <span class="n">compress_streamlines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># One streamline: a wiggling line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">+=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_streamline</span> <span class="o">=</span> <span class="n">compress_streamlines</span><span class="p">(</span><span class="n">streamline</span><span class="p">,</span> <span class="n">tol_error</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">streamline</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">c_streamline</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Multiple streamlines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_streamlines</span> <span class="o">=</span> <span class="n">compress_streamlines</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">tol_error</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streamlines</span><span class="p">]</span>
<span class="go">[100, 50]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">c_streamlines</span><span class="p">]</span>
<span class="go">[10, 7]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="compress-streamlines-python">
<h3>compress_streamlines_python<a class="headerlink" href="#compress-streamlines-python" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.compress_streamlines_python">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">compress_streamlines_python</code><span class="sig-paren">(</span><em>streamline</em>, <em>tol_error=0.01</em>, <em>max_segment_length=10</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.compress_streamlines_python" title="Permalink to this definition">¶</a></dt>
<dd><p>Python version of the FiberCompression found on
<a class="reference external" href="https://github.com/scilus/FiberCompression">https://github.com/scilus/FiberCompression</a>.</p>
</dd></dl>

</div>
<div class="section" id="generate-streamlines">
<h3>generate_streamlines<a class="headerlink" href="#generate-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.generate_streamlines">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">generate_streamlines</code><span class="sig-paren">(</span><em>nb_streamlines</em>, <em>min_nb_points</em>, <em>max_nb_points</em>, <em>rng</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.generate_streamlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-data">
<h3>get_data<a class="headerlink" href="#get-data" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.get_data">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">get_data</code><span class="sig-paren">(</span><em>name='small_64D'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>provides filenames of some test datasets or other useful parametrisations</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : str</p>
<blockquote>
<div><p>the filename/s of which dataset to return, one of:
&#8216;small_64D&#8217; small region of interest nifti,bvecs,bvals 64 directions
&#8216;small_101D&#8217; small region of interest nifti,bvecs,bvals 101 directions
&#8216;aniso_vox&#8217; volume with anisotropic voxel size as Nifti
&#8216;fornix&#8217; 300 tracks in Trackvis format (from Pittsburgh</p>
<blockquote>
<div><p>Brain Competition)</p>
</div></blockquote>
<dl class="docutils">
<dt>&#8216;gqi_vectors&#8217; the scanner wave vectors needed for a GQI acquisitions</dt>
<dd><p class="first last">of 101 directions tested on Siemens 3T Trio</p>
</dd>
</dl>
<p>&#8216;small_25&#8217; small ROI (10x8x2) DTI data (b value 2000, 25 directions)
&#8216;test_piesno&#8217; slice of N=8, K=14 diffusion data
&#8216;reg_c&#8217; small 2D image used for validating registration
&#8216;reg_o&#8217; small 2D image used for validation registration
&#8216;cb_2&#8217; two vectorized cingulum bundles</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>fnames</strong> : tuple</p>
<blockquote class="last">
<div><p>filenames for dataset</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="k">import</span> <span class="n">get_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fimg</span><span class="p">,</span><span class="n">fbvals</span><span class="p">,</span><span class="n">fbvecs</span><span class="o">=</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;small_101D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvals</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">fbvecs</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="k">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">=</span><span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fimg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">102</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvals</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">102</span><span class="p">,)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bvecs</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="length">
<h3>length<a class="headerlink" href="#length" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.length">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">length</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Euclidean length of streamlines</p>
<p>Length is in mm only if streamlines are expressed in world coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : ndarray or a list or <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a></p>
<blockquote>
<div><p>If ndarray, must have shape (N,3) where N is the number of points
of the streamline.
If list, each item must be ndarray shape (Ni,3) where Ni is the number
of points of streamline i.
If <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a>, its <cite>common_shape</cite> must be 3.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>lengths</strong> : scalar or ndarray shape (N,)</p>
<blockquote class="last">
<div><p>If there is only one streamline, a scalar representing the length of the
streamline.
If there are several streamlines, ndarray containing the length of every
streamline.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="k">import</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">streamline</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_length</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">expected_length</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">expected_length</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">length</span><span class="p">(</span><span class="n">streamlines</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">length</span><span class="p">(</span><span class="n">streamlines</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">lengths</span><span class="p">,</span> <span class="n">expected_lengths</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([])</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]))</span>
<span class="go">0.0</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="length-python">
<h3>length_python<a class="headerlink" href="#length-python" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.length_python">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">length_python</code><span class="sig-paren">(</span><em>xyz</em>, <em>along=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.length_python" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="measure">
<h3>measure<a class="headerlink" href="#measure" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.measure">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">measure</code><span class="sig-paren">(</span><em>code_str</em>, <em>times=1</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return elapsed time for executing code in the namespace of the caller.</p>
<p>The supplied code string is compiled with the Python builtin <code class="docutils literal"><span class="pre">compile</span></code>.
The precision of the timing is 10 milli-seconds. If the code will execute
fast on this timescale, it can be executed many times to get reasonable
timing accuracy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>code_str</strong> : str</p>
<blockquote>
<div><p>The code to be timed.</p>
</div></blockquote>
<p><strong>times</strong> : int, optional</p>
<blockquote>
<div><p>The number of times the code is executed. Default is 1. The code is
only compiled once.</p>
</div></blockquote>
<p><strong>label</strong> : str, optional</p>
<blockquote>
<div><p>A label to identify <cite>code_str</cite> with. This is passed into <code class="docutils literal"><span class="pre">compile</span></code>
as the second argument (for run-time error messages).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>elapsed</strong> : float</p>
<blockquote class="last">
<div><p>Total elapsed time in seconds for executing <cite>code_str</cite> <cite>times</cite> times.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">etime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="s1">&#39;for i in range(1000): np.sqrt(i**2)&#39;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time for a single execution : &quot;</span><span class="p">,</span> <span class="n">etime</span> <span class="o">/</span> <span class="n">times</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
<span class="go">Time for a single execution :  0.005 s</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="set-number-of-points">
<h3>set_number_of_points<a class="headerlink" href="#set-number-of-points" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.set_number_of_points">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">set_number_of_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.set_number_of_points" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Change the number of points of streamlines</dt>
<dd>(either by downsampling or upsampling)</dd>
</dl>
<p>Change the number of points of streamlines in order to obtain
<cite>nb_points</cite>-1 segments of equal length. Points of streamlines will be
modified along the curve.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : ndarray or a list or <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a></p>
<blockquote>
<div><p>If ndarray, must have shape (N,3) where N is the number of points
of the streamline.
If list, each item must be ndarray shape (Ni,3) where Ni is the number
of points of streamline i.
If <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a>, its <cite>common_shape</cite> must be 3.</p>
</div></blockquote>
<p><strong>nb_points</strong> : int</p>
<blockquote>
<div><p>integer representing number of points wanted along the curve.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_streamlines</strong> : ndarray or a list or <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a></p>
<blockquote class="last">
<div><p>Results of the downsampling or upsampling process.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="k">import</span> <span class="n">set_number_of_points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>One streamline, a semi-circle:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modified_streamline</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamline</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">modified_streamline</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Multiple streamlines:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_streamlines</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streamlines</span><span class="p">]</span>
<span class="go">[100, 50]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">new_streamlines</span><span class="p">]</span>
<span class="go">[10, 10]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="set-number-of-points-python">
<h3>set_number_of_points_python<a class="headerlink" href="#set-number-of-points-python" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.set_number_of_points_python">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">set_number_of_points_python</code><span class="sig-paren">(</span><em>xyz</em>, <em>n_pols=3</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.set_number_of_points_python" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="setup">
<h3>setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.benchmarks.bench_streamline.setup">
<code class="descclassname">dipy.tracking.benchmarks.bench_streamline.</code><code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.benchmarks.bench_streamline.setup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="eudx">
<h3><a class="reference internal" href="#dipy.tracking.eudx.EuDX" title="dipy.tracking.eudx.EuDX"><code class="xref py py-class docutils literal"><span class="pre">EuDX</span></code></a><a class="headerlink" href="#eudx" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.eudx.EuDX">
<em class="property">class </em><code class="descclassname">dipy.tracking.eudx.</code><code class="descname">EuDX</code><span class="sig-paren">(</span><em>a</em>, <em>ind</em>, <em>seeds</em>, <em>odf_vertices</em>, <em>a_low=0.0239</em>, <em>step_sz=0.5</em>, <em>ang_thr=60.0</em>, <em>length_thr=0.0</em>, <em>total_weight=0.5</em>, <em>max_points=1000</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.eudx.EuDX" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Euler Delta Crossings</p>
<p>Generates tracks with termination criteria defined by a delta function <a class="reference internal" href="#r488" id="id22">[R488]</a>
and it has similarities with FACT algorithm <a class="reference internal" href="#r489" id="id23">[R489]</a> and Basser&#8217;s method
but uses trilinear interpolation.</p>
<p>Can be used with any reconstruction method as DTI, DSI, QBI, GQI which can
calculate an orientation distribution function and find the local peaks of
that function. For example a single tensor model can give you only
one peak a dual tensor model 2 peaks and quantitative anisotropy
method as used in GQI can give you 3,4,5 or even more peaks.</p>
<p>The parameters of the delta function are checking thresholds for the
direction propagation magnitude and the angle of propagation.</p>
<p>A specific number of seeds is defined randomly and then the tracks
are generated for that seed if the delta function returns true.</p>
<p>Trilinear interpolation is being used for defining the weights of
the propagation.</p>
<p class="rubric">Notes</p>
<p>The coordinate system of the tractography is that of native space of image
coordinates not native space world coordinates therefore voxel size is
always considered as having size (1,1,1).  Therefore, the origin is at the
center of the center of the first voxel of the volume and all i,j,k
coordinates start from the center of the voxel they represent.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r488" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R488]</td><td><em>(<a class="fn-backref" href="#id22">1</a>, <a class="fn-backref" href="#id24">2</a>)</em> Garyfallidis, Towards an accurate brain tractography, PhD thesis,
University of Cambridge, 2012.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r489" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R489]</td><td><em>(<a class="fn-backref" href="#id23">1</a>, <a class="fn-backref" href="#id25">2</a>)</em> Mori et al. Three-dimensional tracking of axonal projections
in the brain by magnetic resonance imaging. Ann. Neurol. 1999.</td></tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.eudx.EuDX.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>a</em>, <em>ind</em>, <em>seeds</em>, <em>odf_vertices</em>, <em>a_low=0.0239</em>, <em>step_sz=0.5</em>, <em>ang_thr=60.0</em>, <em>length_thr=0.0</em>, <em>total_weight=0.5</em>, <em>max_points=1000</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.eudx.EuDX.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Euler integration with multiple stopping criteria and supporting
multiple multiple fibres in crossings <a class="reference internal" href="#r490" id="id26">[R490]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array,</p>
<blockquote>
<div><p>Shape (I, J, K, Np), magnitude of the peak of a scalar anisotropic
function e.g. QA (quantitative anisotropy) where Np is the number
of peaks or a different function of shape (I, J, K) e.g FA or GFA.</p>
</div></blockquote>
<p><strong>ind</strong> : array, shape(x, y, z, Np)</p>
<blockquote>
<div><p>indices of orientations of the scalar anisotropic peaks found on
the resampling sphere</p>
</div></blockquote>
<p><strong>seeds</strong> : int or ndarray</p>
<blockquote>
<div><p>If an int is specified then that number of random seeds is
generated in the volume. If an (N, 3) array of points is given,
each of the N points is used as a seed. Seed points should be given
in the point space of the track (see <code class="docutils literal"><span class="pre">affine</span></code>). The latter is
useful when you need to track from specific regions e.g. the
white/gray matter interface or a specific ROI e.g. in the corpus
callosum.</p>
</div></blockquote>
<p><strong>odf_vertices</strong> : ndarray, shape (N, 3)</p>
<blockquote>
<div><p>sphere points which define a discrete representation of
orientations for the peaks, the same for all voxels. Usually the
same sphere is used as an input for a reconstruction algorithm
e.g. DSI.</p>
</div></blockquote>
<p><strong>a_low</strong> : float, optional</p>
<blockquote>
<div><p>low threshold for QA(typical 0.023)  or FA(typical 0.2) or any
other anisotropic function</p>
</div></blockquote>
<p><strong>step_sz</strong> : float, optional</p>
<blockquote>
<div><p>euler propagation step size</p>
</div></blockquote>
<p><strong>ang_thr</strong> : float, optional</p>
<blockquote>
<div><p>if turning angle is bigger than this threshold then tracking stops.</p>
</div></blockquote>
<p><strong>total_weight</strong> : float, optional</p>
<blockquote>
<div><p>total weighting threshold</p>
</div></blockquote>
<p><strong>max_points</strong> : int, optional</p>
<blockquote>
<div><p>maximum number of points in a track. Used to stop tracks from
looping forever.</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4) optional</p>
<blockquote>
<div><p>An affine mapping from the voxel indices of the input data to the
point space of the streamlines. That is if <code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span>
<span class="pre">point_space</span> <span class="pre">*</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k,</span> <span class="pre">1]</span></code>, then the streamline with point
<code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> passes though the center of voxel <code class="docutils literal"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code>. If
no point_space is given, the point space will be in voxel
coordinates.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>generator</strong> : obj</p>
<blockquote class="last">
<div><p>By iterating this generator you can obtain all the streamlines.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This works as an iterator class because otherwise it could fill your
entire memory if you generate many tracks.  Something very common as
you can easily generate millions of tracks if you have many seeds.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r490" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R490]</td><td><em>(<a class="fn-backref" href="#id26">1</a>, <a class="fn-backref" href="#id27">2</a>)</em> E. Garyfallidis (2012), &#8220;Towards an accurate brain
tractography&#8221;, PhD thesis, University of Cambridge, UK.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nibabel</span> <span class="k">as</span> <span class="nn">nib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.reconst.dti</span> <span class="k">import</span> <span class="n">TensorModel</span><span class="p">,</span> <span class="n">quantize_evecs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="k">import</span> <span class="n">get_data</span><span class="p">,</span> <span class="n">get_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.gradients</span> <span class="k">import</span> <span class="n">gradient_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fimg</span><span class="p">,</span><span class="n">fbvals</span><span class="p">,</span><span class="n">fbvecs</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;small_101D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">nib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fimg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">affine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gtab</span> <span class="o">=</span> <span class="n">gradient_table</span><span class="p">(</span><span class="n">fbvals</span><span class="p">,</span> <span class="n">fbvecs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">TensorModel</span><span class="p">(</span><span class="n">gtab</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ten</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;symmetric724&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ind</span> <span class="o">=</span> <span class="n">quantize_evecs</span><span class="p">(</span><span class="n">ten</span><span class="o">.</span><span class="n">evecs</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eu</span> <span class="o">=</span> <span class="n">EuDX</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">ten</span><span class="o">.</span><span class="n">fa</span><span class="p">,</span> <span class="n">ind</span><span class="o">=</span><span class="n">ind</span><span class="p">,</span> <span class="n">seeds</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">odf_vertices</span><span class="o">=</span><span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">a_low</span><span class="o">=.</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">eu</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="eudx-both-directions">
<h3>eudx_both_directions<a class="headerlink" href="#eudx-both-directions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.eudx.eudx_both_directions">
<code class="descclassname">dipy.tracking.eudx.</code><code class="descname">eudx_both_directions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.eudx.eudx_both_directions" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>seed</strong> : array, float64 shape (3,)</p>
<blockquote>
<div><p>Point where the tracking starts.</p>
</div></blockquote>
<p><strong>ref</strong> : cnp.npy_intp int</p>
<blockquote>
<div><p>Index of peak to follow first.</p>
</div></blockquote>
<p><strong>qa</strong> : array, float64 shape (X, Y, Z, Np)</p>
<blockquote>
<div><p>Anisotropy matrix, where <code class="docutils literal"><span class="pre">Np</span></code> is the number of maximum allowed peaks.</p>
</div></blockquote>
<p><strong>ind</strong> : array, float64 shape(x, y, z, Np)</p>
<blockquote>
<div><p>Index of the track orientation.</p>
</div></blockquote>
<p><strong>odf_vertices</strong> : double array shape (N, 3)</p>
<blockquote>
<div><p>Sampling directions on the sphere.</p>
</div></blockquote>
<p><strong>qa_thr</strong> : float</p>
<blockquote>
<div><p>Threshold for QA, we want everything higher than this threshold.</p>
</div></blockquote>
<p><strong>ang_thr</strong> : float</p>
<blockquote>
<div><p>Angle threshold, we only select fiber orientation within this range.</p>
</div></blockquote>
<p><strong>step_sz</strong> : double</p>
<p><strong>total_weight</strong> : double</p>
<p><strong>max_points</strong> : cnp.npy_intp</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>track</strong> : array, shape (N,3)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-sphere">
<h3>get_sphere<a class="headerlink" href="#get-sphere" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.eudx.get_sphere">
<code class="descclassname">dipy.tracking.eudx.</code><code class="descname">get_sphere</code><span class="sig-paren">(</span><em>name='symmetric362'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.eudx.get_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>provide triangulated spheres</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : str</p>
<blockquote>
<div><p>which sphere - one of:
* &#8216;symmetric362&#8217;
* &#8216;symmetric642&#8217;
* &#8216;symmetric724&#8217;
* &#8216;repulsion724&#8217;
* &#8216;repulsion100&#8217;
* &#8216;repulsion200&#8217;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>sphere</strong> : a dipy.core.sphere.Sphere class instance</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="k">import</span> <span class="n">get_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;symmetric362&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">362</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">faces</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;not a sphere name&#39;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">DataError</span>: <span class="n">No sphere called &quot;not a sphere name&quot;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="detect-corresponding-tracks">
<h3>detect_corresponding_tracks<a class="headerlink" href="#detect-corresponding-tracks" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.learning.detect_corresponding_tracks">
<code class="descclassname">dipy.tracking.learning.</code><code class="descname">detect_corresponding_tracks</code><span class="sig-paren">(</span><em>indices</em>, <em>tracks1</em>, <em>tracks2</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.learning.detect_corresponding_tracks" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect corresponding tracks from list tracks1 to list tracks2
where tracks1 &amp; tracks2 are lists of tracks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>indices</strong> : sequence</p>
<blockquote>
<div><p>of indices of tracks1 that are to be detected in tracks2</p>
</div></blockquote>
<p><strong>tracks1</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</div></blockquote>
<p><strong>tracks2</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (M1,3) .. (Mm,3)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>track2track</strong> : array (N,2) where N is len(indices) of int</p>
<blockquote class="last">
<div><p>it shows the correspondance in the following way:
the first column is the current index in tracks1
the second column is the corresponding index in tracks2</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>To find the corresponding tracks we use mam_distances with &#8216;avg&#8217; option.
Then we calculate the argmin of all the calculated distances and return it
for every index. (See 3rd column of arr in the example given below.)</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.tracking.learning</span> <span class="k">as</span> <span class="nn">tl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle1</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle2</span> <span class="o">=</span> <span class="p">[</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">detect_corresponding_tracks</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">bundle1</span><span class="p">,</span> <span class="n">bundle2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="detect-corresponding-tracks-plus">
<h3>detect_corresponding_tracks_plus<a class="headerlink" href="#detect-corresponding-tracks-plus" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.learning.detect_corresponding_tracks_plus">
<code class="descclassname">dipy.tracking.learning.</code><code class="descname">detect_corresponding_tracks_plus</code><span class="sig-paren">(</span><em>indices</em>, <em>tracks1</em>, <em>indices2</em>, <em>tracks2</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.learning.detect_corresponding_tracks_plus" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect corresponding tracks from 1 to 2 where tracks1 &amp; tracks2 are
sequences of tracks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>indices</strong> : sequence</p>
<blockquote>
<div><p>of indices of tracks1 that are to be detected in tracks2</p>
</div></blockquote>
<p><strong>tracks1</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</div></blockquote>
<p><strong>indices2</strong> : sequence</p>
<blockquote>
<div><p>of indices of tracks2 in the initial brain</p>
</div></blockquote>
<p><strong>tracks2</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (M1,3) .. (Mm,3)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>track2track</strong> : array (N,2) where N is len(indices)</p>
<blockquote class="last">
<div><p>of int showing the correspondance in th following way
the first colum is the current index of tracks1
the second column is the corresponding index in tracks2</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">distances.mam_distances</span></code></p>
</div>
<p class="rubric">Notes</p>
<p>To find the corresponding tracks we use mam_distances with &#8216;avg&#8217; option.
Then we calculate the argmin of all the calculated distances and return it
for every index. (See 3rd column of arr in the example given below.)</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.tracking.learning</span> <span class="k">as</span> <span class="nn">tl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle1</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle2</span> <span class="o">=</span> <span class="p">[</span><span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices2</span> <span class="o">=</span> <span class="n">indices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">tl</span><span class="o">.</span><span class="n">detect_corresponding_tracks_plus</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">bundle1</span><span class="p">,</span> <span class="n">indices2</span><span class="p">,</span> <span class="n">bundle2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="fiberfit">
<h3><a class="reference internal" href="#dipy.tracking.life.FiberFit" title="dipy.tracking.life.FiberFit"><code class="xref py py-class docutils literal"><span class="pre">FiberFit</span></code></a><a class="headerlink" href="#fiberfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.life.FiberFit">
<em class="property">class </em><code class="descclassname">dipy.tracking.life.</code><code class="descname">FiberFit</code><span class="sig-paren">(</span><em>fiber_model</em>, <em>life_matrix</em>, <em>vox_coords</em>, <em>to_fit</em>, <em>beta</em>, <em>weighted_signal</em>, <em>b0_signal</em>, <em>relative_signal</em>, <em>mean_sig</em>, <em>vox_data</em>, <em>streamline</em>, <em>affine</em>, <em>evals</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.base.ReconstFit</span></code></a></p>
<p>A fit of the LiFE model to diffusion data</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.FiberFit.predict" title="dipy.tracking.life.FiberFit.predict"><code class="xref py py-obj docutils literal"><span class="pre">predict</span></code></a>([gtab,&nbsp;S0])</td>
<td>Predict the signal</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.life.FiberFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>fiber_model</em>, <em>life_matrix</em>, <em>vox_coords</em>, <em>to_fit</em>, <em>beta</em>, <em>weighted_signal</em>, <em>b0_signal</em>, <em>relative_signal</em>, <em>mean_sig</em>, <em>vox_data</em>, <em>streamline</em>, <em>affine</em>, <em>evals</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fiber_model</strong> : A FiberModel class instance</p>
<p class="last"><strong>params</strong> : the parameters derived from a fit of the model to the data.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.FiberFit.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>gtab=None</em>, <em>S0=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberFit.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the signal</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>Default: use self.gtab</p>
</div></blockquote>
<p><strong>S0</strong> : float or array</p>
<blockquote>
<div><p>The non-diffusion-weighted signal in the voxels for which a
prediction is made. Default: use self.b0_signal</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>prediction</strong> : ndarray of shape (voxels, bvecs)</p>
<blockquote class="last">
<div><p>An array with a prediction of the signal in each voxel/direction</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fibermodel">
<h3><a class="reference internal" href="#dipy.tracking.life.FiberModel" title="dipy.tracking.life.FiberModel"><code class="xref py py-class docutils literal"><span class="pre">FiberModel</span></code></a><a class="headerlink" href="#fibermodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.life.FiberModel">
<em class="property">class </em><code class="descclassname">dipy.tracking.life.</code><code class="descname">FiberModel</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.html#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.base.ReconstModel</span></code></a></p>
<p>A class for representing and solving predictive models based on
tractography solutions.</p>
<p class="rubric">Notes</p>
<p>This is an implementation of the LiFE model described in <a href="#id80"><span class="problematic" id="id81"><span id="id28"></span>[1]_</span></a></p>
<dl class="docutils">
<dt>[1] Pestilli, F., Yeatman, J, Rokem, A. Kay, K. and Wandell</dt>
<dd>B.A. (2014). Validation and statistical inference in living
connectomes. Nature Methods.</dd>
</dl>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.FiberModel.fit" title="dipy.tracking.life.FiberModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data,&nbsp;streamline[,&nbsp;affine,&nbsp;evals,&nbsp;sphere])</td>
<td>Fit the LiFE FiberModel for data and a set of streamlines associated</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.FiberModel.setup" title="dipy.tracking.life.FiberModel.setup"><code class="xref py py-obj docutils literal"><span class="pre">setup</span></code></a>(streamline,&nbsp;affine[,&nbsp;evals,&nbsp;sphere])</td>
<td>Set up the necessary components for the LiFE model: the matrix of</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.life.FiberModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>gtab</strong> : a GradientTable class instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.FiberModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data, streamline, affine=None, evals=[0.001, 0, 0], sphere=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the LiFE FiberModel for data and a set of streamlines associated
with this data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : 4D array</p>
<blockquote>
<div><p>Diffusion-weighted data</p>
</div></blockquote>
<p><strong>streamline</strong> : list</p>
<blockquote>
<div><p>A bunch of streamlines</p>
</div></blockquote>
<p><strong>affine: 4 by 4 array (optional)</strong></p>
<blockquote>
<div><p>The affine to go from the streamline coordinates to the data
coordinates. Defaults to use <cite>np.eye(4)</cite></p>
</div></blockquote>
<p><strong>evals</strong> : list (optional)</p>
<blockquote>
<div><p>The eigenvalues of the tensor response function used in constructing
the model signal. Default: [0.001, 0, 0]</p>
</div></blockquote>
<p><strong>sphere: `dipy.core.Sphere` instance, or False</strong></p>
<blockquote>
<div><p>Whether to approximate (and cache) the signal on a discrete
sphere. This may confer a significant speed-up in setting up the
problem, but is not as accurate. If <cite>False</cite>, we use the exact
gradients along the streamlines to calculate the matrix, instead of
an approximation.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">FiberFit class instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.FiberModel.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>streamline, affine, evals=[0.001, 0, 0], sphere=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.FiberModel.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the necessary components for the LiFE model: the matrix of
fiber-contributions to the DWI signal, and the coordinates of voxels
for which the equations will be solved</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : list</p>
<blockquote>
<div><p>Streamlines, each is an array of shape (n, 3)</p>
</div></blockquote>
<p><strong>affine</strong> : 4 by 4 array</p>
<blockquote>
<div><p>Mapping from the streamline coordinates to the data</p>
</div></blockquote>
<p><strong>evals</strong> : list (3 items, optional)</p>
<blockquote>
<div><p>The eigenvalues of the canonical tensor used as a response
function. Default:[0.001, 0, 0].</p>
</div></blockquote>
<p><strong>sphere: `dipy.core.Sphere` instance.</strong></p>
<blockquote class="last">
<div><p>Whether to approximate (and cache) the signal on a discrete
sphere. This may confer a significant speed-up in setting up the
problem, but is not as accurate. If <cite>False</cite>, we use the exact
gradients along the streamlines to calculate the matrix, instead of
an approximation. Defaults to use the 724-vertex symmetric sphere
from <a class="reference internal" href="dipy.data.html#module-dipy.data" title="dipy.data"><code class="xref py py-mod docutils literal"><span class="pre">dipy.data</span></code></a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="lifesignalmaker">
<h3><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker" title="dipy.tracking.life.LifeSignalMaker"><code class="xref py py-class docutils literal"><span class="pre">LifeSignalMaker</span></code></a><a class="headerlink" href="#lifesignalmaker" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.life.LifeSignalMaker">
<em class="property">class </em><code class="descclassname">dipy.tracking.life.</code><code class="descname">LifeSignalMaker</code><span class="sig-paren">(</span><em>gtab, evals=[0.001, 0, 0], sphere=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>A class for generating signals from streamlines in an efficient and speedy
manner.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker.calc_signal" title="dipy.tracking.life.LifeSignalMaker.calc_signal"><code class="xref py py-obj docutils literal"><span class="pre">calc_signal</span></code></a>(xyz)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal" title="dipy.tracking.life.LifeSignalMaker.streamline_signal"><code class="xref py py-obj docutils literal"><span class="pre">streamline_signal</span></code></a>(streamline)</td>
<td>Approximate the signal for a given streamline</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.life.LifeSignalMaker.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab, evals=[0.001, 0, 0], sphere=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a signal maker</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable class instance</p>
<blockquote>
<div><p>The gradient table on which the signal is calculated.</p>
</div></blockquote>
<p><strong>evals</strong> : list of 3 items</p>
<blockquote>
<div><p>The eigenvalues of the canonical tensor to use in calculating the
signal.</p>
</div></blockquote>
<p><strong>n_points</strong> : <cite>dipy.core.Sphere</cite> class instance</p>
<blockquote class="last">
<div><p>The discrete sphere to use as an approximation for the continuous
sphere on which the signal is represented. If integer - we will use
an instance of one of the symmetric spheres cached in
<cite>dps.get_sphere</cite>. If a &#8216;dipy.core.Sphere&#8217; class instance is
provided, we will use this object. Default: the <a class="reference internal" href="dipy.data.html#module-dipy.data" title="dipy.data"><code class="xref py py-mod docutils literal"><span class="pre">dipy.data</span></code></a>
symmetric sphere with 724 vertices</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.LifeSignalMaker.calc_signal">
<code class="descname">calc_signal</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.calc_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.LifeSignalMaker.streamline_signal">
<code class="descname">streamline_signal</code><span class="sig-paren">(</span><em>streamline</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.LifeSignalMaker.streamline_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate the signal for a given streamline</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstfit">
<h3><a class="reference internal" href="#dipy.tracking.life.ReconstFit" title="dipy.tracking.life.ReconstFit"><code class="xref py py-class docutils literal"><span class="pre">ReconstFit</span></code></a><a class="headerlink" href="#reconstfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.life.ReconstFit">
<em class="property">class </em><code class="descclassname">dipy.tracking.life.</code><code class="descname">ReconstFit</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.ReconstFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class which holds the fit result of ReconstModel</p>
<p>For example that could be holding FA or GFA etc.</p>
<dl class="method">
<dt id="dipy.tracking.life.ReconstFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.ReconstFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstmodel">
<h3><a class="reference internal" href="#dipy.tracking.life.ReconstModel" title="dipy.tracking.life.ReconstModel"><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code></a><a class="headerlink" href="#reconstmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.life.ReconstModel">
<em class="property">class </em><code class="descclassname">dipy.tracking.life.</code><code class="descname">ReconstModel</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.ReconstModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class for signal reconstruction models</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.ReconstModel.fit" title="dipy.tracking.life.ReconstModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.life.ReconstModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.ReconstModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialization of the abstract class for signal reconstruction models</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>gtab</strong> : GradientTable class instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.ReconstModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.ReconstModel.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="range">
<h3><a class="reference internal" href="#dipy.tracking.life.range" title="dipy.tracking.life.range"><code class="xref py py-class docutils literal"><span class="pre">range</span></code></a><a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.life.range">
<em class="property">class </em><code class="descclassname">dipy.tracking.life.</code><code class="descname">range</code><span class="sig-paren">(</span><em>stop</em><span class="sig-paren">)</span> &#x2192; range object<a class="headerlink" href="#dipy.tracking.life.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>range(start, stop[, step]) -&gt; range object</p>
<p>Return an object that produces a sequence of integers from start (inclusive)
to stop (exclusive) by step.  range(i, j) produces i, i+1, i+2, ..., j-1.
start defaults to 0, and stop is omitted!  range(4) produces 0, 1, 2, 3.
These are exactly the valid indices for a list of 4 elements.
When step is given, it specifies the increment (or decrement).</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.life.range.count" title="dipy.tracking.life.range.count"><code class="xref py py-obj docutils literal"><span class="pre">count</span></code></a>(...)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.life.range.index" title="dipy.tracking.life.range.index"><code class="xref py py-obj docutils literal"><span class="pre">index</span></code></a>((value,&nbsp;[start,&nbsp;...)</td>
<td>Raise ValueError if the value is not present.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.life.range.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.range.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.range.count">
<code class="descname">count</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span> &#x2192; integer -- return number of occurrences of value<a class="headerlink" href="#dipy.tracking.life.range.count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.life.range.index">
<code class="descname">index</code><span class="sig-paren">(</span><em>value</em><span class="optional">[</span>, <em>start</em><span class="optional">[</span>, <em>stop</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; integer -- return index of value.<a class="headerlink" href="#dipy.tracking.life.range.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise ValueError if the value is not present.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.life.range.start">
<code class="descname">start</code><a class="headerlink" href="#dipy.tracking.life.range.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.life.range.step">
<code class="descname">step</code><a class="headerlink" href="#dipy.tracking.life.range.step" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.life.range.stop">
<code class="descname">stop</code><a class="headerlink" href="#dipy.tracking.life.range.stop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="grad-tensor">
<h3>grad_tensor<a class="headerlink" href="#grad-tensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.grad_tensor">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">grad_tensor</code><span class="sig-paren">(</span><em>grad</em>, <em>evals</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.grad_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the 3 by 3 tensor for a given spatial gradient, given a canonical
tensor shape (also as a 3 by 3), pointing at [1,0,0]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grad</strong> : 1d array of shape (3,)</p>
<blockquote>
<div><p>The spatial gradient (e.g between two nodes of a streamline).</p>
</div></blockquote>
<p><strong>evals: 1d array of shape (3,)</strong></p>
<blockquote class="last">
<div><p>The eigenvalues of a canonical tensor to be used as a response
function.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="gradient">
<h3>gradient<a class="headerlink" href="#gradient" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.gradient">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">gradient</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.gradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the gradient of an N-dimensional array.</p>
<p>The gradient is computed using central differences in the interior
and first differences at the boundaries. The returned gradient hence has
the same shape as the input array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>f</strong> : array_like</p>
<blockquote>
<div><p>An N-dimensional array containing samples of a scalar function.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>gradient</strong> : ndarray</p>
<blockquote class="last">
<div><p>N arrays of the same shape as <cite>f</cite> giving the derivative of <cite>f</cite> with
respect to each dimension.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gradient</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([ 1. ,  1.5,  2.5,  3.5,  4.5,  5. ])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gradient</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">))</span>
<span class="go">[array([[ 2.,  2., -1.],</span>
<span class="go">       [ 2.,  2., -1.]]), array([[ 1. ,  2.5,  4. ],</span>
<span class="go">       [ 1. ,  1. ,  1. ]])]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="setup-test">
<h3>setup_test<a class="headerlink" href="#setup-test" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.setup_test">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">setup_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.setup_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</p>
<p>If imported into a file, nosetest will run this before any doctests.</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718">https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718</a>
<a class="reference external" href="https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495">https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495</a>
<a class="reference external" href="https://github.com/nipy/nibabel/pull/556">https://github.com/nipy/nibabel/pull/556</a></p>
</dd></dl>

</div>
<div class="section" id="streamline-gradients">
<h3>streamline_gradients<a class="headerlink" href="#streamline-gradients" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.streamline_gradients">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">streamline_gradients</code><span class="sig-paren">(</span><em>streamline</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.streamline_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the gradients of the streamline along the spatial dimension</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : array-like of shape (n, 3)</p>
<blockquote>
<div><p>The 3d coordinates of a single streamline</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Array of shape (3, n): Spatial gradients along the length of the</p>
<p class="last">streamline.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="streamline-signal">
<h3>streamline_signal<a class="headerlink" href="#streamline-signal" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.streamline_signal">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">streamline_signal</code><span class="sig-paren">(</span><em>streamline, gtab, evals=[0.001, 0, 0]</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.streamline_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>The signal from a single streamline estimate along each of its nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : a single streamline</p>
<p><strong>gtab</strong> : GradientTable class instance</p>
<p><strong>evals</strong> : list of length 3 (optional. Default: [0.001, 0, 0])</p>
<blockquote class="last">
<div><p>The eigenvalues of the canonical tensor used as an estimate of the
signal generated by each node of the streamline.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="streamline-tensors">
<h3>streamline_tensors<a class="headerlink" href="#streamline-tensors" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.streamline_tensors">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">streamline_tensors</code><span class="sig-paren">(</span><em>streamline, evals=[0.001, 0, 0]</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.streamline_tensors" title="Permalink to this definition">¶</a></dt>
<dd><p>The tensors generated by this fiber.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : array-like of shape (n, 3)</p>
<blockquote>
<div><p>The 3d coordinates of a single streamline</p>
</div></blockquote>
<p><strong>evals</strong> : iterable with three entries</p>
<blockquote>
<div><p>The estimated eigenvalues of a single fiber tensor.
(default: [0.001, 0, 0]).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An n_nodes by 3 by 3 array with the tensor for each node in the fiber.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="transform-streamlines">
<h3>transform_streamlines<a class="headerlink" href="#transform-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.transform_streamlines">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">transform_streamlines</code><span class="sig-paren">(</span><em>streamlines</em>, <em>mat</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.transform_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply affine transformation to streamlines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>List of 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
<p><strong>mat</strong> : array, (4, 4)</p>
<blockquote>
<div><p>transformation matrix</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_streamlines</strong> : list</p>
<blockquote class="last">
<div><p>List of the transformed 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="unique-rows">
<h3>unique_rows<a class="headerlink" href="#unique-rows" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.unique_rows">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">unique_rows</code><span class="sig-paren">(</span><em>in_array</em>, <em>dtype='f4'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.unique_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>This (quickly) finds the unique rows in an array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>in_array: ndarray</strong></p>
<blockquote>
<div><p>The array for which the unique rows should be found</p>
</div></blockquote>
<p><strong>dtype: str, optional</strong></p>
<blockquote>
<div><p>This determines the intermediate representation used for the
values. Should at least preserve the values of the input array.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">u_return: ndarray</p>
<blockquote class="last">
<div><p>Array with the unique rows of the original array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="voxel2streamline">
<h3>voxel2streamline<a class="headerlink" href="#voxel2streamline" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.life.voxel2streamline">
<code class="descclassname">dipy.tracking.life.</code><code class="descname">voxel2streamline</code><span class="sig-paren">(</span><em>streamline</em>, <em>transformed=False</em>, <em>affine=None</em>, <em>unique_idx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.life.voxel2streamline" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps voxels to streamlines and streamlines to voxels, for setting up
the LiFE equations matrix</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : list</p>
<blockquote>
<div><p>A collection of streamlines, each n by 3, with n being the number of
nodes in the fiber.</p>
</div></blockquote>
<p><strong>affine</strong> : 4 by 4 array (optional)</p>
<blockquote>
<div><p>Defines the spatial transformation from streamline to data.
Default: np.eye(4)</p>
</div></blockquote>
<p><strong>transformed</strong> : bool (optional)</p>
<blockquote>
<div><p>Whether the streamlines have been already transformed (in which case
they don&#8217;t need to be transformed in here).</p>
</div></blockquote>
<p><strong>unique_idx</strong> : array (optional).</p>
<blockquote>
<div><p>The unique indices in the streamlines</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>v2f, v2fn</strong> : tuple of dicts</p>
<p>The first dict in the tuple answers the question: Given a voxel (from</p>
<p>the unique indices in this model), which fibers pass through it?</p>
<p>The second answers the question: Given a streamline, for each voxel that</p>
<p>this streamline passes through, which nodes of that streamline are in that</p>
<p class="last">voxel?</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="acttissueclassifier">
<h3><a class="reference internal" href="#dipy.tracking.local.ActTissueClassifier" title="dipy.tracking.local.ActTissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">ActTissueClassifier</span></code></a><a class="headerlink" href="#acttissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.ActTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">ActTissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.ActTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.tissue_classifier.ConstrainedTissueClassifier</span></code></p>
<p>Anatomically-Constrained Tractography (ACT) stopping criteria from <a class="reference internal" href="#r491" id="id29">[R491]</a>.
This implements the use of partial volume fraction (PVE) maps to
determine when the tracking stops. The proposed (<a class="reference internal" href="#r491" id="id30">[R491]</a>) method that
cuts streamlines going through subcortical gray matter regions is
not implemented here. The backtracking technique for
streamlines reaching INVALIDPOINT is not implemented either.
cdef:</p>
<blockquote>
<div>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map</div></blockquote>
<table class="docutils citation" frame="void" id="r491" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R491]</td><td><em>(<a class="fn-backref" href="#id29">1</a>, <a class="fn-backref" href="#id30">2</a>)</em> Smith, R. E., Tournier, J.-D., Calamante, F., &amp; Connelly, A.</td></tr>
</tbody>
</table>
<p>&#8220;Anatomically-constrained tractography: Improved diffusion MRI
streamlines tractography through effective use of anatomical
information.&#8221; NeuroImage, 63(3), 1924-1938, 2012.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">from_pve</span></code></td>
<td>ConstrainedTissueClassifier from partial volume fraction (PVE) maps.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_exclude</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_include</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.ActTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ActTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="binarytissueclassifier">
<h3><a class="reference internal" href="#dipy.tracking.local.BinaryTissueClassifier" title="dipy.tracking.local.BinaryTissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">BinaryTissueClassifier</span></code></a><a class="headerlink" href="#binarytissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.BinaryTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">BinaryTissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.BinaryTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.tissue_classifier.TissueClassifier</span></code></p>
<dl class="docutils">
<dt>cdef:</dt>
<dd>unsigned char[:, :, :] mask</dd>
</dl>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.BinaryTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.BinaryTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cmctissueclassifier">
<h3><a class="reference internal" href="#dipy.tracking.local.CmcTissueClassifier" title="dipy.tracking.local.CmcTissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">CmcTissueClassifier</span></code></a><a class="headerlink" href="#cmctissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.CmcTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">CmcTissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.CmcTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.tissue_classifier.ConstrainedTissueClassifier</span></code></p>
<p>Continuous map criterion (CMC) stopping criteria from <a class="reference internal" href="#r492" id="id31">[R492]</a>.
This implements the use of partial volume fraction (PVE) maps to
determine when the tracking stops.</p>
<dl class="docutils">
<dt>cdef:</dt>
<dd>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map
double step_size
double average_voxel_size
double correction_factor</dd>
</dl>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r492" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R492]</td><td><em>(<a class="fn-backref" href="#id31">1</a>, <a class="fn-backref" href="#id32">2</a>)</em> Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.</td></tr>
</tbody>
</table>
<p>&#8220;Towards quantitative connectivity analysis: reducing tractography biases.&#8221;
NeuroImage, 98, 266-278, 2014.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">from_pve</span></code></td>
<td>ConstrainedTissueClassifier from partial volume fraction (PVE) maps.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">get_exclude</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_include</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.CmcTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.CmcTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="constrainedtissueclassifier">
<h3><a class="reference internal" href="#dipy.tracking.local.ConstrainedTissueClassifier" title="dipy.tracking.local.ConstrainedTissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">ConstrainedTissueClassifier</span></code></a><a class="headerlink" href="#constrainedtissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.ConstrainedTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">ConstrainedTissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.ConstrainedTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.tissue_classifier.TissueClassifier</span></code></p>
<p>Abstract class that takes as input included and excluded tissue maps.
The &#8216;include_map&#8217; defines when the streamline reached a &#8216;valid&#8217; stopping
region (e.g. gray matter partial volume estimation (PVE) map) and the
&#8216;exclude_map&#8217; defines when the streamline reached an &#8216;invalid&#8217; stopping
region (e.g. corticospinal fluid PVE map). The background of the anatomical
image should be added to the &#8216;include_map&#8217; to keep streamlines exiting the
brain (e.g. through the brain stem).</p>
<dl class="docutils">
<dt>cdef:</dt>
<dd>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map</dd>
</dl>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.ConstrainedTissueClassifier.from_pve" title="dipy.tracking.local.ConstrainedTissueClassifier.from_pve"><code class="xref py py-obj docutils literal"><span class="pre">from_pve</span></code></a></td>
<td>ConstrainedTissueClassifier from partial volume fraction (PVE) maps.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.ConstrainedTissueClassifier.get_exclude" title="dipy.tracking.local.ConstrainedTissueClassifier.get_exclude"><code class="xref py py-obj docutils literal"><span class="pre">get_exclude</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.ConstrainedTissueClassifier.get_include" title="dipy.tracking.local.ConstrainedTissueClassifier.get_include"><code class="xref py py-obj docutils literal"><span class="pre">get_include</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.ConstrainedTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ConstrainedTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.ConstrainedTissueClassifier.from_pve">
<code class="descname">from_pve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ConstrainedTissueClassifier.from_pve" title="Permalink to this definition">¶</a></dt>
<dd><p>ConstrainedTissueClassifier from partial volume fraction (PVE)
maps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>wm_map</strong> : array</p>
<blockquote>
<div><p>The partial volume fraction of white matter at each voxel.</p>
</div></blockquote>
<p><strong>gm_map</strong> : array</p>
<blockquote>
<div><p>The partial volume fraction of gray matter at each voxel.</p>
</div></blockquote>
<p><strong>csf_map</strong> : array</p>
<blockquote class="last">
<div><p>The partial volume fraction of corticospinal fluid at each
voxel.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.ConstrainedTissueClassifier.get_exclude">
<code class="descname">get_exclude</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ConstrainedTissueClassifier.get_exclude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.ConstrainedTissueClassifier.get_include">
<code class="descname">get_include</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ConstrainedTissueClassifier.get_include" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="directiongetter">
<h3><a class="reference internal" href="#dipy.tracking.local.DirectionGetter" title="dipy.tracking.local.DirectionGetter"><code class="xref py py-class docutils literal"><span class="pre">DirectionGetter</span></code></a><a class="headerlink" href="#directiongetter" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.DirectionGetter">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">DirectionGetter</code><a class="headerlink" href="#dipy.tracking.local.DirectionGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.DirectionGetter.get_direction" title="dipy.tracking.local.DirectionGetter.get_direction"><code class="xref py py-obj docutils literal"><span class="pre">get_direction</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.DirectionGetter.initial_direction" title="dipy.tracking.local.DirectionGetter.initial_direction"><code class="xref py py-obj docutils literal"><span class="pre">initial_direction</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.DirectionGetter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.DirectionGetter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.DirectionGetter.get_direction">
<code class="descname">get_direction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.DirectionGetter.get_direction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.DirectionGetter.initial_direction">
<code class="descname">initial_direction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.DirectionGetter.initial_direction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="localtracking">
<h3><a class="reference internal" href="#dipy.tracking.local.LocalTracking" title="dipy.tracking.local.LocalTracking"><code class="xref py py-class docutils literal"><span class="pre">LocalTracking</span></code></a><a class="headerlink" href="#localtracking" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.LocalTracking">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">LocalTracking</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>fixedstep=True</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.LocalTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="dipy.tracking.local.LocalTracking.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>fixedstep=True</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.LocalTracking.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates streamlines by using local fiber-tracking.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>direction_getter</strong> : instance of DirectionGetter</p>
<blockquote>
<div><p>Used to get directions for fiber tracking.</p>
</div></blockquote>
<p><strong>tissue_classifier</strong> : instance of TissueClassifier</p>
<blockquote>
<div><p>Identifies endpoints and invalid points to inform tracking.</p>
</div></blockquote>
<p><strong>seeds</strong> : array (N, 3)</p>
<blockquote>
<div><p>Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal"><span class="pre">affine</span></code>).</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in &#8220;voxel
coordinates&#8221; as long as isotropic voxels were used to acquire the
data.</p>
</div></blockquote>
<p><strong>step_size</strong> : float</p>
<blockquote>
<div><p>Step size used for tracking.</p>
</div></blockquote>
<p><strong>max_cross</strong> : int or None</p>
<blockquote>
<div><p>The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</div></blockquote>
<p><strong>maxlen</strong> : int</p>
<blockquote>
<div><p>Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</div></blockquote>
<p><strong>fixedstep</strong> : bool</p>
<blockquote>
<div><p>If true, a fixed stepsize is used, otherwise a variable step size
is used.</p>
</div></blockquote>
<p><strong>return_all</strong> : bool</p>
<blockquote class="last">
<div><p>If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="particlefilteringtracking">
<h3><a class="reference internal" href="#dipy.tracking.local.ParticleFilteringTracking" title="dipy.tracking.local.ParticleFilteringTracking"><code class="xref py py-class docutils literal"><span class="pre">ParticleFilteringTracking</span></code></a><a class="headerlink" href="#particlefilteringtracking" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.ParticleFilteringTracking">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">ParticleFilteringTracking</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>pft_back_tracking_dist=2</em>, <em>pft_front_tracking_dist=1</em>, <em>pft_max_trial=20</em>, <em>particle_count=15</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ParticleFilteringTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.local.localtracking.LocalTracking" title="dipy.tracking.local.localtracking.LocalTracking"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.localtracking.LocalTracking</span></code></a></p>
<dl class="method">
<dt id="dipy.tracking.local.ParticleFilteringTracking.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>pft_back_tracking_dist=2</em>, <em>pft_front_tracking_dist=1</em>, <em>pft_max_trial=20</em>, <em>particle_count=15</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ParticleFilteringTracking.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A streamline generator using the particle filtering tractography
method <a class="reference internal" href="#r493" id="id33">[R493]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>direction_getter</strong> : instance of ProbabilisticDirectionGetter</p>
<blockquote>
<div><p>Used to get directions for fiber tracking.</p>
</div></blockquote>
<p><strong>tissue_classifier</strong> : instance of ConstrainedTissueClassifier</p>
<blockquote>
<div><p>Identifies endpoints and invalid points to inform tracking.</p>
</div></blockquote>
<p><strong>seeds</strong> : array (N, 3)</p>
<blockquote>
<div><p>Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal"><span class="pre">affine</span></code>).</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in &#8220;voxel
coordinates&#8221; as long as isotropic voxels were used to acquire the
data.</p>
</div></blockquote>
<p><strong>step_size</strong> : float</p>
<blockquote>
<div><p>Step size used for tracking.</p>
</div></blockquote>
<p><strong>max_cross</strong> : int or None</p>
<blockquote>
<div><p>The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</div></blockquote>
<p><strong>maxlen</strong> : int</p>
<blockquote>
<div><p>Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</div></blockquote>
<p><strong>pft_back_tracking_dist</strong> : float</p>
<blockquote>
<div><p>Distance in mm to back track before starting the particle filtering
tractography. The total particle filtering tractography distance is
equal to back_tracking_dist + front_tracking_dist.
By default this is set to 2 mm.</p>
</div></blockquote>
<p><strong>pft_front_tracking_dist</strong> : float</p>
<blockquote>
<div><p>Distance in mm to run the particle filtering tractography after the
the back track distance. The total particle filtering tractography
distance is equal to back_tracking_dist + front_tracking_dist. By
default this is set to 1 mm.</p>
</div></blockquote>
<p><strong>pft_max_trial</strong> : int</p>
<blockquote>
<div><p>Maximum number of trial for the particle filtering tractography
(Prevents infinite loops).</p>
</div></blockquote>
<p><strong>particle_count</strong> : int</p>
<blockquote>
<div><p>Number of particles to use in the particle filter.</p>
</div></blockquote>
<p><strong>return_all</strong> : bool</p>
<blockquote class="last">
<div><p>If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r493" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R493]</td><td><em>(<a class="fn-backref" href="#id33">1</a>, <a class="fn-backref" href="#id34">2</a>)</em> Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.
Towards quantitative connectivity analysis: reducing
tractography biases. NeuroImage, 98, 266-278, 2014.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="thresholdtissueclassifier">
<h3><a class="reference internal" href="#dipy.tracking.local.ThresholdTissueClassifier" title="dipy.tracking.local.ThresholdTissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">ThresholdTissueClassifier</span></code></a><a class="headerlink" href="#thresholdtissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.ThresholdTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">ThresholdTissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.ThresholdTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.tissue_classifier.TissueClassifier</span></code></p>
<p># Declarations from tissue_classifier.pxd bellow
cdef:</p>
<blockquote>
<div>double threshold, interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] metric_map</div></blockquote>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.ThresholdTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.ThresholdTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tissueclassifier">
<h3><a class="reference internal" href="#dipy.tracking.local.TissueClassifier" title="dipy.tracking.local.TissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">TissueClassifier</span></code></a><a class="headerlink" href="#tissueclassifier" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.TissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.</code><code class="descname">TissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.TissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.TissueClassifier.check_point" title="dipy.tracking.local.TissueClassifier.check_point"><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.TissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.TissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.TissueClassifier.check_point">
<code class="descname">check_point</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.TissueClassifier.check_point" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="bunch">
<h3><a class="reference internal" href="#dipy.tracking.local.localtracking.Bunch" title="dipy.tracking.local.localtracking.Bunch"><code class="xref py py-class docutils literal"><span class="pre">Bunch</span></code></a><a class="headerlink" href="#bunch" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.localtracking.Bunch">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.localtracking.</code><code class="descname">Bunch</code><span class="sig-paren">(</span><em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.Bunch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="dipy.tracking.local.localtracking.Bunch.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.Bunch.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A &#8216;bunch&#8217; of values (a replacement of Enum)</p>
<p>This is a temporary replacement of Enum, which is not available
on all versions of Python 2</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id35">
<h3><a class="reference internal" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier" title="dipy.tracking.local.localtracking.ConstrainedTissueClassifier"><code class="xref py py-class docutils literal"><span class="pre">ConstrainedTissueClassifier</span></code></a><a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.localtracking.ConstrainedTissueClassifier">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.localtracking.</code><code class="descname">ConstrainedTissueClassifier</code><a class="headerlink" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.tissue_classifier.TissueClassifier</span></code></p>
<p>Abstract class that takes as input included and excluded tissue maps.
The &#8216;include_map&#8217; defines when the streamline reached a &#8216;valid&#8217; stopping
region (e.g. gray matter partial volume estimation (PVE) map) and the
&#8216;exclude_map&#8217; defines when the streamline reached an &#8216;invalid&#8217; stopping
region (e.g. corticospinal fluid PVE map). The background of the anatomical
image should be added to the &#8216;include_map&#8217; to keep streamlines exiting the
brain (e.g. through the brain stem).</p>
<dl class="docutils">
<dt>cdef:</dt>
<dd>double interp_out_double[1]
double[:]  interp_out_view = interp_out_view
double[:, :, :] include_map, exclude_map</dd>
</dl>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">check_point</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.from_pve" title="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.from_pve"><code class="xref py py-obj docutils literal"><span class="pre">from_pve</span></code></a></td>
<td>ConstrainedTissueClassifier from partial volume fraction (PVE) maps.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_exclude" title="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_exclude"><code class="xref py py-obj docutils literal"><span class="pre">get_exclude</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_include" title="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_include"><code class="xref py py-obj docutils literal"><span class="pre">get_include</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.from_pve">
<code class="descname">from_pve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.from_pve" title="Permalink to this definition">¶</a></dt>
<dd><p>ConstrainedTissueClassifier from partial volume fraction (PVE)
maps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>wm_map</strong> : array</p>
<blockquote>
<div><p>The partial volume fraction of white matter at each voxel.</p>
</div></blockquote>
<p><strong>gm_map</strong> : array</p>
<blockquote>
<div><p>The partial volume fraction of gray matter at each voxel.</p>
</div></blockquote>
<p><strong>csf_map</strong> : array</p>
<blockquote class="last">
<div><p>The partial volume fraction of corticospinal fluid at each
voxel.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_exclude">
<code class="descname">get_exclude</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_exclude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_include">
<code class="descname">get_include</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.ConstrainedTissueClassifier.get_include" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="id36">
<h3><a class="reference internal" href="#dipy.tracking.local.localtracking.LocalTracking" title="dipy.tracking.local.localtracking.LocalTracking"><code class="xref py py-class docutils literal"><span class="pre">LocalTracking</span></code></a><a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.localtracking.LocalTracking">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.localtracking.</code><code class="descname">LocalTracking</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>fixedstep=True</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.LocalTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="dipy.tracking.local.localtracking.LocalTracking.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>fixedstep=True</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.LocalTracking.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates streamlines by using local fiber-tracking.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>direction_getter</strong> : instance of DirectionGetter</p>
<blockquote>
<div><p>Used to get directions for fiber tracking.</p>
</div></blockquote>
<p><strong>tissue_classifier</strong> : instance of TissueClassifier</p>
<blockquote>
<div><p>Identifies endpoints and invalid points to inform tracking.</p>
</div></blockquote>
<p><strong>seeds</strong> : array (N, 3)</p>
<blockquote>
<div><p>Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal"><span class="pre">affine</span></code>).</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in &#8220;voxel
coordinates&#8221; as long as isotropic voxels were used to acquire the
data.</p>
</div></blockquote>
<p><strong>step_size</strong> : float</p>
<blockquote>
<div><p>Step size used for tracking.</p>
</div></blockquote>
<p><strong>max_cross</strong> : int or None</p>
<blockquote>
<div><p>The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</div></blockquote>
<p><strong>maxlen</strong> : int</p>
<blockquote>
<div><p>Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</div></blockquote>
<p><strong>fixedstep</strong> : bool</p>
<blockquote>
<div><p>If true, a fixed stepsize is used, otherwise a variable step size
is used.</p>
</div></blockquote>
<p><strong>return_all</strong> : bool</p>
<blockquote class="last">
<div><p>If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id37">
<h3><a class="reference internal" href="#dipy.tracking.local.localtracking.ParticleFilteringTracking" title="dipy.tracking.local.localtracking.ParticleFilteringTracking"><code class="xref py py-class docutils literal"><span class="pre">ParticleFilteringTracking</span></code></a><a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.local.localtracking.ParticleFilteringTracking">
<em class="property">class </em><code class="descclassname">dipy.tracking.local.localtracking.</code><code class="descname">ParticleFilteringTracking</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>pft_back_tracking_dist=2</em>, <em>pft_front_tracking_dist=1</em>, <em>pft_max_trial=20</em>, <em>particle_count=15</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.ParticleFilteringTracking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.tracking.local.localtracking.LocalTracking" title="dipy.tracking.local.localtracking.LocalTracking"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.local.localtracking.LocalTracking</span></code></a></p>
<dl class="method">
<dt id="dipy.tracking.local.localtracking.ParticleFilteringTracking.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>direction_getter</em>, <em>tissue_classifier</em>, <em>seeds</em>, <em>affine</em>, <em>step_size</em>, <em>max_cross=None</em>, <em>maxlen=500</em>, <em>pft_back_tracking_dist=2</em>, <em>pft_front_tracking_dist=1</em>, <em>pft_max_trial=20</em>, <em>particle_count=15</em>, <em>return_all=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.ParticleFilteringTracking.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A streamline generator using the particle filtering tractography
method <a class="reference internal" href="#r494" id="id38">[R494]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>direction_getter</strong> : instance of ProbabilisticDirectionGetter</p>
<blockquote>
<div><p>Used to get directions for fiber tracking.</p>
</div></blockquote>
<p><strong>tissue_classifier</strong> : instance of ConstrainedTissueClassifier</p>
<blockquote>
<div><p>Identifies endpoints and invalid points to inform tracking.</p>
</div></blockquote>
<p><strong>seeds</strong> : array (N, 3)</p>
<blockquote>
<div><p>Points to seed the tracking. Seed points should be given in point
space of the track (see <code class="docutils literal"><span class="pre">affine</span></code>).</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>Coordinate space for the streamline point with respect to voxel
indices of input data. This affine can contain scaling, rotational,
and translational components but should not contain any shearing.
An identity matrix can be used to generate streamlines in &#8220;voxel
coordinates&#8221; as long as isotropic voxels were used to acquire the
data.</p>
</div></blockquote>
<p><strong>step_size</strong> : float</p>
<blockquote>
<div><p>Step size used for tracking.</p>
</div></blockquote>
<p><strong>max_cross</strong> : int or None</p>
<blockquote>
<div><p>The maximum number of direction to track from each seed in crossing
voxels. By default all initial directions are tracked.</p>
</div></blockquote>
<p><strong>maxlen</strong> : int</p>
<blockquote>
<div><p>Maximum number of steps to track from seed. Used to prevent
infinite loops.</p>
</div></blockquote>
<p><strong>pft_back_tracking_dist</strong> : float</p>
<blockquote>
<div><p>Distance in mm to back track before starting the particle filtering
tractography. The total particle filtering tractography distance is
equal to back_tracking_dist + front_tracking_dist.
By default this is set to 2 mm.</p>
</div></blockquote>
<p><strong>pft_front_tracking_dist</strong> : float</p>
<blockquote>
<div><p>Distance in mm to run the particle filtering tractography after the
the back track distance. The total particle filtering tractography
distance is equal to back_tracking_dist + front_tracking_dist. By
default this is set to 1 mm.</p>
</div></blockquote>
<p><strong>pft_max_trial</strong> : int</p>
<blockquote>
<div><p>Maximum number of trial for the particle filtering tractography
(Prevents infinite loops).</p>
</div></blockquote>
<p><strong>particle_count</strong> : int</p>
<blockquote>
<div><p>Number of particles to use in the particle filter.</p>
</div></blockquote>
<p><strong>return_all</strong> : bool</p>
<blockquote class="last">
<div><p>If true, return all generated streamlines, otherwise only
streamlines reaching end points or exiting the image.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r494" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R494]</td><td><em>(<a class="fn-backref" href="#id38">1</a>, <a class="fn-backref" href="#id39">2</a>)</em> Girard, G., Whittingstall, K., Deriche, R., &amp; Descoteaux, M.
Towards quantitative connectivity analysis: reducing
tractography biases. NeuroImage, 98, 266-278, 2014.</td></tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="local-tracker">
<h3>local_tracker<a class="headerlink" href="#local-tracker" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.local.localtracking.local_tracker">
<code class="descclassname">dipy.tracking.local.localtracking.</code><code class="descname">local_tracker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.local_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks one direction from a seed.</p>
<p>This function is the main workhorse of the <code class="docutils literal"><span class="pre">LocalTracking</span></code> class defined
in <code class="docutils literal"><span class="pre">dipy.tracking.local.localtracking</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dg</strong> : DirectionGetter</p>
<blockquote>
<div><p>Used to choosing tracking directions.</p>
</div></blockquote>
<p><strong>tc</strong> : TissueClassifier</p>
<blockquote>
<div><p>Used to check tissue type along path.</p>
</div></blockquote>
<p><strong>seed_pos</strong> : array, float, 1d, (3,)</p>
<blockquote>
<div><p>First point of the (partial) streamline.</p>
</div></blockquote>
<p><strong>first_step</strong> : array, float, 1d, (3,)</p>
<blockquote>
<div><p>Initial seeding direction. Used as <code class="docutils literal"><span class="pre">prev_dir</span></code> for selecting the step
direction from the seed point.</p>
</div></blockquote>
<p><strong>voxel_size</strong> : array, float, 1d, (3,)</p>
<blockquote>
<div><p>Size of voxels in the data set.</p>
</div></blockquote>
<p><strong>streamline</strong> : array, float, 2d, (N, 3)</p>
<blockquote>
<div><p>Output of tracking will be put into this array. The length of this
array, <code class="docutils literal"><span class="pre">N</span></code>, will set the maximum allowable length of the streamline.</p>
</div></blockquote>
<p><strong>step_size</strong> : float</p>
<blockquote>
<div><p>Size of tracking steps in mm if <code class="docutils literal"><span class="pre">fixed_step</span></code>.</p>
</div></blockquote>
<p><strong>fixedstep</strong> : bool</p>
<blockquote>
<div><p>If true, a fixed step_size is used, otherwise a variable step size is
used.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>end</strong> : int</p>
<blockquote>
<div><p>Length of the tracked streamline</p>
</div></blockquote>
<p><strong>tissue_class</strong> : TissueClass</p>
<blockquote class="last">
<div><p>Ending state of the streamlines as determined by the TissueClassifier.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pft-tracker">
<h3>pft_tracker<a class="headerlink" href="#pft-tracker" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.local.localtracking.pft_tracker">
<code class="descclassname">dipy.tracking.local.localtracking.</code><code class="descname">pft_tracker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.local.localtracking.pft_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks one direction from a seed using the particle filtering algorithm.</p>
<p>This function is the main workhorse of the <code class="docutils literal"><span class="pre">ParticleFilteringTracking</span></code>
class defined in <code class="docutils literal"><span class="pre">dipy.tracking.local.localtracking</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dg</strong> : DirectionGetter</p>
<blockquote>
<div><p>Used to choosing tracking directions.</p>
</div></blockquote>
<p><strong>tc</strong> : TissueClassifier</p>
<blockquote>
<div><p>Used to check tissue type along path.</p>
</div></blockquote>
<p><strong>seed_pos</strong> : array, float, 1d, (3,)</p>
<blockquote>
<div><p>First point of the (partial) streamline.</p>
</div></blockquote>
<p><strong>first_step</strong> : array, float, 1d, (3,)</p>
<blockquote>
<div><p>Initial seeding direction. Used as <code class="docutils literal"><span class="pre">prev_dir</span></code> for selecting the step
direction from the seed point.</p>
</div></blockquote>
<p><strong>voxel_size</strong> : array, float, 1d, (3,)</p>
<blockquote>
<div><p>Size of voxels in the data set.</p>
</div></blockquote>
<p><strong>streamline</strong> : array, float, 2d, (N, 3)</p>
<blockquote>
<div><p>Output of tracking will be put into this array. The length of this
array, <code class="docutils literal"><span class="pre">N</span></code>, will set the maximum allowable length of the streamline.</p>
</div></blockquote>
<p><strong>directions</strong> : array, float, 2d, (N, 3)</p>
<blockquote>
<div><p>Output of tracking directions will be put into this array. The length
of this array, <code class="docutils literal"><span class="pre">N</span></code>, will set the maximum allowable length of the
streamline.</p>
</div></blockquote>
<p><strong>step_size</strong> : float</p>
<blockquote>
<div><p>Size of tracking steps in mm if <code class="docutils literal"><span class="pre">fixed_step</span></code>.</p>
</div></blockquote>
<p><strong>pft_max_nbr_back_steps</strong> : int</p>
<blockquote>
<div><p>Number of tracking steps to back track before starting the particle
filtering tractography.</p>
</div></blockquote>
<p><strong>pft_max_nbr_front_steps</strong> : int</p>
<blockquote>
<div><p>Number of additional tracking steps to track.</p>
</div></blockquote>
<p><strong>pft_max_trials</strong> : int</p>
<blockquote>
<div><p>Maximum number of trials for the particle filtering tractography
(Prevents infinite loops).</p>
</div></blockquote>
<p><strong>particle_count</strong> : int</p>
<blockquote>
<div><p>Number of particles to use in the particle filter.</p>
</div></blockquote>
<p><strong>particle_paths</strong> : array, float, 4d, (2, particle_count, pft_max_steps, 3)</p>
<blockquote>
<div><p>Temporary array for paths followed by all particles.</p>
</div></blockquote>
<p><strong>particle_dirs</strong> : array, float, 4d, (2, particle_count, pft_max_steps, 3)</p>
<blockquote>
<div><p>Temporary array for directions followed by particles.</p>
</div></blockquote>
<p><strong>particle_weights</strong> : array, float, 1d (particle_count)</p>
<blockquote>
<div><p>Temporary array for the weights of particles.</p>
</div></blockquote>
<p><strong>particle_steps</strong> : array, float, (2, particle_count)</p>
<blockquote>
<div><p>Temporary array for the number of steps of particles.</p>
</div></blockquote>
<p><strong>particle_tissue_classes</strong> : array, float, (2, particle_count)</p>
<blockquote>
<div><p>Temporary array for the tissue classes of particles.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>end</strong> : int</p>
<blockquote>
<div><p>Length of the tracked streamline</p>
</div></blockquote>
<p><strong>tissue_class</strong> : TissueClass</p>
<blockquote class="last">
<div><p>Ending state of the streamlines as determined by the TissueClassifier.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="xrange">
<h3><a class="reference internal" href="#dipy.tracking.metrics.xrange" title="dipy.tracking.metrics.xrange"><code class="xref py py-class docutils literal"><span class="pre">xrange</span></code></a><a class="headerlink" href="#xrange" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.tracking.metrics.xrange">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">xrange</code><a class="headerlink" href="#dipy.tracking.metrics.xrange" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">range</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="arbitrarypoint">
<h3>arbitrarypoint<a class="headerlink" href="#arbitrarypoint" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.arbitrarypoint">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">arbitrarypoint</code><span class="sig-paren">(</span><em>xyz</em>, <em>distance</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.arbitrarypoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Select an arbitrary point along distance on the track (curve)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
<p><strong>distance</strong> : float</p>
<blockquote>
<div><p>float representing distance travelled from the xyz[0] point of
the curve along the curve.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ap</strong> : array shape (3,)</p>
<blockquote class="last">
<div><p>Arbitrary point of line, such that, if the arbitrary point is not
a point in <cite>xyz</cite>, then we take the interpolation between the two
nearest <cite>xyz</cite> points.  If <cite>xyz</cite> is empty, return a ValueError</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">arbitrarypoint</span><span class="p">,</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ap</span><span class="o">=</span><span class="n">arbitrarypoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="bytes">
<h3>bytes<a class="headerlink" href="#bytes" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.bytes">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">bytes</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Size of track in bytes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>Array representing x,y,z of N points in a track.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>b</strong> : int</p>
<blockquote class="last">
<div><p>Number of bytes.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="center-of-mass">
<h3>center_of_mass<a class="headerlink" href="#center-of-mass" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.center_of_mass">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">center_of_mass</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.center_of_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Center of mass of streamline</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>com</strong> : array shape (3,)</p>
<blockquote class="last">
<div><p>center of mass of streamline</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">center_of_mass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">([])</span>
<span class="gt">Traceback (most recent call last):</span>
   <span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">xyz array cannot be empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="go">array([ 1.,  1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">center_of_mass</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.,  1.,  1.])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="downsample">
<h3>downsample<a class="headerlink" href="#downsample" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.downsample">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">downsample</code><span class="sig-paren">(</span><em>xyz</em>, <em>n_pols=3</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>downsample for a specific number of points along the curve/track</p>
<p>Uses the length of the curve. It works in a similar fashion to
midpoint and arbitrarypoint but it also reduces the number of segments
of a track.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
<p><strong>n_pol</strong> : int</p>
<blockquote>
<div><p>integer representing number of points (poles) we need along the curve.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xyz2</strong> : array shape (M,3)</p>
<blockquote class="last">
<div><p>array representing x,y,z of M points that where extrapolated. M
should be equal to n_pols</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># a semi-circle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz2</span><span class="o">=</span><span class="n">downsample</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># a cosine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="o">=</span> <span class="n">downsample</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyz2</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz3</span><span class="o">=</span><span class="n">downsample</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyz3</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="endpoint">
<h3>endpoint<a class="headerlink" href="#endpoint" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.endpoint">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">endpoint</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array, shape(N,3)</p>
<blockquote>
<div><p>Track.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ep</strong> : array, shape(3,)</p>
<blockquote class="last">
<div><p>First track point.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">endpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ep</span><span class="o">=</span><span class="n">endpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ep</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="n">xyz</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="frenet-serret">
<h3>frenet_serret<a class="headerlink" href="#frenet-serret" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.frenet_serret">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">frenet_serret</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.frenet_serret" title="Permalink to this definition">¶</a></dt>
<dd><p>Frenet-Serret Space Curve Invariants</p>
<p>Calculates the 3 vector and 2 scalar invariants of a space curve
defined by vectors r = (x,y,z).  If z is omitted (i.e. the array xyz has
shape (N,2)), then the curve is
only 2D (planar), but the equations are still valid.</p>
<p>Similar to
<a class="reference external" href="http://www.mathworks.com/matlabcentral/fileexchange/11169">http://www.mathworks.com/matlabcentral/fileexchange/11169</a></p>
<p>In the following equations the prime (<span class="math">\('\)</span>) indicates differentiation
with respect to the parameter <span class="math">\(s\)</span> of a parametrised curve <span class="math">\(\mathbf{r}(s)\)</span>.</p>
<ul class="simple">
<li><span class="math">\(\mathbf{T}=\mathbf{r'}/|\mathbf{r'}|\qquad\)</span> (Tangent vector)}</li>
<li><span class="math">\(\mathbf{N}=\mathbf{T'}/|\mathbf{T'}|\qquad\)</span> (Normal vector)</li>
<li><span class="math">\(\mathbf{B}=\mathbf{T}\times\mathbf{N}\qquad\)</span> (Binormal vector)</li>
<li><span class="math">\(\kappa=|\mathbf{T'}|\qquad\)</span> (Curvature)</li>
<li><span class="math">\(\mathrm{\tau}=-\mathbf{B'}\cdot\mathbf{N}\)</span> (Torsion)</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>T</strong> : array shape (N,3)</p>
<blockquote>
<div><p>array representing the tangent of the curve xyz</p>
</div></blockquote>
<p><strong>N</strong> : array shape (N,3)</p>
<blockquote>
<div><p>array representing the normal of the curve xyz</p>
</div></blockquote>
<p><strong>B</strong> : array shape (N,3)</p>
<blockquote>
<div><p>array representing the binormal of the curve xyz</p>
</div></blockquote>
<p><strong>k</strong> : array shape (N,1)</p>
<blockquote>
<div><p>array representing the curvature of the curve xyz</p>
</div></blockquote>
<p><strong>t</strong> : array shape (N,1)</p>
<blockquote class="last">
<div><p>array representing the torsion of the curve xyz</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Create a helix and calculate its tangent, normal, binormal, curvature
and torsion</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking</span> <span class="k">import</span> <span class="n">metrics</span> <span class="k">as</span> <span class="n">tm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="n">theta</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span><span class="p">,</span><span class="n">N</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="n">tm</span><span class="o">.</span><span class="n">frenet_serret</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="generate-combinations">
<h3>generate_combinations<a class="headerlink" href="#generate-combinations" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.generate_combinations">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">generate_combinations</code><span class="sig-paren">(</span><em>items</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.generate_combinations" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine sets of size n from items</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>items</strong> : sequence</p>
<p><strong>n</strong> : int</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>ic</strong> : iterator</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">generate_combinations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ic</span><span class="o">=</span><span class="n">generate_combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ic</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">[0, 1]</span>
<span class="go">[0, 2]</span>
<span class="go">[1, 2]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="inside-sphere">
<h3>inside_sphere<a class="headerlink" href="#inside-sphere" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.inside_sphere">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">inside_sphere</code><span class="sig-paren">(</span><em>xyz</em>, <em>center</em>, <em>radius</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.inside_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>If any point of the track is inside a sphere of a specified
center and radius return True otherwise False.  Mathematicaly this
can be simply described by <span class="math">\(|x-c|\le r\)</span> where <span class="math">\(x\)</span> a point <span class="math">\(c\)</span> the
center of the sphere and <span class="math">\(r\)</span> the radius of the sphere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array, shape (N,3)</p>
<blockquote>
<div><p>representing x,y,z of the N points of the track</p>
</div></blockquote>
<p><strong>center</strong> : array, shape (3,)</p>
<blockquote>
<div><p>center of the sphere</p>
</div></blockquote>
<p><strong>radius</strong> : float</p>
<blockquote>
<div><p>radius of the sphere</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tf</strong> : {True,False}</p>
<blockquote class="last">
<div><p>Whether point is inside sphere.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">inside_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inside_sphere</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="inside-sphere-points">
<h3>inside_sphere_points<a class="headerlink" href="#inside-sphere-points" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.inside_sphere_points">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">inside_sphere_points</code><span class="sig-paren">(</span><em>xyz</em>, <em>center</em>, <em>radius</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.inside_sphere_points" title="Permalink to this definition">¶</a></dt>
<dd><p>If a track intersects with a sphere of a specified center and
radius return the points that are inside the sphere otherwise False.
Mathematicaly this can be simply described by <span class="math">\(|x-c| \le r\)</span> where <span class="math">\(x\)</span>
a point <span class="math">\(c\)</span> the center of the sphere and <span class="math">\(r\)</span> the radius of the
sphere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array, shape (N,3)</p>
<blockquote>
<div><p>representing x,y,z of the N points of the track</p>
</div></blockquote>
<p><strong>center</strong> : array, shape (3,)</p>
<blockquote>
<div><p>center of the sphere</p>
</div></blockquote>
<p><strong>radius</strong> : float</p>
<blockquote>
<div><p>radius of the sphere</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xyzn</strong> : array, shape(M,3)</p>
<blockquote class="last">
<div><p>array representing x,y,z of the M points inside the sphere</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">inside_sphere_points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inside_sphere_points</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
<span class="go">array([[1, 1, 1]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="intersect-sphere">
<h3>intersect_sphere<a class="headerlink" href="#intersect-sphere" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.intersect_sphere">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">intersect_sphere</code><span class="sig-paren">(</span><em>xyz</em>, <em>center</em>, <em>radius</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.intersect_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>If any segment of the track is intersecting with a sphere of
specific center and radius return True otherwise False</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array, shape (N,3)</p>
<blockquote>
<div><p>representing x,y,z of the N points of the track</p>
</div></blockquote>
<p><strong>center</strong> : array, shape (3,)</p>
<blockquote>
<div><p>center of the sphere</p>
</div></blockquote>
<p><strong>radius</strong> : float</p>
<blockquote>
<div><p>radius of the sphere</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tf</strong> : {True, False}</p>
<blockquote>
<div><p>True if track <cite>xyz</cite> intersects sphere</p>
</div></blockquote>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">intersect_sphere</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sph_cent</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sph_radius</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intersect_sphere</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">sph_cent</span><span class="p">,</span><span class="n">sph_radius</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">True</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The ray to sphere intersection method used here is similar with
<a class="reference external" href="http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/">http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/</a>
<a class="reference external" href="http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/source.cpp">http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/source.cpp</a>
we just applied it for every segment neglecting the intersections where
the intersecting points are not inside the segment</p>
</dd></dl>

</div>
<div class="section" id="id40">
<h3>length<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.length">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">length</code><span class="sig-paren">(</span><em>xyz</em>, <em>along=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Euclidean length of track line</p>
<p>This will give length in mm if tracks are expressed in world coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
<p><strong>along</strong> : bool, optional</p>
<blockquote>
<div><p>If True, return array giving cumulative length along track,
otherwise (default) return scalar giving total length.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>L</strong> : scalar or array shape (N-1,)</p>
<blockquote class="last">
<div><p>scalar in case of <cite>along</cite> == False, giving total length, array if
<cite>along</cite> == True, giving cumulative lengths.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_lens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_lens</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">len_along</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span> <span class="n">along</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">len_along</span><span class="p">,</span> <span class="n">expected_lens</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([],</span> <span class="n">along</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="longest-track-bundle">
<h3>longest_track_bundle<a class="headerlink" href="#longest-track-bundle" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.longest_track_bundle">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">longest_track_bundle</code><span class="sig-paren">(</span><em>bundle</em>, <em>sort=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.longest_track_bundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Return longest track or length sorted track indices in <cite>bundle</cite></p>
<p>If <cite>sort</cite> == True, return the indices of the sorted tracks in the
bundle, otherwise return the longest track.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bundle</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) ... (Nm,3)</p>
</div></blockquote>
<p><strong>sort</strong> : bool, optional</p>
<blockquote>
<div><p>If False (default) return longest track.  If True, return length
sorted indices for tracks in bundle</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>longest_or_indices</strong> : array</p>
<blockquote class="last">
<div><p>longest track - shape (N,3) -  (if <cite>sort</cite> is False), or indices
of length sorted tracks (if <cite>sort</cite> is True)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">longest_track_bundle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]]),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">longest_track_bundle</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
<span class="go">array([[0, 0, 0],</span>
<span class="go">       [4, 4, 4]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">longest_track_bundle</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> 
<span class="go">array([0, 1]...)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="magn">
<h3>magn<a class="headerlink" href="#magn" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.magn">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">magn</code><span class="sig-paren">(</span><em>xyz</em>, <em>n=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.magn" title="Permalink to this definition">¶</a></dt>
<dd><p>magnitude of vector</p>
</dd></dl>

</div>
<div class="section" id="mean-curvature">
<h3>mean_curvature<a class="headerlink" href="#mean-curvature" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.mean_curvature">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">mean_curvature</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.mean_curvature" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mean curvature of a curve</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a curve</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>m</strong> : float</p>
<blockquote class="last">
<div><p>Mean curvature.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Create a straight line and a semi-circle and print their mean curvatures</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking</span> <span class="k">import</span> <span class="n">metrics</span> <span class="k">as</span> <span class="n">tm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">=</span><span class="n">tm</span><span class="o">.</span><span class="n">mean_curvature</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="c1">#mean curvature straight line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">mean_curvature</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span> <span class="c1">#mean curvature for semi-circle</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="mean-orientation">
<h3>mean_orientation<a class="headerlink" href="#mean-orientation" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.mean_orientation">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">mean_orientation</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.mean_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mean orientation of a curve</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a curve</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>m</strong> : float</p>
<blockquote class="last">
<div><p>Mean orientation.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="midpoint">
<h3>midpoint<a class="headerlink" href="#midpoint" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.midpoint">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">midpoint</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.midpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Midpoint of track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>mp</strong> : array shape (3,)</p>
<blockquote class="last">
<div><p>Middle point of line, such that, if L is the line length then
<cite>np</cite> is the point such that the length xyz[0] to <cite>mp</cite> and from
<cite>mp</cite> to xyz[-1] is L/2.  If the middle point is not a point in
<cite>xyz</cite>, then we take the interpolation between the two nearest
<cite>xyz</cite> points.  If <cite>xyz</cite> is empty, return a ValueError</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">midpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">([])</span>
<span class="gt">Traceback (most recent call last):</span>
   <span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">xyz array cannot be empty</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="go">array([1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  2. ,  2.5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.,  1.,  1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  0. ,  0. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">midpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">array([ 1.5,  9. ,  7. ])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="midpoint2point">
<h3>midpoint2point<a class="headerlink" href="#midpoint2point" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.midpoint2point">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">midpoint2point</code><span class="sig-paren">(</span><em>xyz</em>, <em>p</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.midpoint2point" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate distance from midpoint of a curve to arbitrary point p</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
<p><strong>p</strong> : array shape (3,)</p>
<blockquote>
<div><p>array representing an arbitrary point with x,y,z coordinates in
space.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>d</strong> : float</p>
<blockquote class="last">
<div><p>a float number representing Euclidean distance</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">midpoint2point</span><span class="p">,</span> <span class="n">midpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dist</span><span class="o">=</span><span class="n">midpoint2point</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="principal-components">
<h3>principal_components<a class="headerlink" href="#principal-components" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.principal_components">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">principal_components</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.principal_components" title="Permalink to this definition">¶</a></dt>
<dd><p>We use PCA to calculate the 3 principal directions for a track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in a track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>va</strong> : array_like</p>
<blockquote>
<div><p>eigenvalues</p>
</div></blockquote>
<p><strong>ve</strong> : array_like</p>
<blockquote class="last">
<div><p>eigenvectors</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">principal_components</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">va</span><span class="p">,</span> <span class="n">ve</span> <span class="o">=</span> <span class="n">principal_components</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.51010101</span><span class="p">,</span> <span class="mf">0.09883545</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id41">
<h3>setup_test<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.setup_test">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">setup_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.setup_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</p>
<p>If imported into a file, nosetest will run this before any doctests.</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718">https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718</a>
<a class="reference external" href="https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495">https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495</a>
<a class="reference external" href="https://github.com/nipy/nibabel/pull/556">https://github.com/nipy/nibabel/pull/556</a></p>
</dd></dl>

</div>
<div class="section" id="splev">
<h3>splev<a class="headerlink" href="#splev" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.splev">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">splev</code><span class="sig-paren">(</span><em>x</em>, <em>tck</em>, <em>der=0</em>, <em>ext=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.splev" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate a B-spline or its derivatives.</p>
<p>Given the knots and coefficients of a B-spline representation, evaluate
the value of the smoothing polynomial and its derivatives.  This is a
wrapper around the FORTRAN routines splev and splder of FITPACK.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>An array of points at which to return the value of the smoothed
spline or its derivatives.  If <cite>tck</cite> was returned from <cite>splprep</cite>,
then the parameter values, u should be given.</p>
</div></blockquote>
<p><strong>tck</strong> : 3-tuple or a BSpline object</p>
<blockquote>
<div><p>If a tuple, then it should be a sequence of length 3 returned by
<cite>splrep</cite> or <cite>splprep</cite> containing the knots, coefficients, and degree
of the spline. (Also see Notes.)</p>
</div></blockquote>
<p><strong>der</strong> : int, optional</p>
<blockquote>
<div><p>The order of derivative of the spline to compute (must be less than
or equal to k).</p>
</div></blockquote>
<p><strong>ext</strong> : int, optional</p>
<blockquote>
<div><p>Controls the value returned for elements of <code class="docutils literal"><span class="pre">x</span></code> not in the
interval defined by the knot sequence.</p>
<ul class="simple">
<li>if ext=0, return the extrapolated value.</li>
<li>if ext=1, return 0</li>
<li>if ext=2, raise a ValueError</li>
<li>if ext=3, return the boundary value.</li>
</ul>
<p>The default value is 0.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>y</strong> : ndarray or list of ndarrays</p>
<blockquote class="last">
<div><p>An array of values representing the spline function evaluated at
the points in <cite>x</cite>.  If <cite>tck</cite> was returned from <cite>splprep</cite>, then this
is a list of arrays representing the curve in N-dimensional space.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.tracking.metrics.splprep" title="dipy.tracking.metrics.splprep"><code class="xref py py-obj docutils literal"><span class="pre">splprep</span></code></a>, <code class="xref py py-obj docutils literal"><span class="pre">splrep</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">sproot</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">spalde</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">splint</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">bisplrep</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">bisplev</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">BSpline</span></code></p>
</div>
<p class="rubric">Notes</p>
<p>Manipulating the tck-tuples directly is not recommended. In new code,
prefer using <cite>BSpline</cite> objects.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r495" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id42">[R495]</a></td><td>C. de Boor, &#8220;On calculating with b-splines&#8221;, J. Approximation
Theory, 6, p.50-62, 1972.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r496" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id43">[R496]</a></td><td>M. G. Cox, &#8220;The numerical evaluation of b-splines&#8221;, J. Inst. Maths
Applics, 10, p.134-149, 1972.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r497" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id44">[R497]</a></td><td>P. Dierckx, &#8220;Curve and surface fitting with splines&#8221;, Monographs
on Numerical Analysis, Oxford University Press, 1993.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="spline">
<h3>spline<a class="headerlink" href="#spline" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.spline">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">spline</code><span class="sig-paren">(</span><em>xyz</em>, <em>s=3</em>, <em>k=2</em>, <em>nest=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.spline" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate B-splines as documented in
<a class="reference external" href="http://www.scipy.org/Cookbook/Interpolation">http://www.scipy.org/Cookbook/Interpolation</a></p>
<p>The scipy.interpolate packages wraps the netlib FITPACK routines
(Dierckx) for calculating smoothing splines for various kinds of
data and geometries. Although the data is evenly spaced in this
example, it need not be so to use this routine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array, shape (N,3)</p>
<blockquote>
<div><p>array representing x,y,z of N points in 3d space</p>
</div></blockquote>
<p><strong>s</strong> : float, optional</p>
<blockquote>
<div><p>A smoothing condition.  The amount of smoothness is determined by
satisfying the conditions: sum((w * (y - g))**2,axis=0) &lt;= s
where g(x) is the smoothed interpolation of (x,y).  The user can
use s to control the tradeoff between closeness and smoothness of
fit.  Larger satisfying the conditions: sum((w * (y -
g))**2,axis=0) &lt;= s where g(x) is the smoothed interpolation of
(x,y).  The user can use s to control the tradeoff between
closeness and smoothness of fit.  Larger s means more smoothing
while smaller values of s indicate less smoothing. Recommended
values of s depend on the weights, w.  If the weights represent
the inverse of the standard-deviation of y, then a: good s value
should be found in the range (m-sqrt(2*m),m+sqrt(2*m)) where m is
the number of datapoints in x, y, and w.</p>
</div></blockquote>
<p><strong>k</strong> : int, optional</p>
<blockquote>
<div><p>Degree of the spline.  Cubic splines are recommended.  Even
values of k should be avoided especially with a small s-value.
for the same set of data.  If task=-1 find the weighted least
square spline for a given set of knots, t.</p>
</div></blockquote>
<p><strong>nest</strong> : None or int, optional</p>
<blockquote>
<div><p>An over-estimate of the total number of knots of the spline to
help in determining the storage space.  None results in value
m+2*k. -1 results in m+k+1. Always large enough is nest=m+k+1.
Default is -1.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>xyzn</strong> : array, shape (M,3)</p>
<blockquote class="last">
<div><p>array representing x,y,z of the M points inside the sphere</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">scipy.interpolate.splprep</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">scipy.interpolate.splev</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.75</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="c1"># make ascending spiral in 3-space</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="c1"># add noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyzn</span><span class="o">=</span><span class="n">spline</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyzn</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="splprep">
<h3>splprep<a class="headerlink" href="#splprep" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.splprep">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">splprep</code><span class="sig-paren">(</span><em>x</em>, <em>w=None</em>, <em>u=None</em>, <em>ub=None</em>, <em>ue=None</em>, <em>k=3</em>, <em>task=0</em>, <em>s=None</em>, <em>t=None</em>, <em>full_output=0</em>, <em>nest=None</em>, <em>per=0</em>, <em>quiet=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.splprep" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the B-spline representation of an N-dimensional curve.</p>
<p>Given a list of N rank-1 arrays, <cite>x</cite>, which represent a curve in
N-dimensional space parametrized by <cite>u</cite>, find a smooth approximating
spline curve g(<cite>u</cite>). Uses the FORTRAN routine parcur from FITPACK.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>A list of sample vector arrays representing the curve.</p>
</div></blockquote>
<p><strong>w</strong> : array_like, optional</p>
<blockquote>
<div><p>Strictly positive rank-1 array of weights the same length as <cite>x[0]</cite>.
The weights are used in computing the weighted least-squares spline
fit. If the errors in the <cite>x</cite> values have standard-deviation given by
the vector d, then <cite>w</cite> should be 1/d. Default is <code class="docutils literal"><span class="pre">ones(len(x[0]))</span></code>.</p>
</div></blockquote>
<p><strong>u</strong> : array_like, optional</p>
<blockquote>
<div><p>An array of parameter values. If not given, these values are
calculated automatically as <code class="docutils literal"><span class="pre">M</span> <span class="pre">=</span> <span class="pre">len(x[0])</span></code>, where</p>
<blockquote>
<div><p>v[0] = 0</p>
<p>v[i] = v[i-1] + distance(<cite>x[i]</cite>, <cite>x[i-1]</cite>)</p>
<p>u[i] = v[i] / v[M-1]</p>
</div></blockquote>
</div></blockquote>
<p><strong>ub, ue</strong> : int, optional</p>
<blockquote>
<div><p>The end-points of the parameters interval.  Defaults to
u[0] and u[-1].</p>
</div></blockquote>
<p><strong>k</strong> : int, optional</p>
<blockquote>
<div><p>Degree of the spline. Cubic splines are recommended.
Even values of <cite>k</cite> should be avoided especially with a small s-value.
<code class="docutils literal"><span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">k</span> <span class="pre">&lt;=</span> <span class="pre">5</span></code>, default is 3.</p>
</div></blockquote>
<p><strong>task</strong> : int, optional</p>
<blockquote>
<div><p>If task==0 (default), find t and c for a given smoothing factor, s.
If task==1, find t and c for another value of the smoothing factor, s.
There must have been a previous call with task=0 or task=1
for the same set of data.
If task=-1 find the weighted least square spline for a given set of
knots, t.</p>
</div></blockquote>
<p><strong>s</strong> : float, optional</p>
<blockquote>
<div><p>A smoothing condition.  The amount of smoothness is determined by
satisfying the conditions: <code class="docutils literal"><span class="pre">sum((w</span> <span class="pre">*</span> <span class="pre">(y</span> <span class="pre">-</span> <span class="pre">g))**2,axis=0)</span> <span class="pre">&lt;=</span> <span class="pre">s</span></code>,
where g(x) is the smoothed interpolation of (x,y).  The user can
use <cite>s</cite> to control the trade-off between closeness and smoothness
of fit.  Larger <cite>s</cite> means more smoothing while smaller values of <cite>s</cite>
indicate less smoothing. Recommended values of <cite>s</cite> depend on the
weights, w.  If the weights represent the inverse of the
standard-deviation of y, then a good <cite>s</cite> value should be found in
the range <code class="docutils literal"><span class="pre">(m-sqrt(2*m),m+sqrt(2*m))</span></code>, where m is the number of
data points in x, y, and w.</p>
</div></blockquote>
<p><strong>t</strong> : int, optional</p>
<blockquote>
<div><p>The knots needed for task=-1.</p>
</div></blockquote>
<p><strong>full_output</strong> : int, optional</p>
<blockquote>
<div><p>If non-zero, then return optional outputs.</p>
</div></blockquote>
<p><strong>nest</strong> : int, optional</p>
<blockquote>
<div><p>An over-estimate of the total number of knots of the spline to
help in determining the storage space.  By default nest=m/2.
Always large enough is nest=m+k+1.</p>
</div></blockquote>
<p><strong>per</strong> : int, optional</p>
<blockquote>
<div><p>If non-zero, data points are considered periodic with period
<code class="docutils literal"><span class="pre">x[m-1]</span> <span class="pre">-</span> <span class="pre">x[0]</span></code> and a smooth periodic spline approximation is
returned.  Values of <code class="docutils literal"><span class="pre">y[m-1]</span></code> and <code class="docutils literal"><span class="pre">w[m-1]</span></code> are not used.</p>
</div></blockquote>
<p><strong>quiet</strong> : int, optional</p>
<blockquote>
<div><p>Non-zero to suppress messages.
This parameter is deprecated; use standard Python warning filters
instead.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tck</strong> : tuple</p>
<blockquote>
<div><p>(t,c,k) a tuple containing the vector of knots, the B-spline
coefficients, and the degree of the spline.</p>
</div></blockquote>
<p><strong>u</strong> : array</p>
<blockquote>
<div><p>An array of the values of the parameter.</p>
</div></blockquote>
<p><strong>fp</strong> : float</p>
<blockquote>
<div><p>The weighted sum of squared residuals of the spline approximation.</p>
</div></blockquote>
<p><strong>ier</strong> : int</p>
<blockquote>
<div><p>An integer flag about splrep success.  Success is indicated
if ier&lt;=0. If ier in [1,2,3] an error occurred but was not raised.
Otherwise an error is raised.</p>
</div></blockquote>
<p><strong>msg</strong> : str</p>
<blockquote class="last">
<div><p>A message corresponding to the integer flag, ier.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">splrep</span></code>, <a class="reference internal" href="#dipy.tracking.metrics.splev" title="dipy.tracking.metrics.splev"><code class="xref py py-obj docutils literal"><span class="pre">splev</span></code></a>, <code class="xref py py-obj docutils literal"><span class="pre">sproot</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">spalde</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">splint</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">bisplrep</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">bisplev</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">UnivariateSpline</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">BivariateSpline</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">BSpline</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">make_interp_spline</span></code></p>
</div>
<p class="rubric">Notes</p>
<p>See <cite>splev</cite> for evaluation of the spline and its derivatives.
The number of dimensions N must be smaller than 11.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r498" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id45">[R498]</a></td><td>P. Dierckx, &#8220;Algorithms for smoothing data with periodic and
parametric splines, Computer Graphics and Image Processing&#8221;,
20 (1982) 171-184.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r499" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id46">[R499]</a></td><td>P. Dierckx, &#8220;Algorithms for smoothing data with periodic and
parametric splines&#8221;, report tw55, Dept. Computer Science,
K.U.Leuven, 1981.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r500" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id47">[R500]</a></td><td>P. Dierckx, &#8220;Curve and surface fitting with splines&#8221;, Monographs on
Numerical Analysis, Oxford University Press, 1993.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Generate a discretization of a limacon curve in the polar coordinates:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>         <span class="c1"># polar coords</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>    <span class="c1"># convert to cartesian</span>
</pre></div>
</div>
<p>And interpolate:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="k">import</span> <span class="n">splprep</span><span class="p">,</span> <span class="n">splev</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tck</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="n">splprep</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_points</span> <span class="o">=</span> <span class="n">splev</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">tck</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that (i) we force interpolation by using <cite>s=0</cite>,
(ii) the parameterization, <code class="docutils literal"><span class="pre">u</span></code>, is generated automatically.
Now plot the result:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;ro&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">new_points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">new_points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;r-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="startpoint">
<h3>startpoint<a class="headerlink" href="#startpoint" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.startpoint">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">startpoint</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.startpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>First point of the track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array, shape(N,3)</p>
<blockquote>
<div><p>Track.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>sp</strong> : array, shape(3,)</p>
<blockquote class="last">
<div><p>First track point.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.metrics</span> <span class="k">import</span> <span class="n">startpoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">=</span><span class="n">startpoint</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">==</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="winding">
<h3>winding<a class="headerlink" href="#winding" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.metrics.winding">
<code class="descclassname">dipy.tracking.metrics.</code><code class="descname">winding</code><span class="sig-paren">(</span><em>xyz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.metrics.winding" title="Permalink to this definition">¶</a></dt>
<dd><p>Total turning angle projected.</p>
<p>Project space curve to best fitting plane. Calculate the cumulative signed
angle between each line segment and the previous one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array-like shape (N,3)</p>
<blockquote>
<div><p>Array representing x,y,z of N points in a track.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>a</strong> : scalar</p>
<blockquote class="last">
<div><p>Total turning angle in degrees.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="arraysequence">
<h3><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a><a class="headerlink" href="#arraysequence" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.streamline.ArraySequence">
<em class="property">class </em><code class="descclassname">dipy.tracking.streamline.</code><code class="descname">ArraySequence</code><span class="sig-paren">(</span><em>iterable=None</em>, <em>buffer_size=4</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Sequence of ndarrays having variable first dimension sizes.</p>
<p>This is a container that can store multiple ndarrays where each ndarray
might have a different first dimension size but a <em>common</em> size for the
remaining dimensions.</p>
<p>More generally, an instance of <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> of length <span class="math">\(N\)</span> is
composed of <span class="math">\(N\)</span> ndarrays of shape <span class="math">\((d_1, d_2, ... d_D)\)</span> where <span class="math">\(d_1\)</span>
can vary in length between arrays but <span class="math">\((d_2, ..., d_D)\)</span> have to be the
same for every ndarray.</p>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.common_shape" title="dipy.tracking.streamline.ArraySequence.common_shape"><code class="xref py py-obj docutils literal"><span class="pre">common_shape</span></code></a></td>
<td>Matching shape of the elements in this array sequence.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.data" title="dipy.tracking.streamline.ArraySequence.data"><code class="xref py py-obj docutils literal"><span class="pre">data</span></code></a></td>
<td>Elements in this array sequence.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.is_array_sequence" title="dipy.tracking.streamline.ArraySequence.is_array_sequence"><code class="xref py py-obj docutils literal"><span class="pre">is_array_sequence</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.total_nb_rows" title="dipy.tracking.streamline.ArraySequence.total_nb_rows"><code class="xref py py-obj docutils literal"><span class="pre">total_nb_rows</span></code></a></td>
<td>Total number of rows in this array sequence.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.append" title="dipy.tracking.streamline.ArraySequence.append"><code class="xref py py-obj docutils literal"><span class="pre">append</span></code></a>(element[,&nbsp;cache_build])</td>
<td>Appends <cite>element</cite> to this array sequence.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.copy" title="dipy.tracking.streamline.ArraySequence.copy"><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code></a>()</td>
<td>Creates a copy of this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.extend" title="dipy.tracking.streamline.ArraySequence.extend"><code class="xref py py-obj docutils literal"><span class="pre">extend</span></code></a>(elements)</td>
<td>Appends all <cite>elements</cite> to this array sequence.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.finalize_append" title="dipy.tracking.streamline.ArraySequence.finalize_append"><code class="xref py py-obj docutils literal"><span class="pre">finalize_append</span></code></a>()</td>
<td>Finalize process of appending several elements to <cite>self</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.load" title="dipy.tracking.streamline.ArraySequence.load"><code class="xref py py-obj docutils literal"><span class="pre">load</span></code></a>(filename)</td>
<td>Loads a <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object from a .npz file.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.save" title="dipy.tracking.streamline.ArraySequence.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>(filename)</td>
<td>Saves this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object to a .npz file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.shrink_data" title="dipy.tracking.streamline.ArraySequence.shrink_data"><code class="xref py py-obj docutils literal"><span class="pre">shrink_data</span></code></a>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>iterable=None</em>, <em>buffer_size=4</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize array sequence instance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>iterable</strong> : None or iterable or <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a>, optional</p>
<blockquote>
<div><p>If None, create an empty <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object.
If iterable, create a <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object initialized
from array-like objects yielded by the iterable.
If <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a>, create a view (no memory is allocated).
For an actual copy use <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.copy" title="dipy.tracking.streamline.ArraySequence.copy"><code class="xref py py-meth docutils literal"><span class="pre">copy()</span></code></a> instead.</p>
</div></blockquote>
<p><strong>buffer_size</strong> : float, optional</p>
<blockquote class="last">
<div><p>Size (in Mb) for memory allocation when <cite>iterable</cite> is a generator.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>element</em>, <em>cache_build=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends <cite>element</cite> to this array sequence.</p>
<p>Append can be a lot faster if it knows that it is appending several
elements instead of a single element.  In that case it can cache the
parameters it uses between append operations, in a &#8220;build cache&#8221;.  To
tell append to do this, use <code class="docutils literal"><span class="pre">cache_build=True</span></code>.  If you use
<code class="docutils literal"><span class="pre">cache_build=True</span></code>, you need to finalize the append operations with
<a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.finalize_append" title="dipy.tracking.streamline.ArraySequence.finalize_append"><code class="xref py py-meth docutils literal"><span class="pre">finalize_append()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>element</strong> : ndarray</p>
<blockquote>
<div><p>Element to append. The shape must match already inserted elements
shape except for the first dimension.</p>
</div></blockquote>
<p><strong>cache_build</strong> : {False, True}</p>
<blockquote>
<div><p>Whether to save the build cache from this append routine.  If True,
append can assume it is the only player updating <cite>self</cite>, and the
caller must finalize <cite>self</cite> after all append operations, with
<code class="docutils literal"><span class="pre">self.finalize_append()</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If you need to add multiple elements you should consider
<cite>ArraySequence.extend</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.streamline.ArraySequence.common_shape">
<code class="descname">common_shape</code><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.common_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Matching shape of the elements in this array sequence.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>seq_copy</strong> : <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> instance</p>
<blockquote class="last">
<div><p>Copy of <cite>self</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>We do not simply deepcopy this object because we have a chance to use
less memory. For example, if the array sequence being copied is the
result of a slicing operation on an array sequence.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.streamline.ArraySequence.data">
<code class="descname">data</code><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Elements in this array sequence.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>elements</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends all <cite>elements</cite> to this array sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>elements</strong> : iterable of ndarrays or <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object</p>
<blockquote>
<div><p>If iterable of ndarrays, each ndarray will be concatenated along
the first dimension then appended to the data of this
ArraySequence.
If <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object, its data are simply appended to
the data of this ArraySequence.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The shape of the elements to be added must match the one of the data of
this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> except for the first dimension.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.finalize_append">
<code class="descname">finalize_append</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.finalize_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize process of appending several elements to <cite>self</cite></p>
<p><a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.append" title="dipy.tracking.streamline.ArraySequence.append"><code class="xref py py-meth docutils literal"><span class="pre">append()</span></code></a> can be a lot faster if it knows that it is appending
several elements instead of a single element.  To tell the append
method this is the case, use <code class="docutils literal"><span class="pre">cache_build=True</span></code>.  This method
finalizes the series of append operations after a call to
<a class="reference internal" href="#dipy.tracking.streamline.ArraySequence.append" title="dipy.tracking.streamline.ArraySequence.append"><code class="xref py py-meth docutils literal"><span class="pre">append()</span></code></a> with <code class="docutils literal"><span class="pre">cache_build=True</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.streamline.ArraySequence.is_array_sequence">
<code class="descname">is_array_sequence</code><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.is_array_sequence" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="dipy.tracking.streamline.ArraySequence.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object from a .npz file.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object to a .npz file.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.ArraySequence.shrink_data">
<code class="descname">shrink_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.shrink_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.streamline.ArraySequence.total_nb_rows">
<code class="descname">total_nb_rows</code><a class="headerlink" href="#dipy.tracking.streamline.ArraySequence.total_nb_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Total number of rows in this array sequence.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="looseversion">
<h3><a class="reference internal" href="#dipy.tracking.streamline.LooseVersion" title="dipy.tracking.streamline.LooseVersion"><code class="xref py py-class docutils literal"><span class="pre">LooseVersion</span></code></a><a class="headerlink" href="#looseversion" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.streamline.LooseVersion">
<em class="property">class </em><code class="descclassname">dipy.tracking.streamline.</code><code class="descname">LooseVersion</code><span class="sig-paren">(</span><em>vstring=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.LooseVersion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">distutils.version.Version</span></code></p>
<p>Version numbering for anarchists and software realists.
Implements the standard interface for version number classes as
described above.  A version number consists of a series of numbers,
separated by either periods or strings of letters.  When comparing
version numbers, the numeric components will be compared
numerically, and the alphabetic components lexically.  The following
are all valid version numbers, in no particular order:</p>
<blockquote>
<div>1.5.1
1.5.2b2
161
3.10a
8.02
3.4j
1996.07.12
3.2.pl0
3.1.1.6
2g6
11g
0.960923
2.2beta29
1.13++
5.5.kw
2.0b1pl0</div></blockquote>
<p>In fact, there is no such thing as an invalid version number under
this scheme; the rules for comparison are simple and predictable,
but may not always give the results you want (for some definition
of &#8220;want&#8221;).</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.LooseVersion.parse" title="dipy.tracking.streamline.LooseVersion.parse"><code class="xref py py-obj docutils literal"><span class="pre">parse</span></code></a>(vstring)</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.streamline.LooseVersion.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>vstring=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.LooseVersion.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.streamline.LooseVersion.component_re">
<code class="descname">component_re</code><em class="property"> = re.compile('(\\d+ | [a-z]+ | \\.)', re.VERBOSE)</em><a class="headerlink" href="#dipy.tracking.streamline.LooseVersion.component_re" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.LooseVersion.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>vstring</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.LooseVersion.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="id48">
<h3><a class="reference internal" href="#dipy.tracking.streamline.Streamlines" title="dipy.tracking.streamline.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">Streamlines</span></code></a><a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.streamline.Streamlines">
<em class="property">class </em><code class="descclassname">dipy.tracking.streamline.</code><code class="descname">Streamlines</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.Streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nibabel.streamlines.array_sequence.ArraySequence</span></code></p>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">common_shape</span></code></td>
<td>Matching shape of the elements in this array sequence.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">data</span></code></td>
<td>Elements in this array sequence.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">is_array_sequence</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">total_nb_rows</span></code></td>
<td>Total number of rows in this array sequence.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.Streamlines.append" title="dipy.tracking.streamline.Streamlines.append"><code class="xref py py-obj docutils literal"><span class="pre">append</span></code></a>(element[,&nbsp;cache_build])</td>
<td>Appends <cite>element</cite> to this array sequence.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code>()</td>
<td>Creates a copy of this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.tracking.streamline.Streamlines.extend" title="dipy.tracking.streamline.Streamlines.extend"><code class="xref py py-obj docutils literal"><span class="pre">extend</span></code></a>(elements)</td>
<td>Appends all <cite>elements</cite> to this array sequence.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.streamline.Streamlines.finalize_append" title="dipy.tracking.streamline.Streamlines.finalize_append"><code class="xref py py-obj docutils literal"><span class="pre">finalize_append</span></code></a>()</td>
<td>Finalize process of appending several elements to <cite>self</cite> <a class="reference internal" href="#dipy.tracking.streamline.Streamlines.append" title="dipy.tracking.streamline.Streamlines.append"><code class="xref py py-meth docutils literal"><span class="pre">append()</span></code></a> can be a lot faster if it knows that it is appending several elements instead of a single element.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">load</span></code>(filename)</td>
<td>Loads a <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object from a .npz file.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">save</span></code>(filename)</td>
<td>Saves this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object to a .npz file.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">shrink_data</span></code>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.streamline.Streamlines.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.Streamlines.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.Streamlines.append">
<code class="descname">append</code><span class="sig-paren">(</span><em>element</em>, <em>cache_build=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.Streamlines.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends <cite>element</cite> to this array sequence.
Append can be a lot faster if it knows that it is appending several
elements instead of a single element.  In that case it can cache the
parameters it uses between append operations, in a &#8220;build cache&#8221;.  To
tell append to do this, use <code class="docutils literal"><span class="pre">cache_build=True</span></code>.  If you use
<code class="docutils literal"><span class="pre">cache_build=True</span></code>, you need to finalize the append operations with
<a class="reference internal" href="#dipy.tracking.streamline.Streamlines.finalize_append" title="dipy.tracking.streamline.Streamlines.finalize_append"><code class="xref py py-meth docutils literal"><span class="pre">finalize_append()</span></code></a>.
Parameters
&#8212;&#8212;&#8212;-
element : ndarray</p>
<blockquote>
<div>Element to append. The shape must match already inserted elements
shape except for the first dimension.</div></blockquote>
<dl class="docutils">
<dt>cache_build <span class="classifier-delimiter">:</span> <span class="classifier">{False, True}</span></dt>
<dd>Whether to save the build cache from this append routine.  If True,
append can assume it is the only player updating <cite>self</cite>, and the
caller must finalize <cite>self</cite> after all append operations, with
<code class="docutils literal"><span class="pre">self.finalize_append()</span></code>.</dd>
</dl>
<p>None
Notes
&#8212;&#8211;
If you need to add multiple elements you should consider
<cite>ArraySequence.extend</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.Streamlines.extend">
<code class="descname">extend</code><span class="sig-paren">(</span><em>elements</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.Streamlines.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends all <cite>elements</cite> to this array sequence.
Parameters
&#8212;&#8212;&#8212;-
elements : iterable of ndarrays or <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object</p>
<blockquote>
<div>If iterable of ndarrays, each ndarray will be concatenated along
the first dimension then appended to the data of this
ArraySequence.
If <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> object, its data are simply appended to
the data of this ArraySequence.</div></blockquote>
<p>None
Notes
&#8212;&#8211;
The shape of the elements to be added must match the one of the data of
this <a class="reference internal" href="#dipy.tracking.streamline.ArraySequence" title="dipy.tracking.streamline.ArraySequence"><code class="xref py py-class docutils literal"><span class="pre">ArraySequence</span></code></a> except for the first dimension.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.streamline.Streamlines.finalize_append">
<code class="descname">finalize_append</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.Streamlines.finalize_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize process of appending several elements to <cite>self</cite>
<a class="reference internal" href="#dipy.tracking.streamline.Streamlines.append" title="dipy.tracking.streamline.Streamlines.append"><code class="xref py py-meth docutils literal"><span class="pre">append()</span></code></a> can be a lot faster if it knows that it is appending
several elements instead of a single element.  To tell the append
method this is the case, use <code class="docutils literal"><span class="pre">cache_build=True</span></code>.  This method
finalizes the series of append operations after a call to
<a class="reference internal" href="#dipy.tracking.streamline.Streamlines.append" title="dipy.tracking.streamline.Streamlines.append"><code class="xref py py-meth docutils literal"><span class="pre">append()</span></code></a> with <code class="docutils literal"><span class="pre">cache_build=True</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="apply-affine">
<h3>apply_affine<a class="headerlink" href="#apply-affine" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.apply_affine">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">apply_affine</code><span class="sig-paren">(</span><em>aff</em>, <em>pts</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.apply_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply affine matrix <cite>aff</cite> to points <cite>pts</cite></p>
<p>Returns result of application of <cite>aff</cite> to the <em>right</em> of <cite>pts</cite>.  The
coordinate dimension of <cite>pts</cite> should be the last.</p>
<p>For the 3D case, <cite>aff</cite> will be shape (4,4) and <cite>pts</cite> will have final axis
length 3 - maybe it will just be N by 3. The return value is the
transformed points, in this case:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">],</span> <span class="n">pts</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">transformed_pts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<p>This routine is more general than 3D, in that <cite>aff</cite> can have any shape
(N,N), and <cite>pts</cite> can have any shape, as long as the last dimension is for
the coordinates, and is therefore length N-1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>aff</strong> : (N, N) array-like</p>
<blockquote>
<div><p>Homogenous affine, for 3D points, will be 4 by 4. Contrary to first
appearance, the affine will be applied on the left of <cite>pts</cite>.</p>
</div></blockquote>
<p><strong>pts</strong> : (..., N-1) array-like</p>
<blockquote>
<div><p>Points, where the last dimension contains the coordinates of each
point.  For 3D, the last dimension will be length 3.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>transformed_pts</strong> : (..., N-1) array</p>
<blockquote class="last">
<div><p>transformed points</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aff</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">12</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_affine</span><span class="p">(</span><span class="n">aff</span><span class="p">,</span> <span class="n">pts</span><span class="p">)</span> 
<span class="go">array([[14, 14, 24],</span>
<span class="go">       [16, 17, 28],</span>
<span class="go">       [20, 23, 36],</span>
<span class="go">       [24, 29, 44]]...)</span>
</pre></div>
</div>
<p>Just to show that in the simple 3D case, it is equivalent to:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">],</span> <span class="n">pts</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">T</span> 
<span class="go">array([[14, 14, 24],</span>
<span class="go">       [16, 17, 28],</span>
<span class="go">       [20, 23, 36],</span>
<span class="go">       [24, 29, 44]]...)</span>
</pre></div>
</div>
<p>But <cite>pts</cite> can be a more complicated shape:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pts</span> <span class="o">=</span> <span class="n">pts</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_affine</span><span class="p">(</span><span class="n">aff</span><span class="p">,</span> <span class="n">pts</span><span class="p">)</span> 
<span class="go">array([[[14, 14, 24],</span>
<span class="go">        [16, 17, 28]],</span>

<span class="go">       [[20, 23, 36],</span>
<span class="go">        [24, 29, 44]]]...)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="cdist">
<h3>cdist<a class="headerlink" href="#cdist" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.cdist">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">cdist</code><span class="sig-paren">(</span><em>XA</em>, <em>XB</em>, <em>metric='euclidean'</em>, <em>p=None</em>, <em>V=None</em>, <em>VI=None</em>, <em>w=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.cdist" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes distance between each pair of the two collections of inputs.</p>
<p>See Notes for common calling conventions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>XA</strong> : ndarray</p>
<blockquote>
<div><p>An <span class="math">\(m_A\)</span> by <span class="math">\(n\)</span> array of <span class="math">\(m_A\)</span>
original observations in an <span class="math">\(n\)</span>-dimensional space.
Inputs are converted to float type.</p>
</div></blockquote>
<p><strong>XB</strong> : ndarray</p>
<blockquote>
<div><p>An <span class="math">\(m_B\)</span> by <span class="math">\(n\)</span> array of <span class="math">\(m_B\)</span>
original observations in an <span class="math">\(n\)</span>-dimensional space.
Inputs are converted to float type.</p>
</div></blockquote>
<p><strong>metric</strong> : str or callable, optional</p>
<blockquote>
<div><p>The distance metric to use.  If a string, the distance function can be
&#8216;braycurtis&#8217;, &#8216;canberra&#8217;, &#8216;chebyshev&#8217;, &#8216;cityblock&#8217;, &#8216;correlation&#8217;,
&#8216;cosine&#8217;, &#8216;dice&#8217;, &#8216;euclidean&#8217;, &#8216;hamming&#8217;, &#8216;jaccard&#8217;, &#8216;kulsinski&#8217;,
&#8216;mahalanobis&#8217;, &#8216;matching&#8217;, &#8216;minkowski&#8217;, &#8216;rogerstanimoto&#8217;, &#8216;russellrao&#8217;,
&#8216;seuclidean&#8217;, &#8216;sokalmichener&#8217;, &#8216;sokalsneath&#8217;, &#8216;sqeuclidean&#8217;,
&#8216;wminkowski&#8217;, &#8216;yule&#8217;.</p>
</div></blockquote>
<p><strong>p</strong> : double, optional</p>
<blockquote>
<div><p>The p-norm to apply
Only for Minkowski, weighted and unweighted. Default: 2.</p>
</div></blockquote>
<p><strong>w</strong> : ndarray, optional</p>
<blockquote>
<div><p>The weight vector.
Only for weighted Minkowski. Mandatory</p>
</div></blockquote>
<p><strong>V</strong> : ndarray, optional</p>
<blockquote>
<div><p>The variance vector
Only for standardized Euclidean. Default: var(vstack([XA, XB]), axis=0, ddof=1)</p>
</div></blockquote>
<p><strong>VI</strong> : ndarray, optional</p>
<blockquote>
<div><p>The inverse of the covariance matrix
Only for Mahalanobis. Default: inv(cov(vstack([XA, XB]).T)).T</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>Y</strong> : ndarray</p>
<blockquote>
<div><p>A <span class="math">\(m_A\)</span> by <span class="math">\(m_B\)</span> distance matrix is returned.
For each <span class="math">\(i\)</span> and <span class="math">\(j\)</span>, the metric
<code class="docutils literal"><span class="pre">dist(u=XA[i],</span> <span class="pre">v=XB[j])</span></code> is computed and stored in the
<span class="math">\(ij\)</span> th entry.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>An exception is thrown if <cite>XA</cite> and <cite>XB</cite> do not have
the same number of columns.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The following are common calling conventions:</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'euclidean')</span></code></p>
<p>Computes the distance between <span class="math">\(m\)</span> points using
Euclidean distance (2-norm) as the distance metric between the
points. The points are arranged as <span class="math">\(m\)</span>
<span class="math">\(n\)</span>-dimensional row vectors in the matrix X.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'minkowski',</span> <span class="pre">p)</span></code></p>
<p>Computes the distances using the Minkowski distance
<span class="math">\(||u-v||_p\)</span> (<span class="math">\(p\)</span>-norm) where <span class="math">\(p \geq 1\)</span>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'cityblock')</span></code></p>
<p>Computes the city block or Manhattan distance between the
points.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'seuclidean',</span> <span class="pre">V=None)</span></code></p>
<p>Computes the standardized Euclidean distance. The standardized
Euclidean distance between two n-vectors <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is</p>
<div class="math">
\[\sqrt{\sum {(u_i-v_i)^2 / V[x_i]}}.\]</div>
<p>V is the variance vector; V[i] is the variance computed over all
the i&#8217;th components of the points. If not passed, it is
automatically computed.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'sqeuclidean')</span></code></p>
<p>Computes the squared Euclidean distance <span class="math">\(||u-v||_2^2\)</span> between
the vectors.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'cosine')</span></code></p>
<p>Computes the cosine distance between vectors u and v,</p>
<div class="math">
\[1 - \frac{u \cdot v}
         {{||u||}_2 {||v||}_2}\]</div>
<p>where <span class="math">\(||*||_2\)</span> is the 2-norm of its argument <code class="docutils literal"><span class="pre">*</span></code>, and
<span class="math">\(u \cdot v\)</span> is the dot product of <span class="math">\(u\)</span> and <span class="math">\(v\)</span>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'correlation')</span></code></p>
<p>Computes the correlation distance between vectors u and v. This is</p>
<div class="math">
\[1 - \frac{(u - \bar{u}) \cdot (v - \bar{v})}
         {{||(u - \bar{u})||}_2 {||(v - \bar{v})||}_2}\]</div>
<p>where <span class="math">\(\bar{v}\)</span> is the mean of the elements of vector v,
and <span class="math">\(x \cdot y\)</span> is the dot product of <span class="math">\(x\)</span> and <span class="math">\(y\)</span>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'hamming')</span></code></p>
<p>Computes the normalized Hamming distance, or the proportion of
those vector elements between two n-vectors <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code>
which disagree. To save memory, the matrix <code class="docutils literal"><span class="pre">X</span></code> can be of type
boolean.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'jaccard')</span></code></p>
<p>Computes the Jaccard distance between the points. Given two
vectors, <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code>, the Jaccard distance is the
proportion of those elements <code class="docutils literal"><span class="pre">u[i]</span></code> and <code class="docutils literal"><span class="pre">v[i]</span></code> that
disagree where at least one of them is non-zero.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'chebyshev')</span></code></p>
</li>
</ol>
<blockquote>
<div><p>Computes the Chebyshev distance between the points. The
Chebyshev distance between two n-vectors <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is the
maximum norm-1 distance between their respective elements. More
precisely, the distance is given by</p>
<div class="math">
\[d(u,v) = \max_i {|u_i-v_i|}.\]</div>
</div></blockquote>
<ol class="arabic simple" start="11">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'canberra')</span></code></li>
</ol>
<blockquote>
<div><p>Computes the Canberra distance between the points. The
Canberra distance between two points <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is</p>
<div class="math">
\[d(u,v) = \sum_i \frac{|u_i-v_i|}
                     {|u_i|+|v_i|}.\]</div>
</div></blockquote>
<ol class="arabic simple" start="12">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'braycurtis')</span></code></li>
</ol>
<blockquote>
<div><p>Computes the Bray-Curtis distance between the points. The
Bray-Curtis distance between two points <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is</p>
<div class="math">
\[d(u,v) = \frac{\sum_i (|u_i-v_i|)}
              {\sum_i (|u_i+v_i|)}\]</div>
</div></blockquote>
<ol class="arabic simple" start="13">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'mahalanobis',</span> <span class="pre">VI=None)</span></code></li>
</ol>
<blockquote>
<div>Computes the Mahalanobis distance between the points. The
Mahalanobis distance between two points <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is
<span class="math">\(\sqrt{(u-v)(1/V)(u-v)^T}\)</span> where <span class="math">\((1/V)\)</span> (the <code class="docutils literal"><span class="pre">VI</span></code>
variable) is the inverse covariance. If <code class="docutils literal"><span class="pre">VI</span></code> is not None,
<code class="docutils literal"><span class="pre">VI</span></code> will be used as the inverse covariance matrix.</div></blockquote>
<ol class="arabic simple" start="14">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'yule')</span></code></li>
</ol>
<blockquote>
<div>Computes the Yule distance between the boolean
vectors. (see <cite>yule</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="15">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'matching')</span></code></li>
</ol>
<blockquote>
<div>Synonym for &#8216;hamming&#8217;.</div></blockquote>
<ol class="arabic simple" start="16">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'dice')</span></code></li>
</ol>
<blockquote>
<div>Computes the Dice distance between the boolean vectors. (see
<cite>dice</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="17">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'kulsinski')</span></code></li>
</ol>
<blockquote>
<div>Computes the Kulsinski distance between the boolean
vectors. (see <cite>kulsinski</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="18">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'rogerstanimoto')</span></code></li>
</ol>
<blockquote>
<div>Computes the Rogers-Tanimoto distance between the boolean
vectors. (see <cite>rogerstanimoto</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="19">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'russellrao')</span></code></li>
</ol>
<blockquote>
<div>Computes the Russell-Rao distance between the boolean
vectors. (see <cite>russellrao</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="20">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'sokalmichener')</span></code></li>
</ol>
<blockquote>
<div>Computes the Sokal-Michener distance between the boolean
vectors. (see <cite>sokalmichener</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="21">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'sokalsneath')</span></code></li>
</ol>
<blockquote>
<div>Computes the Sokal-Sneath distance between the vectors. (see
<cite>sokalsneath</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="22">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'wminkowski')</span></code></li>
</ol>
<blockquote>
<div>Computes the weighted Minkowski distance between the
vectors. (see <cite>wminkowski</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="23">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">f)</span></code></li>
</ol>
<blockquote>
<div><p>Computes the distance between all pairs of vectors in X
using the user supplied 2-arity function f. For example,
Euclidean distance between the vectors could be computed
as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">XB</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(((</span><span class="n">u</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()))</span>
</pre></div>
</div>
<p>Note that you should avoid passing a reference to one of
the distance functions defined in this library. For example,:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">XB</span><span class="p">,</span> <span class="n">sokalsneath</span><span class="p">)</span>
</pre></div>
</div>
<p>would calculate the pair-wise distances between the vectors in
X using the Python function <cite>sokalsneath</cite>. This would result in
sokalsneath being called <span class="math">\({n \choose 2}\)</span> times, which
is inefficient. Instead, the optimized C version is more
efficient, and we call it using the following syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">XB</span><span class="p">,</span> <span class="s1">&#39;sokalsneath&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="rubric">Examples</p>
<p>Find the Euclidean distances between four 2-D coordinates:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="k">import</span> <span class="n">distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">35.0456</span><span class="p">,</span> <span class="o">-</span><span class="mf">85.2672</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mf">35.1174</span><span class="p">,</span> <span class="o">-</span><span class="mf">89.9711</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mf">35.9728</span><span class="p">,</span> <span class="o">-</span><span class="mf">83.9422</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mf">36.1667</span><span class="p">,</span> <span class="o">-</span><span class="mf">86.7833</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span><span class="o">.</span><span class="n">cdist</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="s1">&#39;euclidean&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.    ,  4.7044,  1.6172,  1.8856],</span>
<span class="go">       [ 4.7044,  0.    ,  6.0893,  3.3561],</span>
<span class="go">       [ 1.6172,  6.0893,  0.    ,  2.8477],</span>
<span class="go">       [ 1.8856,  3.3561,  2.8477,  0.    ]])</span>
</pre></div>
</div>
<p>Find the Manhattan distance from a 3-D point to the corners of the unit
cube:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span><span class="o">.</span><span class="n">cdist</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;cityblock&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7],</span>
<span class="go">       [ 0.9],</span>
<span class="go">       [ 1.3],</span>
<span class="go">       [ 1.5],</span>
<span class="go">       [ 1.5],</span>
<span class="go">       [ 1.7],</span>
<span class="go">       [ 2.1],</span>
<span class="go">       [ 2.3]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="center-streamlines">
<h3>center_streamlines<a class="headerlink" href="#center-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.center_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">center_streamlines</code><span class="sig-paren">(</span><em>streamlines</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.center_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Move streamlines to the origin</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>List of 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_streamlines</strong> : list</p>
<blockquote>
<div><p>List of 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
<p><strong>inv_shift</strong> : ndarray</p>
<blockquote class="last">
<div><p>Translation in x,y,z to go back in the initial position</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id49">
<h3>compress_streamlines<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.compress_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">compress_streamlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.compress_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Compress streamlines by linearization as in <a class="reference internal" href="#id58" id="id50">[Presseau15]</a>.</p>
<p>The compression consists in merging consecutive segments that are
nearly collinear. The merging is achieved by removing the point the two
segments have in common.</p>
<p>The linearization process <a class="reference internal" href="#id58" id="id51">[Presseau15]</a> ensures that every point being
removed are within a certain margin (in mm) of the resulting streamline.
Recommendations for setting this margin can be found in <a class="reference internal" href="#id58" id="id52">[Presseau15]</a>
(in which they called it tolerance error).</p>
<p>The compression also ensures that two consecutive points won&#8217;t be too far
from each other (precisely less or equal than <a href="#id53"><span class="problematic" id="id54">`</span></a>max_segment_length`mm).
This is a tradeoff to speed up the linearization process <a class="reference internal" href="#id59" id="id55">[Rheault15]</a>. A low
value will result in a faster linearization but low compression, whereas
a high value will result in a slower linearization but high compression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : one or a list of array-like of shape (N,3)</p>
<blockquote>
<div><p>Array representing x,y,z of N points in a streamline.</p>
</div></blockquote>
<p><strong>tol_error</strong> : float (optional)</p>
<blockquote>
<div><p>Tolerance error in mm (default: 0.01). A rule of thumb is to set it
to 0.01mm for deterministic streamlines and 0.1mm for probabilitic
streamlines.</p>
</div></blockquote>
<p><strong>max_segment_length</strong> : float (optional)</p>
<blockquote>
<div><p>Maximum length in mm of any given segment produced by the compression.
The default is 10mm. (In <a class="reference internal" href="#id58" id="id56">[Presseau15]</a>, they used a value of <cite>np.inf</cite>).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>compressed_streamlines</strong> : one or a list of array-like</p>
<blockquote class="last">
<div><p>Results of the linearization process.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Be aware that compressed streamlines have variable step sizes. One needs to
be careful when computing streamlines-based metrics <a class="reference internal" href="#id60" id="id57">[Houde15]</a>.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="id58" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Presseau15]</td><td>Presseau C. et al., A new compression format for fiber
tracking datasets, NeuroImage, no 109, 73-83, 2015.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="id59" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rheault15]</td><td>Rheault F. et al., Real Time Interaction with Millions of
Streamlines, ISMRM, 2015.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="id60" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Houde15]</td><td>Houde J.-C. et al. How to Avoid Biased Streamlines-Based
Metrics for Streamlines with Variable Step Sizes, ISMRM, 2015.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="k">import</span> <span class="n">compress_streamlines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># One streamline: a wiggling line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">+=</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">rng</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_streamline</span> <span class="o">=</span> <span class="n">compress_streamlines</span><span class="p">(</span><span class="n">streamline</span><span class="p">,</span> <span class="n">tol_error</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">streamline</span><span class="p">)</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">c_streamline</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Multiple streamlines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_streamlines</span> <span class="o">=</span> <span class="n">compress_streamlines</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">tol_error</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streamlines</span><span class="p">]</span>
<span class="go">[100, 50]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">c_streamlines</span><span class="p">]</span>
<span class="go">[10, 7]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="deepcopy">
<h3>deepcopy<a class="headerlink" href="#deepcopy" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.deepcopy">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">deepcopy</code><span class="sig-paren">(</span><em>x</em>, <em>memo=None</em>, <em>_nil=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.deepcopy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deep copy operation on arbitrary Python objects.</p>
<p>See the module&#8217;s __doc__ string for more info.</p>
</dd></dl>

</div>
<div class="section" id="deform-streamlines">
<h3>deform_streamlines<a class="headerlink" href="#deform-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.deform_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">deform_streamlines</code><span class="sig-paren">(</span><em>streamlines</em>, <em>deform_field</em>, <em>stream_to_current_grid</em>, <em>current_grid_to_world</em>, <em>stream_to_ref_grid</em>, <em>ref_grid_to_world</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.deform_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply deformation field to streamlines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>List of 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
<p><strong>deform_field</strong> : 4D numpy array</p>
<blockquote>
<div><p>x,y,z displacements stored in volume, shape[-1]==3</p>
</div></blockquote>
<p><strong>stream_to_current_grid</strong> : array, (4, 4)</p>
<blockquote>
<div><p>transform matrix voxmm space to original grid space</p>
</div></blockquote>
<p><strong>current_grid_to_world</strong> : array (4, 4)</p>
<blockquote>
<div><p>transform matrix original grid space to world coordinates</p>
</div></blockquote>
<p><strong>stream_to_ref_grid</strong> : array (4, 4)</p>
<blockquote>
<div><p>transform matrix voxmm space to new grid space</p>
</div></blockquote>
<p><strong>ref_grid_to_world</strong> : array(4, 4)</p>
<blockquote>
<div><p>transform matrix new grid space to world coordinates</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_streamlines</strong> : list</p>
<blockquote class="last">
<div><p>List of the transformed 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dist-to-corner">
<h3>dist_to_corner<a class="headerlink" href="#dist-to-corner" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.dist_to_corner">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">dist_to_corner</code><span class="sig-paren">(</span><em>affine</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.dist_to_corner" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the maximal distance from the center to a corner of a voxel,
given an affine</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>affine</strong> : 4 by 4 array.</p>
<blockquote>
<div><p>The spatial transformation from the measurement to the scanner space.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dist: float</p>
<blockquote class="last">
<div><p>The maximal distance to the corner of a voxel, given voxel size encoded
in the affine.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id64">
<h3>length<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.length">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">length</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Euclidean length of streamlines</p>
<p>Length is in mm only if streamlines are expressed in world coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : ndarray or a list or <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a></p>
<blockquote>
<div><p>If ndarray, must have shape (N,3) where N is the number of points
of the streamline.
If list, each item must be ndarray shape (Ni,3) where Ni is the number
of points of streamline i.
If <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a>, its <cite>common_shape</cite> must be 3.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>lengths</strong> : scalar or ndarray shape (N,)</p>
<blockquote class="last">
<div><p>If there is only one streamline, a scalar representing the length of the
streamline.
If there are several streamlines, ndarray containing the length of every
streamline.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="k">import</span> <span class="n">length</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">([</span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">**</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">streamline</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_length</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">expected_length</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">expected_length</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">length</span><span class="p">(</span><span class="n">streamlines</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">length</span><span class="p">(</span><span class="n">streamlines</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">lengths</span><span class="p">,</span> <span class="n">expected_lengths</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">([])</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]))</span>
<span class="go">0.0</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="mul">
<h3>mul<a class="headerlink" href="#mul" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.mul">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">mul</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.mul" title="Permalink to this definition">¶</a></dt>
<dd><p>mul(a, b) &#8211; Same as a * b.</p>
</dd></dl>

</div>
<div class="section" id="nbytes">
<h3>nbytes<a class="headerlink" href="#nbytes" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.nbytes">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">nbytes</code><span class="sig-paren">(</span><em>streamlines</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.nbytes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="orient-by-rois">
<h3>orient_by_rois<a class="headerlink" href="#orient-by-rois" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.orient_by_rois">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">orient_by_rois</code><span class="sig-paren">(</span><em>streamlines</em>, <em>roi1</em>, <em>roi2</em>, <em>in_place=False</em>, <em>as_generator=False</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.orient_by_rois" title="Permalink to this definition">¶</a></dt>
<dd><p>Orient a set of streamlines according to a pair of ROIs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list or generator</p>
<blockquote>
<div><p>List or generator of 2d arrays of 3d coordinates. Each array contains
the xyz coordinates of a single streamline.</p>
</div></blockquote>
<p><strong>roi1, roi2</strong> : ndarray</p>
<blockquote>
<div><p>Binary masks designating the location of the regions of interest, or
coordinate arrays (n-by-3 array with ROI coordinate in each row).</p>
</div></blockquote>
<p><strong>in_place</strong> : bool</p>
<blockquote>
<div><p>Whether to make the change in-place in the original list
(and return a reference to the list), or to make a copy of the list
and return this copy, with the relevant streamlines reoriented.
Default: False.</p>
</div></blockquote>
<p><strong>as_generator</strong> : bool</p>
<blockquote>
<div><p>Whether to return a generator as output. Default: False</p>
</div></blockquote>
<p><strong>affine</strong> : ndarray</p>
<blockquote>
<div><p>Affine transformation from voxels to streamlines. Default: identity.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list or generator</p>
<blockquote class="last">
<div><p>The same 3D arrays as a list or generator, but reoriented with respect
to the ROIs</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">roi1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi1</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roi2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orient_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="n">roi1</span><span class="p">,</span> <span class="n">roi2</span><span class="p">)</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.]])]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reduce">
<h3>reduce<a class="headerlink" href="#reduce" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.reduce">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">reduce</code><span class="sig-paren">(</span><em>function</em>, <em>sequence</em><span class="optional">[</span>, <em>initial</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; value<a class="headerlink" href="#dipy.tracking.streamline.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a function of two arguments cumulatively to the items of a sequence,
from left to right, so as to reduce the sequence to a single value.
For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates
((((1+2)+3)+4)+5).  If initial is present, it is placed before the items
of the sequence in the calculation, and serves as a default when the
sequence is empty.</p>
</dd></dl>

</div>
<div class="section" id="relist-streamlines">
<h3>relist_streamlines<a class="headerlink" href="#relist-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.relist_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">relist_streamlines</code><span class="sig-paren">(</span><em>points</em>, <em>offsets</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.relist_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a representation of a set of streamlines as a large array and
an offsets array return the streamlines as a list of shorter arrays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>points</strong> : array</p>
<p><strong>offsets</strong> : array</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">streamlines: sequence</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="select-by-rois">
<h3>select_by_rois<a class="headerlink" href="#select-by-rois" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.select_by_rois">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">select_by_rois</code><span class="sig-paren">(</span><em>streamlines</em>, <em>rois</em>, <em>include</em>, <em>mode=None</em>, <em>affine=None</em>, <em>tol=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.select_by_rois" title="Permalink to this definition">¶</a></dt>
<dd><p>Select streamlines based on logical relations with several regions of
interest (ROIs). For example, select streamlines that pass near ROI1,
but only if they do not pass near ROI2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>A list of candidate streamlines for selection</p>
</div></blockquote>
<p><strong>rois</strong> : list or ndarray</p>
<blockquote>
<div><p>A list of 3D arrays, each with shape (x, y, z) corresponding to the
shape of the brain volume, or a 4D array with shape (n_rois, x, y,
z). Non-zeros in each volume are considered to be within the region</p>
</div></blockquote>
<p><strong>include</strong> : array or list</p>
<blockquote>
<div><p>A list or 1D array of boolean values marking inclusion or exclusion
criteria. If a streamline is near any of the inclusion ROIs, it
should evaluate to True, unless it is also near any of the exclusion
ROIs.</p>
</div></blockquote>
<p><strong>mode</strong> : string, optional</p>
<blockquote>
<div><p>One of {&#8220;any&#8221;, &#8220;all&#8221;, &#8220;either_end&#8221;, &#8220;both_end&#8221;}, where a streamline is
associated with an ROI if:</p>
<p>&#8220;any&#8221; : any point is within tol from ROI. Default.</p>
<p>&#8220;all&#8221; : all points are within tol from ROI.</p>
<p>&#8220;either_end&#8221; : either of the end-points is within tol from ROI</p>
<p>&#8220;both_end&#8221; : both end points are within tol from ROI.</p>
</div></blockquote>
<p><strong>affine</strong> : ndarray</p>
<blockquote>
<div><p>Affine transformation from voxels to streamlines. Default: identity.</p>
</div></blockquote>
<p><strong>tol</strong> : float</p>
<blockquote>
<div><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, the filtering criterion is set to True for
this streamline, otherwise False. Defaults to the distance between
the center of each voxel and the corner of the voxel.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">generator</p>
<blockquote class="last">
<div><p>Generates the streamlines to be included based on these criteria.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-func docutils literal"><span class="pre">dipy.tracking.utils.near_roi()</span></code></a>, <a class="reference internal" href="#dipy.tracking.utils.reduce_rois" title="dipy.tracking.utils.reduce_rois"><code class="xref py py-func docutils literal"><span class="pre">dipy.tracking.utils.reduce_rois()</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>The only operation currently possible is &#8220;(A or B or ...) and not (X or Y
or ...)&#8221;, where A, B are inclusion regions and X, Y are exclusion regions.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mf">1.9</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]]),</span>
<span class="gp">... </span>               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mask1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask1</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="c1"># The result is a generator</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">0.87</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;both_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask2</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selection</span> <span class="o">=</span> <span class="n">select_by_rois</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="p">[</span><span class="n">mask1</span><span class="p">,</span> <span class="n">mask2</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
<span class="gp">... </span>                           <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;both_end&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">tol</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
<span class="go">[array([[ 0. ,  0. ,  0.9],</span>
<span class="go">       [ 1.9,  0. ,  0. ]]), array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  1.],</span>
<span class="go">       [ 0.,  2.,  2.]])]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="select-random-set-of-streamlines">
<h3>select_random_set_of_streamlines<a class="headerlink" href="#select-random-set-of-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.select_random_set_of_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">select_random_set_of_streamlines</code><span class="sig-paren">(</span><em>streamlines</em>, <em>select</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.select_random_set_of_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a random set of streamlines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>List of 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
<p><strong>select</strong> : int</p>
<blockquote>
<div><p>Number of streamlines to select. If there are less streamlines
than <code class="docutils literal"><span class="pre">select</span></code> then <code class="docutils literal"><span class="pre">select=len(streamlines)</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>selected_streamlines</strong> : list</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The same streamline will not be selected twice.</p>
</dd></dl>

</div>
<div class="section" id="id65">
<h3>set_number_of_points<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.set_number_of_points">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">set_number_of_points</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.set_number_of_points" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Change the number of points of streamlines</dt>
<dd>(either by downsampling or upsampling)</dd>
</dl>
<p>Change the number of points of streamlines in order to obtain
<cite>nb_points</cite>-1 segments of equal length. Points of streamlines will be
modified along the curve.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : ndarray or a list or <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a></p>
<blockquote>
<div><p>If ndarray, must have shape (N,3) where N is the number of points
of the streamline.
If list, each item must be ndarray shape (Ni,3) where Ni is the number
of points of streamline i.
If <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a>, its <cite>common_shape</cite> must be 3.</p>
</div></blockquote>
<p><strong>nb_points</strong> : int</p>
<blockquote>
<div><p>integer representing number of points wanted along the curve.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_streamlines</strong> : ndarray or a list or <a class="reference internal" href="#dipy.tracking.Streamlines" title="dipy.tracking.Streamlines"><code class="xref py py-class docutils literal"><span class="pre">dipy.tracking.Streamlines</span></code></a></p>
<blockquote class="last">
<div><p>Results of the downsampling or upsampling process.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.tracking.streamline</span> <span class="k">import</span> <span class="n">set_number_of_points</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>One streamline, a semi-circle:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">*</span> <span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">streamline</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modified_streamline</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamline</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">modified_streamline</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Multiple streamlines:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">streamline</span><span class="p">,</span> <span class="n">streamline</span><span class="p">[::</span><span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_streamlines</span> <span class="o">=</span> <span class="n">set_number_of_points</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">streamlines</span><span class="p">]</span>
<span class="go">[100, 50]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">new_streamlines</span><span class="p">]</span>
<span class="go">[10, 10]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id66">
<h3>setup_test<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.setup_test">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">setup_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.setup_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</p>
<p>If imported into a file, nosetest will run this before any doctests.</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718">https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718</a>
<a class="reference external" href="https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495">https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495</a>
<a class="reference external" href="https://github.com/nipy/nibabel/pull/556">https://github.com/nipy/nibabel/pull/556</a></p>
</dd></dl>

</div>
<div class="section" id="streamline-near-roi">
<h3>streamline_near_roi<a class="headerlink" href="#streamline-near-roi" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.streamline_near_roi">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">streamline_near_roi</code><span class="sig-paren">(</span><em>streamline</em>, <em>roi_coords</em>, <em>tol</em>, <em>mode='any'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.streamline_near_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Is a streamline near an ROI.</p>
<p>Implements the inner loops of the <code class="xref py py-func docutils literal"><span class="pre">near_roi()</span></code> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : array, shape (N, 3)</p>
<blockquote>
<div><p>A single streamline</p>
</div></blockquote>
<p><strong>roi_coords</strong> : array, shape (M, 3)</p>
<blockquote>
<div><p>ROI coordinates transformed to the streamline coordinate frame.</p>
</div></blockquote>
<p><strong>tol</strong> : float</p>
<blockquote>
<div><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, this function returns True.</p>
</div></blockquote>
<p><strong>mode</strong> : string</p>
<blockquote>
<div><p>One of {&#8220;any&#8221;, &#8220;all&#8221;, &#8220;either_end&#8221;, &#8220;both_end&#8221;}, where return True
if:</p>
<p>&#8220;any&#8221; : any point is within tol from ROI.</p>
<p>&#8220;all&#8221; : all points are within tol from ROI.</p>
<p>&#8220;either_end&#8221; : either of the end-points is within tol from ROI</p>
<p>&#8220;both_end&#8221; : both end points are within tol from ROI.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>out</strong> : boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id67">
<h3>transform_streamlines<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.transform_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">transform_streamlines</code><span class="sig-paren">(</span><em>streamlines</em>, <em>mat</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.transform_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply affine transformation to streamlines</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>List of 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
<p><strong>mat</strong> : array, (4, 4)</p>
<blockquote>
<div><p>transformation matrix</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_streamlines</strong> : list</p>
<blockquote class="last">
<div><p>List of the transformed 2D ndarrays of shape[-1]==3</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="unlist-streamlines">
<h3>unlist_streamlines<a class="headerlink" href="#unlist-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.unlist_streamlines">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">unlist_streamlines</code><span class="sig-paren">(</span><em>streamlines</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.unlist_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the streamlines not as a list but as an array and an offset</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines: sequence</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>points</strong> : array</p>
<p class="last"><strong>offsets</strong> : array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="values-from-volume">
<h3>values_from_volume<a class="headerlink" href="#values-from-volume" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.values_from_volume">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">values_from_volume</code><span class="sig-paren">(</span><em>data</em>, <em>streamlines</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.values_from_volume" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract values of a scalar/vector along each streamline from a volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : 3D or 4D array</p>
<blockquote>
<div><p>Scalar (for 3D) and vector (for 4D) values to be extracted. For 4D
data, interpolation will be done on the 3 spatial dimensions in each
volume.</p>
</div></blockquote>
<p><strong>streamlines</strong> : ndarray or list</p>
<blockquote>
<div><p>If array, of shape (n_streamlines, n_nodes, 3)
If list, len(n_streamlines) with (n_nodes, 3) array in
each element of the list.</p>
</div></blockquote>
<p><strong>affine</strong> : ndarray, shape (4, 4)</p>
<blockquote class="last">
<div><p>Affine transformation from voxels (image coordinates) to streamlines.
Default: identity. For example, if no affine is provided and the first
coordinate of the first streamline is <code class="docutils literal"><span class="pre">[1,</span> <span class="pre">0,</span> <span class="pre">0]</span></code>, data[1, 0, 0]
would be returned as the value for that streamline coordinate</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Values are extracted from the image based on the 3D coordinates of the
nodes that comprise the points in the streamline, without any interpolation
into segments between the nodes. Using this function with streamlines that
have been resampled into a very small number of nodes will result in very
few values.</p>
</dd></dl>

</div>
<div class="section" id="id68">
<h3>warn<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.streamline.warn">
<code class="descclassname">dipy.tracking.streamline.</code><code class="descname">warn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.streamline.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning, or maybe ignore it or raise an exception.</p>
</dd></dl>

</div>
<div class="section" id="defaultdict">
<h3><a class="reference internal" href="#dipy.tracking.utils.defaultdict" title="dipy.tracking.utils.defaultdict"><code class="xref py py-class docutils literal"><span class="pre">defaultdict</span></code></a><a class="headerlink" href="#defaultdict" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.utils.defaultdict">
<em class="property">class </em><code class="descclassname">dipy.tracking.utils.</code><code class="descname">defaultdict</code><a class="headerlink" href="#dipy.tracking.utils.defaultdict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a></p>
<p>defaultdict(default_factory[, ...]) &#8211;&gt; dict with default factory</p>
<p>The default factory is called without arguments to produce
a new value when a key is not present, in __getitem__ only.
A defaultdict compares equal to a dict with the same items.
All remaining arguments are treated the same as if they were
passed to the dict constructor, including keyword arguments.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">clear</span></code>(()&nbsp;-&gt;&nbsp;None.&nbsp;&nbsp;Remove&nbsp;all&nbsp;items&nbsp;from&nbsp;D.)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.tracking.utils.defaultdict.copy" title="dipy.tracking.utils.defaultdict.copy"><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code></a>(()&nbsp;-&gt;&nbsp;a&nbsp;shallow&nbsp;copy&nbsp;of&nbsp;D.)</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">fromkeys</span></code></td>
<td>Returns a new dict with keys from iterable and values equal to value.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get</span></code>((k[,d])&nbsp;-&gt;&nbsp;D[k]&nbsp;if&nbsp;k&nbsp;in&nbsp;D,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">items</span></code>(...)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">keys</span></code>(...)</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">pop</span></code>((k[,d])&nbsp;-&gt;&nbsp;v,&nbsp;...)</td>
<td>If key is not found, d is returned if given, otherwise KeyError is raised</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">popitem</span></code>(()&nbsp;-&gt;&nbsp;(k,&nbsp;v),&nbsp;...)</td>
<td>2-tuple; but raise KeyError if D is empty.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">setdefault</span></code>((k[,d])&nbsp;-&gt;&nbsp;D.get(k,d),&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">update</span></code>(([E,&nbsp;...)</td>
<td>If E is present and has a .keys() method, then does:  for k in E: D[k] = E[k]</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">values</span></code>(...)</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.tracking.utils.defaultdict.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.defaultdict.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.tracking.utils.defaultdict.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a shallow copy of D.<a class="headerlink" href="#dipy.tracking.utils.defaultdict.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.tracking.utils.defaultdict.default_factory">
<code class="descname">default_factory</code><a class="headerlink" href="#dipy.tracking.utils.defaultdict.default_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for default value called by __missing__().</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="map">
<h3><a class="reference internal" href="#dipy.tracking.utils.map" title="dipy.tracking.utils.map"><code class="xref py py-class docutils literal"><span class="pre">map</span></code></a><a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.tracking.utils.map">
<em class="property">class </em><code class="descclassname">dipy.tracking.utils.</code><code class="descname">map</code><a class="headerlink" href="#dipy.tracking.utils.map" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>map(func, <a href="#id69"><span class="problematic" id="id70">*</span></a>iterables) &#8211;&gt; map object</p>
<p>Make an iterator that computes the function using arguments from
each of the iterables.  Stops when the shortest iterable is exhausted.</p>
<dl class="method">
<dt id="dipy.tracking.utils.map.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.map.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id71">
<h3><a class="reference internal" href="#dipy.tracking.utils.xrange" title="dipy.tracking.utils.xrange"><code class="xref py py-class docutils literal"><span class="pre">xrange</span></code></a><a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.tracking.utils.xrange">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">xrange</code><a class="headerlink" href="#dipy.tracking.utils.xrange" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">range</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="affine-for-trackvis">
<h3>affine_for_trackvis<a class="headerlink" href="#affine-for-trackvis" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.affine_for_trackvis">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">affine_for_trackvis</code><span class="sig-paren">(</span><em>voxel_size</em>, <em>voxel_order=None</em>, <em>dim=None</em>, <em>ref_img_voxel_order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.affine_for_trackvis" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an affine which maps points for voxel indices to trackvis
space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>voxel_size</strong> : array (3,)</p>
<blockquote>
<div><p>The sizes of the voxels in the reference image.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>affine</strong> : array (4, 4)</p>
<blockquote class="last">
<div><p>Mapping from the voxel indices of the reference image to trackvis
space.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="affine-from-fsl-mat-file">
<h3>affine_from_fsl_mat_file<a class="headerlink" href="#affine-from-fsl-mat-file" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.affine_from_fsl_mat_file">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">affine_from_fsl_mat_file</code><span class="sig-paren">(</span><em>mat_affine</em>, <em>input_voxsz</em>, <em>output_voxsz</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.affine_from_fsl_mat_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an affine matrix from flirt (FSLdot) and a given voxel size for
input and output images and returns an adjusted affine matrix for trackvis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mat_affine</strong> : array of shape (4, 4)</p>
<blockquote>
<div><p>An FSL flirt affine.</p>
</div></blockquote>
<p><strong>input_voxsz</strong> : array of shape (3,)</p>
<blockquote>
<div><p>The input image voxel dimensions.</p>
</div></blockquote>
<p><strong>output_voxsz</strong> : array of shape (3,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>affine</strong> : array of shape (4, 4)</p>
<blockquote class="last">
<div><p>A trackvis-compatible affine.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id72">
<h3>apply_affine<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.apply_affine">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">apply_affine</code><span class="sig-paren">(</span><em>aff</em>, <em>pts</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.apply_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply affine matrix <cite>aff</cite> to points <cite>pts</cite></p>
<p>Returns result of application of <cite>aff</cite> to the <em>right</em> of <cite>pts</cite>.  The
coordinate dimension of <cite>pts</cite> should be the last.</p>
<p>For the 3D case, <cite>aff</cite> will be shape (4,4) and <cite>pts</cite> will have final axis
length 3 - maybe it will just be N by 3. The return value is the
transformed points, in this case:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">],</span> <span class="n">pts</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">transformed_pts</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
<p>This routine is more general than 3D, in that <cite>aff</cite> can have any shape
(N,N), and <cite>pts</cite> can have any shape, as long as the last dimension is for
the coordinates, and is therefore length N-1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>aff</strong> : (N, N) array-like</p>
<blockquote>
<div><p>Homogenous affine, for 3D points, will be 4 by 4. Contrary to first
appearance, the affine will be applied on the left of <cite>pts</cite>.</p>
</div></blockquote>
<p><strong>pts</strong> : (..., N-1) array-like</p>
<blockquote>
<div><p>Points, where the last dimension contains the coordinates of each
point.  For 3D, the last dimension will be length 3.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>transformed_pts</strong> : (..., N-1) array</p>
<blockquote class="last">
<div><p>transformed points</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aff</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">12</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_affine</span><span class="p">(</span><span class="n">aff</span><span class="p">,</span> <span class="n">pts</span><span class="p">)</span> 
<span class="go">array([[14, 14, 24],</span>
<span class="go">       [16, 17, 28],</span>
<span class="go">       [20, 23, 36],</span>
<span class="go">       [24, 29, 44]]...)</span>
</pre></div>
</div>
<p>Just to show that in the simple 3D case, it is equivalent to:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">],</span> <span class="n">pts</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="o">+</span> <span class="n">aff</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">T</span> 
<span class="go">array([[14, 14, 24],</span>
<span class="go">       [16, 17, 28],</span>
<span class="go">       [20, 23, 36],</span>
<span class="go">       [24, 29, 44]]...)</span>
</pre></div>
</div>
<p>But <cite>pts</cite> can be a more complicated shape:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pts</span> <span class="o">=</span> <span class="n">pts</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_affine</span><span class="p">(</span><span class="n">aff</span><span class="p">,</span> <span class="n">pts</span><span class="p">)</span> 
<span class="go">array([[[14, 14, 24],</span>
<span class="go">        [16, 17, 28]],</span>

<span class="go">       [[20, 23, 36],</span>
<span class="go">        [24, 29, 44]]]...)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="asarray">
<h3>asarray<a class="headerlink" href="#asarray" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.asarray">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">asarray</code><span class="sig-paren">(</span><em>a</em>, <em>dtype=None</em>, <em>order=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.asarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the input to an array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>Input data, in any form that can be converted to an array.  This
includes lists, lists of tuples, tuples, tuples of tuples, tuples
of lists and ndarrays.</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>By default, the data-type is inferred from the input data.</p>
</div></blockquote>
<p><strong>order</strong> : {&#8216;C&#8217;, &#8216;F&#8217;}, optional</p>
<blockquote>
<div><p>Whether to use row-major (C-style) or
column-major (Fortran-style) memory representation.
Defaults to &#8216;C&#8217;.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : ndarray</p>
<blockquote class="last">
<div><p>Array interpretation of <cite>a</cite>.  No copy is performed if the input
is already an ndarray with matching dtype and order.  If <cite>a</cite> is a
subclass of ndarray, a base class ndarray is returned.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">asanyarray</span></code></dt>
<dd>Similar function which passes through subclasses.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">ascontiguousarray</span></code></dt>
<dd>Convert input to a contiguous array.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">asfarray</span></code></dt>
<dd>Convert input to a floating point ndarray.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">asfortranarray</span></code></dt>
<dd>Convert input to an ndarray with column-major memory order.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">asarray_chkfinite</span></code></dt>
<dd>Similar function which checks input for NaNs and Infs.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">fromiter</span></code></dt>
<dd>Create an array from an iterator.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">fromfunction</span></code></dt>
<dd>Construct an array by executing a function on grid positions.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>Convert a list into an array:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([1, 2])</span>
</pre></div>
</div>
<p>Existing arrays are not copied:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="n">a</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If <cite>dtype</cite> is set, array is copied only if dtype does not match:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="ow">is</span> <span class="n">a</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span> <span class="ow">is</span> <span class="n">a</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Contrary to <cite>asanyarray</cite>, ndarray subclasses are not passed through:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">issubclass</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="n">a</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="n">a</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id73">
<h3>cdist<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.cdist">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">cdist</code><span class="sig-paren">(</span><em>XA</em>, <em>XB</em>, <em>metric='euclidean'</em>, <em>p=None</em>, <em>V=None</em>, <em>VI=None</em>, <em>w=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.cdist" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes distance between each pair of the two collections of inputs.</p>
<p>See Notes for common calling conventions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>XA</strong> : ndarray</p>
<blockquote>
<div><p>An <span class="math">\(m_A\)</span> by <span class="math">\(n\)</span> array of <span class="math">\(m_A\)</span>
original observations in an <span class="math">\(n\)</span>-dimensional space.
Inputs are converted to float type.</p>
</div></blockquote>
<p><strong>XB</strong> : ndarray</p>
<blockquote>
<div><p>An <span class="math">\(m_B\)</span> by <span class="math">\(n\)</span> array of <span class="math">\(m_B\)</span>
original observations in an <span class="math">\(n\)</span>-dimensional space.
Inputs are converted to float type.</p>
</div></blockquote>
<p><strong>metric</strong> : str or callable, optional</p>
<blockquote>
<div><p>The distance metric to use.  If a string, the distance function can be
&#8216;braycurtis&#8217;, &#8216;canberra&#8217;, &#8216;chebyshev&#8217;, &#8216;cityblock&#8217;, &#8216;correlation&#8217;,
&#8216;cosine&#8217;, &#8216;dice&#8217;, &#8216;euclidean&#8217;, &#8216;hamming&#8217;, &#8216;jaccard&#8217;, &#8216;kulsinski&#8217;,
&#8216;mahalanobis&#8217;, &#8216;matching&#8217;, &#8216;minkowski&#8217;, &#8216;rogerstanimoto&#8217;, &#8216;russellrao&#8217;,
&#8216;seuclidean&#8217;, &#8216;sokalmichener&#8217;, &#8216;sokalsneath&#8217;, &#8216;sqeuclidean&#8217;,
&#8216;wminkowski&#8217;, &#8216;yule&#8217;.</p>
</div></blockquote>
<p><strong>p</strong> : double, optional</p>
<blockquote>
<div><p>The p-norm to apply
Only for Minkowski, weighted and unweighted. Default: 2.</p>
</div></blockquote>
<p><strong>w</strong> : ndarray, optional</p>
<blockquote>
<div><p>The weight vector.
Only for weighted Minkowski. Mandatory</p>
</div></blockquote>
<p><strong>V</strong> : ndarray, optional</p>
<blockquote>
<div><p>The variance vector
Only for standardized Euclidean. Default: var(vstack([XA, XB]), axis=0, ddof=1)</p>
</div></blockquote>
<p><strong>VI</strong> : ndarray, optional</p>
<blockquote>
<div><p>The inverse of the covariance matrix
Only for Mahalanobis. Default: inv(cov(vstack([XA, XB]).T)).T</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>Y</strong> : ndarray</p>
<blockquote>
<div><p>A <span class="math">\(m_A\)</span> by <span class="math">\(m_B\)</span> distance matrix is returned.
For each <span class="math">\(i\)</span> and <span class="math">\(j\)</span>, the metric
<code class="docutils literal"><span class="pre">dist(u=XA[i],</span> <span class="pre">v=XB[j])</span></code> is computed and stored in the
<span class="math">\(ij\)</span> th entry.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>An exception is thrown if <cite>XA</cite> and <cite>XB</cite> do not have
the same number of columns.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The following are common calling conventions:</p>
<ol class="arabic">
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'euclidean')</span></code></p>
<p>Computes the distance between <span class="math">\(m\)</span> points using
Euclidean distance (2-norm) as the distance metric between the
points. The points are arranged as <span class="math">\(m\)</span>
<span class="math">\(n\)</span>-dimensional row vectors in the matrix X.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'minkowski',</span> <span class="pre">p)</span></code></p>
<p>Computes the distances using the Minkowski distance
<span class="math">\(||u-v||_p\)</span> (<span class="math">\(p\)</span>-norm) where <span class="math">\(p \geq 1\)</span>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'cityblock')</span></code></p>
<p>Computes the city block or Manhattan distance between the
points.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'seuclidean',</span> <span class="pre">V=None)</span></code></p>
<p>Computes the standardized Euclidean distance. The standardized
Euclidean distance between two n-vectors <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is</p>
<div class="math">
\[\sqrt{\sum {(u_i-v_i)^2 / V[x_i]}}.\]</div>
<p>V is the variance vector; V[i] is the variance computed over all
the i&#8217;th components of the points. If not passed, it is
automatically computed.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'sqeuclidean')</span></code></p>
<p>Computes the squared Euclidean distance <span class="math">\(||u-v||_2^2\)</span> between
the vectors.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'cosine')</span></code></p>
<p>Computes the cosine distance between vectors u and v,</p>
<div class="math">
\[1 - \frac{u \cdot v}
         {{||u||}_2 {||v||}_2}\]</div>
<p>where <span class="math">\(||*||_2\)</span> is the 2-norm of its argument <code class="docutils literal"><span class="pre">*</span></code>, and
<span class="math">\(u \cdot v\)</span> is the dot product of <span class="math">\(u\)</span> and <span class="math">\(v\)</span>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'correlation')</span></code></p>
<p>Computes the correlation distance between vectors u and v. This is</p>
<div class="math">
\[1 - \frac{(u - \bar{u}) \cdot (v - \bar{v})}
         {{||(u - \bar{u})||}_2 {||(v - \bar{v})||}_2}\]</div>
<p>where <span class="math">\(\bar{v}\)</span> is the mean of the elements of vector v,
and <span class="math">\(x \cdot y\)</span> is the dot product of <span class="math">\(x\)</span> and <span class="math">\(y\)</span>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'hamming')</span></code></p>
<p>Computes the normalized Hamming distance, or the proportion of
those vector elements between two n-vectors <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code>
which disagree. To save memory, the matrix <code class="docutils literal"><span class="pre">X</span></code> can be of type
boolean.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'jaccard')</span></code></p>
<p>Computes the Jaccard distance between the points. Given two
vectors, <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code>, the Jaccard distance is the
proportion of those elements <code class="docutils literal"><span class="pre">u[i]</span></code> and <code class="docutils literal"><span class="pre">v[i]</span></code> that
disagree where at least one of them is non-zero.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'chebyshev')</span></code></p>
</li>
</ol>
<blockquote>
<div><p>Computes the Chebyshev distance between the points. The
Chebyshev distance between two n-vectors <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is the
maximum norm-1 distance between their respective elements. More
precisely, the distance is given by</p>
<div class="math">
\[d(u,v) = \max_i {|u_i-v_i|}.\]</div>
</div></blockquote>
<ol class="arabic simple" start="11">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'canberra')</span></code></li>
</ol>
<blockquote>
<div><p>Computes the Canberra distance between the points. The
Canberra distance between two points <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is</p>
<div class="math">
\[d(u,v) = \sum_i \frac{|u_i-v_i|}
                     {|u_i|+|v_i|}.\]</div>
</div></blockquote>
<ol class="arabic simple" start="12">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'braycurtis')</span></code></li>
</ol>
<blockquote>
<div><p>Computes the Bray-Curtis distance between the points. The
Bray-Curtis distance between two points <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is</p>
<div class="math">
\[d(u,v) = \frac{\sum_i (|u_i-v_i|)}
              {\sum_i (|u_i+v_i|)}\]</div>
</div></blockquote>
<ol class="arabic simple" start="13">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'mahalanobis',</span> <span class="pre">VI=None)</span></code></li>
</ol>
<blockquote>
<div>Computes the Mahalanobis distance between the points. The
Mahalanobis distance between two points <code class="docutils literal"><span class="pre">u</span></code> and <code class="docutils literal"><span class="pre">v</span></code> is
<span class="math">\(\sqrt{(u-v)(1/V)(u-v)^T}\)</span> where <span class="math">\((1/V)\)</span> (the <code class="docutils literal"><span class="pre">VI</span></code>
variable) is the inverse covariance. If <code class="docutils literal"><span class="pre">VI</span></code> is not None,
<code class="docutils literal"><span class="pre">VI</span></code> will be used as the inverse covariance matrix.</div></blockquote>
<ol class="arabic simple" start="14">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'yule')</span></code></li>
</ol>
<blockquote>
<div>Computes the Yule distance between the boolean
vectors. (see <cite>yule</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="15">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'matching')</span></code></li>
</ol>
<blockquote>
<div>Synonym for &#8216;hamming&#8217;.</div></blockquote>
<ol class="arabic simple" start="16">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'dice')</span></code></li>
</ol>
<blockquote>
<div>Computes the Dice distance between the boolean vectors. (see
<cite>dice</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="17">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'kulsinski')</span></code></li>
</ol>
<blockquote>
<div>Computes the Kulsinski distance between the boolean
vectors. (see <cite>kulsinski</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="18">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'rogerstanimoto')</span></code></li>
</ol>
<blockquote>
<div>Computes the Rogers-Tanimoto distance between the boolean
vectors. (see <cite>rogerstanimoto</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="19">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'russellrao')</span></code></li>
</ol>
<blockquote>
<div>Computes the Russell-Rao distance between the boolean
vectors. (see <cite>russellrao</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="20">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'sokalmichener')</span></code></li>
</ol>
<blockquote>
<div>Computes the Sokal-Michener distance between the boolean
vectors. (see <cite>sokalmichener</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="21">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'sokalsneath')</span></code></li>
</ol>
<blockquote>
<div>Computes the Sokal-Sneath distance between the vectors. (see
<cite>sokalsneath</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="22">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">'wminkowski')</span></code></li>
</ol>
<blockquote>
<div>Computes the weighted Minkowski distance between the
vectors. (see <cite>wminkowski</cite> function documentation)</div></blockquote>
<ol class="arabic simple" start="23">
<li><code class="docutils literal"><span class="pre">Y</span> <span class="pre">=</span> <span class="pre">cdist(XA,</span> <span class="pre">XB,</span> <span class="pre">f)</span></code></li>
</ol>
<blockquote>
<div><p>Computes the distance between all pairs of vectors in X
using the user supplied 2-arity function f. For example,
Euclidean distance between the vectors could be computed
as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">XB</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(((</span><span class="n">u</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()))</span>
</pre></div>
</div>
<p>Note that you should avoid passing a reference to one of
the distance functions defined in this library. For example,:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">XB</span><span class="p">,</span> <span class="n">sokalsneath</span><span class="p">)</span>
</pre></div>
</div>
<p>would calculate the pair-wise distances between the vectors in
X using the Python function <cite>sokalsneath</cite>. This would result in
sokalsneath being called <span class="math">\({n \choose 2}\)</span> times, which
is inefficient. Instead, the optimized C version is more
efficient, and we call it using the following syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dm</span> <span class="o">=</span> <span class="n">cdist</span><span class="p">(</span><span class="n">XA</span><span class="p">,</span> <span class="n">XB</span><span class="p">,</span> <span class="s1">&#39;sokalsneath&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="rubric">Examples</p>
<p>Find the Euclidean distances between four 2-D coordinates:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="k">import</span> <span class="n">distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">35.0456</span><span class="p">,</span> <span class="o">-</span><span class="mf">85.2672</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mf">35.1174</span><span class="p">,</span> <span class="o">-</span><span class="mf">89.9711</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mf">35.9728</span><span class="p">,</span> <span class="o">-</span><span class="mf">83.9422</span><span class="p">),</span>
<span class="gp">... </span>          <span class="p">(</span><span class="mf">36.1667</span><span class="p">,</span> <span class="o">-</span><span class="mf">86.7833</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span><span class="o">.</span><span class="n">cdist</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="s1">&#39;euclidean&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.    ,  4.7044,  1.6172,  1.8856],</span>
<span class="go">       [ 4.7044,  0.    ,  6.0893,  3.3561],</span>
<span class="go">       [ 1.6172,  6.0893,  0.    ,  2.8477],</span>
<span class="go">       [ 1.8856,  3.3561,  2.8477,  0.    ]])</span>
</pre></div>
</div>
<p>Find the Manhattan distance from a 3-D point to the corners of the unit
cube:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.1</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span><span class="o">.</span><span class="n">cdist</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s1">&#39;cityblock&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7],</span>
<span class="go">       [ 0.9],</span>
<span class="go">       [ 1.3],</span>
<span class="go">       [ 1.5],</span>
<span class="go">       [ 1.5],</span>
<span class="go">       [ 1.7],</span>
<span class="go">       [ 2.1],</span>
<span class="go">       [ 2.3]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="connectivity-matrix">
<h3>connectivity_matrix<a class="headerlink" href="#connectivity-matrix" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.connectivity_matrix">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">connectivity_matrix</code><span class="sig-paren">(</span><em>streamlines</em>, <em>label_volume</em>, <em>voxel_size=None</em>, <em>affine=None</em>, <em>symmetric=True</em>, <em>return_mapping=False</em>, <em>mapping_as_streamlines=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.connectivity_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the streamlines that start and end at each label pair.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : sequence</p>
<blockquote>
<div><p>A sequence of streamlines.</p>
</div></blockquote>
<p><strong>label_volume</strong> : ndarray</p>
<blockquote>
<div><p>An image volume with an integer data type, where the intensities in the
volume map to anatomical structures.</p>
</div></blockquote>
<p><strong>voxel_size :</strong></p>
<blockquote>
<div><p>This argument is deprecated.</p>
</div></blockquote>
<p><strong>affine</strong> : array_like (4, 4)</p>
<blockquote>
<div><p>The mapping from voxel coordinates to streamline coordinates.</p>
</div></blockquote>
<p><strong>symmetric</strong> : bool, False by default</p>
<blockquote>
<div><p>Symmetric means we don&#8217;t distinguish between start and end points. If
symmetric is True, <code class="docutils literal"><span class="pre">matrix[i,</span> <span class="pre">j]</span> <span class="pre">==</span> <span class="pre">matrix[j,</span> <span class="pre">i]</span></code>.</p>
</div></blockquote>
<p><strong>return_mapping</strong> : bool, False by default</p>
<blockquote>
<div><p>If True, a mapping is returned which maps matrix indices to
streamlines.</p>
</div></blockquote>
<p><strong>mapping_as_streamlines</strong> : bool, False by default</p>
<blockquote>
<div><p>If True voxel indices map to lists of streamline objects. Otherwise
voxel indices map to lists of integers.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>matrix</strong> : ndarray</p>
<blockquote>
<div><p>The number of connection between each pair of regions in
<cite>label_volume</cite>.</p>
</div></blockquote>
<p><strong>mapping</strong> : defaultdict(list)</p>
<blockquote class="last">
<div><p><code class="docutils literal"><span class="pre">mapping[i,</span> <span class="pre">j]</span></code> returns all the streamlines that connect region <cite>i</cite>
to region <cite>j</cite>. If <cite>symmetric</cite> is True mapping will only have one key
for each start end pair such that if <code class="docutils literal"><span class="pre">i</span> <span class="pre">&lt;</span> <span class="pre">j</span></code> mapping will have key
<code class="docutils literal"><span class="pre">(i,</span> <span class="pre">j)</span></code> but not key <code class="docutils literal"><span class="pre">(j,</span> <span class="pre">i)</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="density-map">
<h3>density_map<a class="headerlink" href="#density-map" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.density_map">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">density_map</code><span class="sig-paren">(</span><em>streamlines</em>, <em>vol_dims</em>, <em>voxel_size=None</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.density_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the number of unique streamlines that pass through each voxel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : iterable</p>
<blockquote>
<div><p>A sequence of streamlines.</p>
</div></blockquote>
<p><strong>vol_dims</strong> : 3 ints</p>
<blockquote>
<div><p>The shape of the volume to be returned containing the streamlines
counts</p>
</div></blockquote>
<p><strong>voxel_size :</strong></p>
<blockquote>
<div><p>This argument is deprecated.</p>
</div></blockquote>
<p><strong>affine</strong> : array_like (4, 4)</p>
<blockquote>
<div><p>The mapping from voxel coordinates to streamline points.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>image_volume</strong> : ndarray, shape=vol_dims</p>
<blockquote>
<div><p>The number of streamline points in each voxel of volume.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>IndexError</strong></p>
<blockquote class="last">
<div><p>When the points of the streamlines lie outside of the return volume.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>A streamline can pass through a voxel even if one of the points of the
streamline does not lie in the voxel. For example a step from [0,0,0] to
[0,0,2] passes through [0,0,1]. Consider subsegmenting the streamlines when
the edges of the voxels are smaller than the steps of the streamlines.</p>
</dd></dl>

</div>
<div class="section" id="id74">
<h3>dist_to_corner<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.dist_to_corner">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">dist_to_corner</code><span class="sig-paren">(</span><em>affine</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.dist_to_corner" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the maximal distance from the center to a corner of a voxel,
given an affine</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>affine</strong> : 4 by 4 array.</p>
<blockquote>
<div><p>The spatial transformation from the measurement to the scanner space.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dist: float</p>
<blockquote class="last">
<div><p>The maximal distance to the corner of a voxel, given voxel size encoded
in the affine.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dot">
<h3>dot<a class="headerlink" href="#dot" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.dot">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">dot</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>out=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Dot product of two arrays.</p>
<p>For 2-D arrays it is equivalent to matrix multiplication, and for 1-D
arrays to inner product of vectors (without complex conjugation). For
N dimensions it is a sum product over the last axis of <cite>a</cite> and
the second-to-last of <cite>b</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,:]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">,:,</span><span class="n">m</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>First argument.</p>
</div></blockquote>
<p><strong>b</strong> : array_like</p>
<blockquote>
<div><p>Second argument.</p>
</div></blockquote>
<p><strong>out</strong> : ndarray, optional</p>
<blockquote>
<div><p>Output argument. This must have the exact kind that would be returned
if it was not used. In particular, it must have the right type, must be
C-contiguous, and its dtype must be the dtype that would be returned
for <cite>dot(a,b)</cite>. This is a performance feature. Therefore, if these
conditions are not met, an exception is raised, instead of attempting
to be flexible.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output</strong> : ndarray</p>
<blockquote>
<div><p>Returns the dot product of <cite>a</cite> and <cite>b</cite>.  If <cite>a</cite> and <cite>b</cite> are both
scalars or both 1-D arrays then a scalar is returned; otherwise
an array is returned.
If <cite>out</cite> is given, then it is returned.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>If the last dimension of <cite>a</cite> is not the same size as
the second-to-last dimension of <cite>b</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">vdot</span></code></dt>
<dd>Complex-conjugating dot product.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">tensordot</span></code></dt>
<dd>Sum products over arbitrary axes.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">einsum</span></code></dt>
<dd>Einstein summation convention.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">matmul</span></code></dt>
<dd>&#8216;&#64;&#8217; operator as method with out parameter.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">12</span>
</pre></div>
</div>
<p>Neither argument is complex-conjugated:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">([</span><span class="mi">2</span><span class="n">j</span><span class="p">,</span> <span class="mi">3</span><span class="n">j</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="n">j</span><span class="p">,</span> <span class="mi">3</span><span class="n">j</span><span class="p">])</span>
<span class="go">(-13+0j)</span>
</pre></div>
</div>
<p>For 2-D arrays it is the matrix product:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">array([[4, 1],</span>
<span class="go">       [2, 2]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="go">499128</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,:]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,:,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">499128</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="empty">
<h3>empty<a class="headerlink" href="#empty" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.empty">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">empty</code><span class="sig-paren">(</span><em>shape</em>, <em>dtype=float</em>, <em>order='C'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new array of given shape and type, without initializing entries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : int or tuple of int</p>
<blockquote>
<div><p>Shape of the empty array</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>Desired output data-type.</p>
</div></blockquote>
<p><strong>order</strong> : {&#8216;C&#8217;, &#8216;F&#8217;}, optional</p>
<blockquote>
<div><p>Whether to store multi-dimensional data in row-major
(C-style) or column-major (Fortran-style) order in
memory.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : ndarray</p>
<blockquote class="last">
<div><p>Array of uninitialized (arbitrary) data of the given shape, dtype, and
order.  Object arrays will be initialized to None.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">empty_like</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">zeros</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">ones</span></code></p>
</div>
<p class="rubric">Notes</p>
<p><cite>empty</cite>, unlike <cite>zeros</cite>, does not set the array values to zero,
and may therefore be marginally faster.  On the other hand, it requires
the user to manually set all the values in the array, and should be
used with caution.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">array([[ -9.74499359e+001,   6.69583040e-309],</span>
<span class="go">       [  2.13182611e-314,   3.06959433e-309]])         #random</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="go">array([[-1073741821, -1067949133],</span>
<span class="go">       [  496041986,    19249760]])                     #random</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="eye">
<h3>eye<a class="headerlink" href="#eye" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.eye">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">eye</code><span class="sig-paren">(</span><em>N</em>, <em>M=None</em>, <em>k=0</em>, <em>dtype=&lt;class 'float'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.eye" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a 2-D array with ones on the diagonal and zeros elsewhere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>N</strong> : int</p>
<blockquote>
<div><p>Number of rows in the output.</p>
</div></blockquote>
<p><strong>M</strong> : int, optional</p>
<blockquote>
<div><p>Number of columns in the output. If None, defaults to <cite>N</cite>.</p>
</div></blockquote>
<p><strong>k</strong> : int, optional</p>
<blockquote>
<div><p>Index of the diagonal: 0 (the default) refers to the main diagonal,
a positive value refers to an upper diagonal, and a negative value
to a lower diagonal.</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>Data-type of the returned array.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>I</strong> : ndarray of shape (N,M)</p>
<blockquote class="last">
<div><p>An array where all elements are equal to zero, except for the <cite>k</cite>-th
diagonal, whose values are equal to one.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">identity</span></code></dt>
<dd>(almost) equivalent function</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">diag</span></code></dt>
<dd>diagonal 2-D array from a 1-D array specified by the user.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="go">array([[1, 0],</span>
<span class="go">       [0, 1]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[ 0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.],</span>
<span class="go">       [ 0.,  0.,  0.]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="flexi-tvis-affine">
<h3>flexi_tvis_affine<a class="headerlink" href="#flexi-tvis-affine" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.flexi_tvis_affine">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">flexi_tvis_affine</code><span class="sig-paren">(</span><em>sl_vox_order</em>, <em>grid_affine</em>, <em>dim</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.flexi_tvis_affine" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Computes the mapping from voxel indices to streamline points,</dt>
<dd>reconciling streamlines and grids with different voxel orders</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sl_vox_order</strong> : string of length 3</p>
<blockquote>
<div><p>a string that describes the voxel order of the streamlines (ex: LPS)</p>
</div></blockquote>
<p><strong>grid_affine</strong> : array (4, 4),</p>
<blockquote>
<div><p>An affine matrix describing the current space of the grid in relation
to RAS+ scanner space</p>
</div></blockquote>
<p><strong>dim</strong> : tuple of length 3</p>
<blockquote>
<div><p>dimension of the grid</p>
</div></blockquote>
<p><strong>voxel_size</strong> : array (3,0)</p>
<blockquote>
<div><p>voxel size of the grid</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>flexi_tvis_aff</strong> : this affine maps between a grid and a trackvis space</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-flexi-tvis-affine">
<h3>get_flexi_tvis_affine<a class="headerlink" href="#get-flexi-tvis-affine" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.get_flexi_tvis_affine">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">get_flexi_tvis_affine</code><span class="sig-paren">(</span><em>tvis_hdr</em>, <em>nii_aff</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.get_flexi_tvis_affine" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Computes the mapping from voxel indices to streamline points,</dt>
<dd>reconciling streamlines and grids with different voxel orders</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tvis_hdr</strong> : header from a trackvis file</p>
<p><strong>nii_aff</strong> : array (4, 4),</p>
<blockquote>
<div><p>An affine matrix describing the current space of the grid in relation to RAS+ scanner space</p>
</div></blockquote>
<p><strong>nii_data</strong> : nd array</p>
<blockquote>
<div><p>3D array, each with shape (x, y, z) corresponding to the shape of the brain volume.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>flexi_tvis_aff</strong> : array (4,4)</p>
<blockquote class="last">
<div><p>this affine maps between a grid and a trackvis space</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id75">
<h3>length<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.length">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">length</code><span class="sig-paren">(</span><em>streamlines</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the lengths of many streamlines in a bundle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list</p>
<blockquote>
<div><p>Each item in the list is an array with 3D coordinates of a streamline.</p>
</div></blockquote>
<p><strong>affine</strong> : 4 x 4 array</p>
<blockquote>
<div><p>An affine transformation to move the fibers by, before computing their
lengths.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Iterator object which then computes the length of each</p>
<p class="last">streamline in the bundle, upon iteration.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="minimum-at">
<h3>minimum_at<a class="headerlink" href="#minimum-at" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.minimum_at">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">minimum_at</code><span class="sig-paren">(</span><em>a</em>, <em>indices</em>, <em>b=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.minimum_at" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs unbuffered in place operation on operand &#8216;a&#8217; for elements
specified by &#8216;indices&#8217;. For addition ufunc, this method is equivalent to
<cite>a[indices] += b</cite>, except that results are accumulated for elements that
are indexed more than once. For example, <cite>a[[0,0]] += 1</cite> will only
increment the first element once because of buffering, whereas
<cite>add.at(a, [0,0], 1)</cite> will increment the first element twice.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.8.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>The array to perform in place operation on.</p>
</div></blockquote>
<p><strong>indices</strong> : array_like or tuple</p>
<blockquote>
<div><p>Array like index object or slice object for indexing into first
operand. If first operand has multiple dimensions, indices can be a
tuple of array like index objects or slice objects.</p>
</div></blockquote>
<p><strong>b</strong> : array_like</p>
<blockquote class="last">
<div><p>Second operand for ufuncs requiring two operands. Operand must be
broadcastable over first operand after indexing or slicing.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Set items 0 and 1 to their negative values:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">negative</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([-1, -2, 3, 4])</span>
</pre></div>
</div>
<p>Increment items 0 and 1, and increment item 2 twice:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([2, 3, 5, 4])</span>
</pre></div>
</div>
<p>Add items 0 and 1 in first array to second array,
and store results in first array:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([2, 4, 3, 4])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="move-streamlines">
<h3>move_streamlines<a class="headerlink" href="#move-streamlines" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.move_streamlines">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">move_streamlines</code><span class="sig-paren">(</span><em>streamlines</em>, <em>output_space</em>, <em>input_space=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.move_streamlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a linear transformation, given by affine, to streamlines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : sequence</p>
<blockquote>
<div><p>A set of streamlines to be transformed.</p>
</div></blockquote>
<p><strong>output_space</strong> : array (4, 4)</p>
<blockquote>
<div><p>An affine matrix describing the target space to which the streamlines
will be transformed.</p>
</div></blockquote>
<p><strong>input_space</strong> : array (4, 4), optional</p>
<blockquote>
<div><p>An affine matrix describing the current space of the streamlines, if no
<code class="docutils literal"><span class="pre">input_space</span></code> is specified, it&#8217;s assumed the streamlines are in the
reference space. The reference space is the same as the space
associated with the affine matrix <code class="docutils literal"><span class="pre">np.eye(4)</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : generator</p>
<blockquote class="last">
<div><p>A sequence of transformed streamlines.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="ndbincount">
<h3>ndbincount<a class="headerlink" href="#ndbincount" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.ndbincount">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">ndbincount</code><span class="sig-paren">(</span><em>x</em>, <em>weights=None</em>, <em>shape=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.ndbincount" title="Permalink to this definition">¶</a></dt>
<dd><p>Like bincount, but for nd-indicies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like (N, M)</p>
<blockquote>
<div><p>M indices to a an Nd-array</p>
</div></blockquote>
<p><strong>weights</strong> : array_like (M,), optional</p>
<blockquote>
<div><p>Weights associated with indices</p>
</div></blockquote>
<p><strong>shape</strong> : optional</p>
<blockquote class="last">
<div><p>the shape of the output</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="near-roi">
<h3>near_roi<a class="headerlink" href="#near-roi" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.near_roi">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">near_roi</code><span class="sig-paren">(</span><em>streamlines</em>, <em>region_of_interest</em>, <em>affine=None</em>, <em>tol=None</em>, <em>mode='any'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.near_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide filtering criteria for a set of streamlines based on whether
they fall within a tolerance distance from an ROI</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : list or generator</p>
<blockquote>
<div><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</div></blockquote>
<p><strong>region_of_interest</strong> : ndarray</p>
<blockquote>
<div><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</div></blockquote>
<p><strong>affine</strong> : ndarray</p>
<blockquote>
<div><p>Affine transformation from voxels to streamlines. Default: identity.</p>
</div></blockquote>
<p><strong>tol</strong> : float</p>
<blockquote>
<div><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, the filtering criterion is set to True for
this streamline, otherwise False. Defaults to the distance between
the center of each voxel and the corner of the voxel.</p>
</div></blockquote>
<p><strong>mode</strong> : string, optional</p>
<blockquote>
<div><p>One of {&#8220;any&#8221;, &#8220;all&#8221;, &#8220;either_end&#8221;, &#8220;both_end&#8221;}, where return True
if:</p>
<p>&#8220;any&#8221; : any point is within tol from ROI. Default.</p>
<p>&#8220;all&#8221; : all points are within tol from ROI.</p>
<p>&#8220;either_end&#8221; : either of the end-points is within tol from ROI</p>
<p>&#8220;both_end&#8221; : both end points are within tol from ROI.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">1D array of boolean dtype, shape (len(streamlines), )</p>
<p>This contains <cite>True</cite> for indices corresponding to each streamline</p>
<p>that passes within a tolerance distance from the target ROI, <cite>False</cite></p>
<p class="last">otherwise.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="orientation-from-string">
<h3>orientation_from_string<a class="headerlink" href="#orientation-from-string" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.orientation_from_string">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">orientation_from_string</code><span class="sig-paren">(</span><em>string_ornt</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.orientation_from_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an array representation of an ornt string</p>
</dd></dl>

</div>
<div class="section" id="ornt-mapping">
<h3>ornt_mapping<a class="headerlink" href="#ornt-mapping" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.ornt_mapping">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">ornt_mapping</code><span class="sig-paren">(</span><em>ornt1</em>, <em>ornt2</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.ornt_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mapping needing to get from orn1 to orn2</p>
</dd></dl>

</div>
<div class="section" id="path-length">
<h3>path_length<a class="headerlink" href="#path-length" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.path_length">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">path_length</code><span class="sig-paren">(</span><em>streamlines</em>, <em>aoi</em>, <em>affine</em>, <em>fill_value=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.path_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the shortest path, along any streamline, between aoi and
each voxel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : seq of (N, 3) arrays</p>
<blockquote>
<div><p>A sequence of streamlines, path length is given in mm along the curve
of the streamline.</p>
</div></blockquote>
<p><strong>aoi</strong> : array, 3d</p>
<blockquote>
<div><p>A mask (binary array) of voxels from which to start computing distance.</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>The mapping from voxel indices to streamline points.</p>
</div></blockquote>
<p><strong>fill_value</strong> : float</p>
<blockquote>
<div><p>The value of voxel in the path length map that are not connected to the
aoi.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>plm</strong> : array</p>
<blockquote class="last">
<div><p>Same shape as aoi. The minimum distance between every point and aoi
along the path of a streamline.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="random-seeds-from-mask">
<h3>random_seeds_from_mask<a class="headerlink" href="#random-seeds-from-mask" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.random_seeds_from_mask">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">random_seeds_from_mask</code><span class="sig-paren">(</span><em>mask</em>, <em>seeds_count=1</em>, <em>seed_count_per_voxel=True</em>, <em>affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.random_seeds_from_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates randomly placed seeds for fiber tracking from a binary mask.</p>
<p>Seeds points are placed randomly distributed in voxels of <code class="docutils literal"><span class="pre">mask</span></code>
which are <code class="docutils literal"><span class="pre">True</span></code>.
If <code class="docutils literal"><span class="pre">seed_count_per_voxel</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, this function is
similar to <code class="docutils literal"><span class="pre">seeds_from_mask()</span></code>, with the difference that instead of
evenly distributing the seeds, it randomly places the seeds within the
voxels specified by the <code class="docutils literal"><span class="pre">mask</span></code>. The initial random conditions can be set
using <code class="docutils literal"><span class="pre">numpy.random.seed(...)</span></code>, prior to calling this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mask</strong> : binary 3d array_like</p>
<blockquote>
<div><p>A binary array specifying where to place the seeds for fiber tracking.</p>
</div></blockquote>
<p><strong>seeds_count</strong> : int</p>
<blockquote>
<div><p>The number of seeds to generate. If <code class="docutils literal"><span class="pre">seed_count_per_voxel</span></code> is True,
specifies the number of seeds to place in each voxel. Otherwise,
specifies the total number of seeds to place in the mask.</p>
</div></blockquote>
<p><strong>seed_count_per_voxel: bool</strong></p>
<blockquote>
<div><p>If True, seeds_count is per voxel, else seeds_count is the total number
of seeds.</p>
</div></blockquote>
<p><strong>affine</strong> : array, (4, 4)</p>
<blockquote>
<div><p>The mapping between voxel indices and the point space for seeds. A
seed point at the center the voxel <code class="docutils literal"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> will be represented as
<code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where <code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span> <span class="pre">np.dot(affine,</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k</span> <span class="pre">,</span> <span class="pre">1])</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>When <code class="docutils literal"><span class="pre">mask</span></code> is not a three-dimensional array</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.tracking.utils.seeds_from_mask" title="dipy.tracking.utils.seeds_from_mask"><code class="xref py py-obj docutils literal"><span class="pre">seeds_from_mask</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[-0.082978  ,  0.22032449, -0.49988563]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[-0.19766743, -0.35324411, -0.40766141],</span>
<span class="go">       [-0.31373979, -0.15443927, -0.10323253],</span>
<span class="go">       [ 0.03881673, -0.08080549,  0.1852195 ],</span>
<span class="go">       [-0.29554775,  0.37811744, -0.47261241],</span>
<span class="go">       [ 0.17046751, -0.0826952 ,  0.05868983],</span>
<span class="go">       [-0.35961306, -0.30189851,  0.30074457]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random_seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">seeds_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed_count_per_voxel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([[ 0.46826158, -0.18657582,  0.19232262],</span>
<span class="go">       [ 0.37638915,  0.39460666, -0.41495579],</span>
<span class="go">       [-0.46094522,  0.66983042,  2.3781425 ],</span>
<span class="go">       [-0.40165317,  0.92110763,  2.45788953]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="ravel-multi-index">
<h3>ravel_multi_index<a class="headerlink" href="#ravel-multi-index" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.ravel_multi_index">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">ravel_multi_index</code><span class="sig-paren">(</span><em>multi_index</em>, <em>dims</em>, <em>mode='raise'</em>, <em>order='C'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.ravel_multi_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a tuple of index arrays into an array of flat
indices, applying boundary modes to the multi-index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>multi_index</strong> : tuple of array_like</p>
<blockquote>
<div><p>A tuple of integer arrays, one array for each dimension.</p>
</div></blockquote>
<p><strong>dims</strong> : tuple of ints</p>
<blockquote>
<div><p>The shape of array into which the indices from <code class="docutils literal"><span class="pre">multi_index</span></code> apply.</p>
</div></blockquote>
<p><strong>mode</strong> : {&#8216;raise&#8217;, &#8216;wrap&#8217;, &#8216;clip&#8217;}, optional</p>
<blockquote>
<div><p>Specifies how out-of-bounds indices are handled.  Can specify
either one mode or a tuple of modes, one mode per index.</p>
<ul class="simple">
<li>&#8216;raise&#8217; &#8211; raise an error (default)</li>
<li>&#8216;wrap&#8217; &#8211; wrap around</li>
<li>&#8216;clip&#8217; &#8211; clip to the range</li>
</ul>
<p>In &#8216;clip&#8217; mode, a negative index which would normally
wrap will clip to 0 instead.</p>
</div></blockquote>
<p><strong>order</strong> : {&#8216;C&#8217;, &#8216;F&#8217;}, optional</p>
<blockquote>
<div><p>Determines whether the multi-index should be viewed as
indexing in row-major (C-style) or column-major
(Fortran-style) order.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>raveled_indices</strong> : ndarray</p>
<blockquote class="last">
<div><p>An array of indices into the flattened version of an array
of dimensions <code class="docutils literal"><span class="pre">dims</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">unravel_index</span></code></p>
</div>
<p class="rubric">Notes</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.6.0.</span></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="go">array([22, 41, 37])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
<span class="go">array([31, 41, 13])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;clip&#39;</span><span class="p">)</span>
<span class="go">array([22, 23, 19])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;clip&#39;</span><span class="p">,</span><span class="s1">&#39;wrap&#39;</span><span class="p">))</span>
<span class="go">array([12, 13, 13])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="go">1621</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reduce-labels">
<h3>reduce_labels<a class="headerlink" href="#reduce-labels" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.reduce_labels">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">reduce_labels</code><span class="sig-paren">(</span><em>label_volume</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.reduce_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces an array of labels to the integers from 0 to n with smallest
possible n.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<span class="gp">... </span>                   <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_labels</span><span class="p">,</span> <span class="n">lookup</span> <span class="o">=</span> <span class="n">reduce_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span>
<span class="go">array([1, 3, 7, 8, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_labels</span> 
<span class="go">array([[0, 1, 4],</span>
<span class="go">       [0, 1, 3],</span>
<span class="go">       [0, 1, 2]]...)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">lookup</span><span class="p">[</span><span class="n">new_labels</span><span class="p">]</span> <span class="o">==</span> <span class="n">labels</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reduce-rois">
<h3>reduce_rois<a class="headerlink" href="#reduce-rois" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.reduce_rois">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">reduce_rois</code><span class="sig-paren">(</span><em>rois</em>, <em>include</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.reduce_rois" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce multiple ROIs to one inclusion and one exclusion ROI</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rois</strong> : list or ndarray</p>
<blockquote>
<div><p>A list of 3D arrays, each with shape (x, y, z) corresponding to the
shape of the brain volume, or a 4D array with shape (n_rois, x, y,
z). Non-zeros in each volume are considered to be within the region.</p>
</div></blockquote>
<p><strong>include</strong> : array or list</p>
<blockquote>
<div><p>A list or 1D array of boolean marking inclusion or exclusion
criteria.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>include_roi</strong> : boolean 3D array</p>
<blockquote>
<div><p>An array marking the inclusion mask.</p>
</div></blockquote>
<p><strong>exclude_roi</strong> : boolean 3D array</p>
<blockquote class="last">
<div><p>An array marking the exclusion mask</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="reorder-voxels-affine">
<h3>reorder_voxels_affine<a class="headerlink" href="#reorder-voxels-affine" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.reorder_voxels_affine">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">reorder_voxels_affine</code><span class="sig-paren">(</span><em>input_ornt</em>, <em>output_ornt</em>, <em>shape</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.reorder_voxels_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a linear transformation equivalent to changing voxel order.</p>
<p>Calculates a linear tranformation A such that [a, b, c, 1] = A[x, y, z, 1].
where [x, y, z] is a point in the coordinate system defined by input_ornt
and [a, b, c] is the same point in the coordinate system defined by
output_ornt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input_ornt</strong> : array (n, 2)</p>
<blockquote>
<div><p>A description of the orientation of a point in n-space. See
<code class="docutils literal"><span class="pre">nibabel.orientation</span></code> or <code class="docutils literal"><span class="pre">dipy.io.bvectxt</span></code> for more information.</p>
</div></blockquote>
<p><strong>output_ornt</strong> : array (n, 2)</p>
<blockquote>
<div><p>A description of the orientation of a point in n-space.</p>
</div></blockquote>
<p><strong>shape</strong> : tuple of int</p>
<blockquote>
<div><p>Shape of the image in the input orientation.
<code class="docutils literal"><span class="pre">map</span> <span class="pre">=</span> <span class="pre">ornt_mapping(input_ornt,</span> <span class="pre">output_ornt)</span></code></p>
</div></blockquote>
<p><strong>voxel_size</strong> : int</p>
<blockquote>
<div><p>Voxel size of the image in the input orientation.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>A</strong> : array (n+1, n+1)</p>
<blockquote class="last">
<div><p>Affine matrix of the transformation between input_ornt and output_ornt.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">nibabel.orientation</span></code>, <a class="reference internal" href="dipy.io.html#dipy.io.bvectxt.orientation_to_string" title="dipy.io.bvectxt.orientation_to_string"><code class="xref py py-obj docutils literal"><span class="pre">dipy.io.bvectxt.orientation_to_string</span></code></a>, <a class="reference internal" href="dipy.io.html#dipy.io.bvectxt.orientation_from_string" title="dipy.io.bvectxt.orientation_from_string"><code class="xref py py-obj docutils literal"><span class="pre">dipy.io.bvectxt.orientation_from_string</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="seeds-from-mask">
<h3>seeds_from_mask<a class="headerlink" href="#seeds-from-mask" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.seeds_from_mask">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">seeds_from_mask</code><span class="sig-paren">(</span><em>mask, density=[1, 1, 1], voxel_size=None, affine=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.seeds_from_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates seeds for fiber tracking from a binary mask.</p>
<p>Seeds points are placed evenly distributed in all voxels of <code class="docutils literal"><span class="pre">mask</span></code> which
are <code class="docutils literal"><span class="pre">True</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mask</strong> : binary 3d array_like</p>
<blockquote>
<div><p>A binary array specifying where to place the seeds for fiber tracking.</p>
</div></blockquote>
<p><strong>density</strong> : int or array_like (3,)</p>
<blockquote>
<div><p>Specifies the number of seeds to place along each dimension. A
<code class="docutils literal"><span class="pre">density</span></code> of <cite>2</cite> is the same as <code class="docutils literal"><span class="pre">[2,</span> <span class="pre">2,</span> <span class="pre">2]</span></code> and will result in a
total of 8 seeds per voxel.</p>
</div></blockquote>
<p><strong>voxel_size :</strong></p>
<blockquote>
<div><p>This argument is deprecated.</p>
</div></blockquote>
<p><strong>affine</strong> : array, (4, 4)</p>
<blockquote>
<div><p>The mapping between voxel indices and the point space for seeds. A
seed point at the center the voxel <code class="docutils literal"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> will be represented as
<code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z]</span></code> where <code class="docutils literal"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">z,</span> <span class="pre">1]</span> <span class="pre">==</span> <span class="pre">np.dot(affine,</span> <span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k</span> <span class="pre">,</span> <span class="pre">1])</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>When <code class="docutils literal"><span class="pre">mask</span></code> is not a three-dimensional array</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.tracking.utils.random_seeds_from_mask" title="dipy.tracking.utils.random_seeds_from_mask"><code class="xref py py-obj docutils literal"><span class="pre">random_seeds_from_mask</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;bool&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">array([[ 0.5,  0.5,  0.5]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">array([[ 0.5       ,  0.25      ,  0.16666667],</span>
<span class="go">       [ 0.5       ,  0.75      ,  0.16666667],</span>
<span class="go">       [ 0.5       ,  0.25      ,  0.5       ],</span>
<span class="go">       [ 0.5       ,  0.75      ,  0.5       ],</span>
<span class="go">       [ 0.5       ,  0.25      ,  0.83333333],</span>
<span class="go">       [ 0.5       ,  0.75      ,  0.83333333]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seeds_from_mask</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="mf">2.5</span><span class="p">])</span>
<span class="go">array([[ 0.55 ,  0.55 ,  0.625],</span>
<span class="go">       [ 0.55 ,  0.55 ,  1.875],</span>
<span class="go">       [ 0.55 ,  1.65 ,  5.625],</span>
<span class="go">       [ 0.55 ,  1.65 ,  6.875]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id76">
<h3>setup_test<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.setup_test">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">setup_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.setup_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Set numpy print options to &#8220;legacy&#8221; for new versions of numpy</p>
<p>If imported into a file, nosetest will run this before any doctests.</p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718">https://github.com/numpy/numpy/commit/710e0327687b9f7653e5ac02d222ba62c657a718</a>
<a class="reference external" href="https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495">https://github.com/numpy/numpy/commit/734b907fc2f7af6e40ec989ca49ee6d87e21c495</a>
<a class="reference external" href="https://github.com/nipy/nibabel/pull/556">https://github.com/nipy/nibabel/pull/556</a></p>
</dd></dl>

</div>
<div class="section" id="id77">
<h3>streamline_near_roi<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.streamline_near_roi">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">streamline_near_roi</code><span class="sig-paren">(</span><em>streamline</em>, <em>roi_coords</em>, <em>tol</em>, <em>mode='any'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.streamline_near_roi" title="Permalink to this definition">¶</a></dt>
<dd><p>Is a streamline near an ROI.</p>
<p>Implements the inner loops of the <a class="reference internal" href="#dipy.tracking.utils.near_roi" title="dipy.tracking.utils.near_roi"><code class="xref py py-func docutils literal"><span class="pre">near_roi()</span></code></a> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamline</strong> : array, shape (N, 3)</p>
<blockquote>
<div><p>A single streamline</p>
</div></blockquote>
<p><strong>roi_coords</strong> : array, shape (M, 3)</p>
<blockquote>
<div><p>ROI coordinates transformed to the streamline coordinate frame.</p>
</div></blockquote>
<p><strong>tol</strong> : float</p>
<blockquote>
<div><p>Distance (in the units of the streamlines, usually mm). If any
coordinate in the streamline is within this distance from the center
of any voxel in the ROI, this function returns True.</p>
</div></blockquote>
<p><strong>mode</strong> : string</p>
<blockquote>
<div><p>One of {&#8220;any&#8221;, &#8220;all&#8221;, &#8220;either_end&#8221;, &#8220;both_end&#8221;}, where return True
if:</p>
<p>&#8220;any&#8221; : any point is within tol from ROI.</p>
<p>&#8220;all&#8221; : all points are within tol from ROI.</p>
<p>&#8220;either_end&#8221; : either of the end-points is within tol from ROI</p>
<p>&#8220;both_end&#8221; : both end points are within tol from ROI.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>out</strong> : boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="subsegment">
<h3>subsegment<a class="headerlink" href="#subsegment" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.subsegment">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">subsegment</code><span class="sig-paren">(</span><em>streamlines</em>, <em>max_segment_length</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.subsegment" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the segments of the streamlines into small segments.</p>
<p>Replaces each segment of each of the streamlines with the smallest possible
number of equally sized smaller segments such that no segment is longer
than max_segment_length. Among other things, this can useful for getting
streamline counts on a grid that is smaller than the length of the
streamline segments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : sequence of ndarrays</p>
<blockquote>
<div><p>The streamlines to be subsegmented.</p>
</div></blockquote>
<p><strong>max_segment_length</strong> : float</p>
<blockquote>
<div><p>The longest allowable segment length.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output_streamlines</strong> : generator</p>
<blockquote class="last">
<div><p>A set of streamlines.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Segments of 0 length are removed. If unchanged</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">streamlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mf">3.</span><span class="p">))</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.],</span>
<span class="go">       [ 5.,  0.,  0.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">[array([[ 0.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.],</span>
<span class="go">       [ 2.,  0.,  0.],</span>
<span class="go">       [ 3.,  0.,  0.],</span>
<span class="go">       [ 4.,  0.,  0.],</span>
<span class="go">       [ 5.,  0.,  0.]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">subsegment</span><span class="p">(</span><span class="n">streamlines</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">))</span>
<span class="go">[array([[ 0. ,  0. ,  0. ],</span>
<span class="go">       [ 1. ,  0. ,  0. ],</span>
<span class="go">       [ 2. ,  0. ,  0. ],</span>
<span class="go">       [ 3.5,  0. ,  0. ],</span>
<span class="go">       [ 5. ,  0. ,  0. ]])]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="target">
<h3>target<a class="headerlink" href="#target" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.target">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">target</code><span class="sig-paren">(</span><em>streamlines</em>, <em>target_mask</em>, <em>affine</em>, <em>include=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.target" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters streamlines based on whether or not they pass through an ROI.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : iterable</p>
<blockquote>
<div><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</div></blockquote>
<p><strong>target_mask</strong> : array-like</p>
<blockquote>
<div><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>The affine transform from voxel indices to streamline points.</p>
</div></blockquote>
<p><strong>include</strong> : bool, default True</p>
<blockquote>
<div><p>If True, streamlines passing through <cite>target_mask</cite> are kept. If False,
the streamlines not passing through <cite>target_mask</cite> are kept.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : generator</p>
<blockquote>
<div><p>A sequence of streamlines that pass through <cite>target_mask</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>When the points of the streamlines lie outside of the <cite>target_mask</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal"><span class="pre">density_map</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="target-line-based">
<h3>target_line_based<a class="headerlink" href="#target-line-based" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.target_line_based">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">target_line_based</code><span class="sig-paren">(</span><em>streamlines</em>, <em>target_mask</em>, <em>affine=None</em>, <em>include=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.target_line_based" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters streamlines based on whether or not they pass through a ROI,
using a line-based algorithm. Mostly used as a replacement of <cite>target</cite>
for compressed streamlines.</p>
<p>This function never returns single-point streamlines, whatever the
value of <cite>include</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : iterable</p>
<blockquote>
<div><p>A sequence of streamlines. Each streamline should be a (N, 3) array,
where N is the length of the streamline.</p>
</div></blockquote>
<p><strong>target_mask</strong> : array-like</p>
<blockquote>
<div><p>A mask used as a target. Non-zero values are considered to be within
the target region.</p>
</div></blockquote>
<p><strong>affine</strong> : array (4, 4)</p>
<blockquote>
<div><p>The affine transform from voxel indices to streamline points.</p>
</div></blockquote>
<p><strong>include</strong> : bool, default True</p>
<blockquote>
<div><p>If True, streamlines passing through <cite>target_mask</cite> are kept. If False,
the streamlines not passing through <cite>target_mask</cite> are kept.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>streamlines</strong> : generator</p>
<blockquote class="last">
<div><p>A sequence of streamlines that pass through <cite>target_mask</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.tracking.utils.density_map" title="dipy.tracking.utils.density_map"><code class="xref py py-obj docutils literal"><span class="pre">dipy.tracking.utils.density_map</span></code></a>, <a class="reference internal" href="#dipy.tracking.streamline.compress_streamlines" title="dipy.tracking.streamline.compress_streamlines"><code class="xref py py-obj docutils literal"><span class="pre">dipy.tracking.streamline.compress_streamlines</span></code></a></p>
</div>
<p class="rubric">References</p>
<dl class="docutils">
<dt>[Bresenham5] Bresenham, Jack Elton. &#8220;Algorithm for computer control of a</dt>
<dd>digital plotter&#8221;, IBM Systems Journal, vol 4, no. 1, 1965.</dd>
<dt>[Houde15] Houde et al. How to avoid biased streamlines-based metrics for</dt>
<dd>streamlines with variable step sizes, ISMRM 2015.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="id78">
<h3>unique_rows<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.unique_rows">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">unique_rows</code><span class="sig-paren">(</span><em>in_array</em>, <em>dtype='f4'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.unique_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>This (quickly) finds the unique rows in an array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>in_array: ndarray</strong></p>
<blockquote>
<div><p>The array for which the unique rows should be found</p>
</div></blockquote>
<p><strong>dtype: str, optional</strong></p>
<blockquote>
<div><p>This determines the intermediate representation used for the
values. Should at least preserve the values of the input array.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">u_return: ndarray</p>
<blockquote class="last">
<div><p>Array with the unique rows of the original array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id79">
<h3>warn<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.warn">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">warn</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning, or maybe ignore it or raise an exception.</p>
</dd></dl>

</div>
<div class="section" id="wraps">
<h3>wraps<a class="headerlink" href="#wraps" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.tracking.utils.wraps">
<code class="descclassname">dipy.tracking.utils.</code><code class="descname">wraps</code><span class="sig-paren">(</span><em>wrapped</em>, <em>assigned=('__module__'</em>, <em>'__name__'</em>, <em>'__qualname__'</em>, <em>'__doc__'</em>, <em>'__annotations__')</em>, <em>updated=('__dict__'</em>, <em>)</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.utils.wraps" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator factory to apply update_wrapper() to a wrapper function</p>
<p>Returns a decorator that invokes update_wrapper() with the decorated
function as the wrapper argument and the arguments to wraps() as the
remaining arguments. Default arguments are as for update_wrapper().
This is a convenience function to simplify applying partial() to
update_wrapper().</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dipy.sims.html" title="sims"
             >previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >API Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2018, dipy developers &lt;neuroimaging@python.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>